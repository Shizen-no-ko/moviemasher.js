{"version":3,"file":"moviemasher.js","sources":["../src/Utilities/Color.ts","../src/Setup/Default.ts","../src/Setup/Errors.ts","../src/Setup/Parameter.ts","../src/Utilities/Is.ts","../src/Setup/Enums.ts","../src/Mash/TypeValue/TypeValue.ts","../src/Mash/Definitions/Definitions.ts","../src/Mash/Type/Type.ts","../src/Mash/Types/Types.ts","../src/Setup/Property.ts","../src/Utilities/Capitalize.ts","../src/Utilities/Element.ts","../src/Utilities/Evaluator.ts","../src/Utilities/Id.ts","../src/Utilities/Round.ts","../src/Utilities/Pixel.ts","../src/Utilities/Seconds.ts","../src/Utilities/Sort.ts","../src/Utilities/Time.ts","../src/Utilities/TimeRange.ts","../src/Utilities/TrackRange.ts","../src/Utilities/Url.ts","../src/Editing/Action/Action.ts","../src/Editing/Action/AddTrackAction.ts","../src/Editing/Action/ChangeAction.ts","../src/Editing/Action/FreezeAction.ts","../src/Editing/Action/ChangeFramesAction.ts","../src/Editing/Action/ChangeTrimAction.ts","../src/Editing/Action/AddEffectAction.ts","../src/Editing/Action/AddClipToTrackAction.ts","../src/Editing/Action/MoveClipsAction.ts","../src/Editing/Action/RemoveClipsAction.ts","../src/Editing/Action/SplitAction.ts","../src/Editing/Action/MoveEffectsAction.ts","../src/Editing/Actions/Actions.ts","../src/Job/Job.ts","../src/Playing/AudibleContext.ts","../src/Playing/VisibleContext.ts","../src/Playing/ContextFactory.ts","../src/Loading/Cache.ts","../src/Loading/Loader.ts","../src/Mash/Instance/Instance.ts","../src/Mash/Definition/Definition.ts","../src/Mash/Mixin/Audible/AudibleMixin.ts","../src/Mash/Mixin/Clip/ClipMixin.ts","../src/Mash/Mixin/AudibleFile/AudibleFileMixin.ts","../src/Mash/Audio/AudioInstance.ts","../src/Mash/Mixin/Clip/ClipDefinitionMixin.ts","../src/Mash/Audio/AudioLoader.ts","../src/Mash/Font/FontLoader.ts","../src/Mash/Image/ImageLoader.ts","../src/Mash/Video/VideoLoader.ts","../src/Loading/LoaderFactory.ts","../src/Mash/Mixin/Audible/AudibleDefinitionMixin.ts","../src/Mash/Mixin/AudibleFile/AudibleFileDefinitionMixin.ts","../src/Mash/Audio/AudioDefinition.ts","../src/Mash/Factories/Factories.ts","../src/Mash/Audio/AudioFactory.ts","../src/Mash/Filter/FilterInstance.ts","../src/Mash/Filter/FilterDefinition.ts","../src/Mash/Filter/Definitions/BlendFilter.ts","../src/Mash/Filter/Definitions/ChromaKeyFilter.ts","../src/Mash/Filter/Definitions/ColorFilter.ts","../src/Mash/Filter/Definitions/ColorChannelMixerFilter.ts","../src/Mash/Filter/Definitions/ConvolutionFilter.ts","../src/Mash/Filter/Definitions/CropFilter.ts","../src/Mash/Filter/Definitions/DrawBoxFilter.ts","../src/Mash/Font/FontInstance.ts","../src/Mash/Font/FontDefinition.ts","../src/Mash/Font/FontFactory.ts","../src/Mash/Filter/Definitions/DrawTextFilter.ts","../src/Mash/Filter/Definitions/FadeFilter.ts","../src/Mash/Filter/Definitions/OverlayFilter.ts","../src/Mash/Filter/Definitions/ScaleFilter.ts","../src/Mash/Filter/Definitions/SetSarFilter.ts","../src/Mash/Filter/FilterFactory.ts","../src/Mash/Mixin/Modular/ModularDefinitionMixin.ts","../src/Mash/Mixin/Modular/ModularMixin.ts","../src/Mash/Effect/EffectInstance.ts","../src/Mash/Effect/EffectDefinition.ts","../src/Mash/Effect/EffectFactory.ts","../src/Factory/Factory.ts","../src/Mash/Merger/MergerInstance.ts","../src/Mash/Merger/MergerDefinition.ts","../src/Mash/Merger/MergerFactory.ts","../src/Mash/Scaler/ScalerInstance.ts","../src/Mash/Scaler/ScalerDefinition.ts","../src/Mash/Scaler/ScalerFactory.ts","../src/Mash/Mixin/Transformable/TransformableMixin.ts","../src/Mash/Mixin/Visible/VisibleMixin.ts","../src/Mash/Image/ImageInstance.ts","../src/Mash/Mixin/Visible/VisibleDefinitionMixin.ts","../src/Mash/Image/ImageDefinition.ts","../src/Mash/Image/ImageFactory.ts","../src/Mash/Track/Track.ts","../src/Playing/Composition/Composition.ts","../src/Mash/Mash/MashInstance.ts","../src/Mash/Mash/MashDefinition.ts","../src/Mash/Mash/MashFactory.ts","../src/Editing/Action/ActionFactory.ts","../src/Mash/Masher/MasherInstance.ts","../src/Mash/Masher/MasherDefinition.ts","../src/Mash/Masher/MasherFactory.ts","../src/Mash/Theme/ThemeInstance.ts","../src/Mash/Theme/ThemeDefinition.ts","../src/Mash/Theme/ThemeFactory.ts","../src/Mash/Transition/TransitionInstance.ts","../src/Mash/Transition/TransitionDefinition.ts","../src/Mash/Transition/TransitionFactory.ts","../src/Mash/Video/VideoInstance.ts","../src/Mash/Video/VideoDefinition.ts","../src/Mash/Video/VideoFactory.ts","../src/Mash/Mixin/Streamable/StreamableMixin.ts","../src/Mash/VideoStream/VideoStreamInstance.ts","../src/Mash/Mixin/Streamable/StreamableDefinitionMixin.ts","../src/Mash/VideoStream/VideoStreamDefinition.ts","../src/Mash/VideoStream/VideoStreamFactory.ts","../src/Mash/VideoSequence/VideoSequenceInstance.ts","../src/Mash/VideoSequence/VideoSequenceDefinition.ts","../src/Mash/VideoSequence/VideoSequenceFactory.ts","../src/Factories/index.ts"],"sourcesContent":["import { Rgb, RgbObject, Yuv, YuvObject } from \"../declarations\"\n\nconst rgbValue = (value : string | number) : number => (\n  Math.min(255, Math.max(0, Math.floor(Number(value))))\n)\n\nconst rgbNumeric = (rgb : RgbObject) : Rgb => ({\n  r: rgbValue(rgb.r), g: rgbValue(rgb.g), b: rgbValue(rgb.b)\n})\n\nconst yuvNumeric = (rgb : YuvObject) : Yuv => ({\n  y: rgbValue(rgb.y), u: rgbValue(rgb.u), v: rgbValue(rgb.v)\n})\n\nconst colorYuv2rgb = (yuv : YuvObject) : Rgb => {\n  const floats = yuvNumeric(yuv)\n  return rgbNumeric({\n    r: floats.y + 1.4075 * (floats.v - 128),\n    g: floats.y - 0.3455 * (floats.u - 128) - (0.7169 * (floats.v - 128)),\n    b: floats.y + 1.7790 * (floats.u - 128)\n  })\n}\n\nconst colorRgb2hex = (rgb: RgbObject): string => {\n  // unused after 5.0 refactor, but perhaps needed?\n  let r = rgb.r.toString(16);\n  let g = rgb.g.toString(16);\n  let b = rgb.b.toString(16);\n  if (r.length < 2) r = `0${r}`;\n  if (g.length < 2) g = `0${g}`;\n  if (b.length < 2) b = `0${b}`;\n  return `#${r}${g}${b}`;\n}\n\nconst colorYuvBlend = (yuvs : YuvObject[], yuv : YuvObject, match : number, blend : number) : number => {\n  let diff = 0.0\n  const blendYuv = yuvNumeric(yuv)\n  yuvs.forEach(yuvObject => {\n    const numericYuv = yuvNumeric(yuvObject)\n    const du = numericYuv.u - blendYuv.u\n    const dv = numericYuv.v - blendYuv.v\n    diff += Math.sqrt((du * du + dv * dv) / (255.0 * 255.0))\n  })\n  diff /= yuvs.length\n\n  if (blend > 0.0001) {\n    return Math.min(1.0, Math.max(0.0, (diff - match) / blend)) * 255.0\n  }\n  return (diff > match) ? 255 : 0\n}\n\nconst colorRgb2yuv = (rgb : RgbObject) : Yuv => {\n  const ints = rgbNumeric(rgb)\n  return {\n    y: ints.r * 0.299000 + ints.g * 0.587000 + ints.b * 0.114000,\n    u: ints.r * -0.168736 + ints.g * -0.331264 + ints.b * 0.500000 + 128,\n    v: ints.r * 0.500000 + ints.g * -0.418688 + ints.b * -0.081312 + 128\n  }\n}\n\nconst colorStrip = (color: string): string => color.toLowerCase().replaceAll(/[\\s]/g, '')\n\n\nconst colorValid = (color: string): boolean => {\n  const colorStripped = colorStrip(color)\n  const style = new Option().style\n  style.color = color\n  const styleStripped = colorStrip(style.color)\n  if (!styleStripped) return false\n\n  if (styleStripped.startsWith('rgb')) return true\n\n  return styleStripped === colorStripped\n}\n\nconst colorTransparent = '#00000000'\n\nconst Color = {\n  valid: colorValid,\n  yuvBlend: colorYuvBlend,\n  rgb2yuv: colorRgb2yuv,\n  yuv2rgb: colorYuv2rgb,\n  rgb2hex: colorRgb2hex,\n  transparent: colorTransparent,\n  strip: colorStrip,\n}\nexport {\n  Color,\n  colorStrip,\n  colorValid,\n  colorRgb2hex,\n  colorYuv2rgb,\n  colorRgb2yuv,\n  colorYuvBlend,\n  colorTransparent,\n}\n","import { colorTransparent } from \"../Utilities/Color\"\n\nconst Default = {\n  label: \"Unlabeled\",\n  masher: {\n    buffer: 10,\n    fps: 0,\n    loop: true,\n    volume: 0.75,\n    precision: 3,\n    autoplay: false,\n  },\n  mash: {\n    label: \"Unlabeled Mash\",\n    quantize: 10,\n    backcolor: colorTransparent,\n    gain: 0.75,\n    buffer: 10,\n    output: {\n      size: '320x240',\n    }\n  },\n  instance: {\n    audio: { gain: 1.0, trim: 0, loop: 1 },\n    video: { speed: 1.0 }\n  },\n  definition: {\n    frame: { duration: 2 },\n    image: { duration: 2 },\n    theme: { duration: 3 },\n    transition: { duration: 1 },\n    video: { fps: 0 },\n    videosequence: { pattern: '%.jpg', fps: 10, increment: 1, begin: 1, padding: 0 },\n    videostream: { duration: 10 },\n  },\n}\n\nexport { Default }\n","const $invalid = \"Invalid\"\nconst $unknown = \"Unknown\"\nconst $expected = \"Expected\"\nconst $invalidArgument = `${$invalid} argument`\nconst $invalidProperty = `${$invalid} property`\nconst $invalidDefinitionProperty = `${$invalid} definition property`\nconst $deprecated = \"deprecated in 4.1\"\nconst $internal = \"Internal Error \"\nconst Errors = {\n  eval: {\n    sourceRect: `${$invalid} evaluation of source rect `,\n    outputSize: `${$invalid} evaluation of output size `,\n    conditionTruth: `${$expected} at least one condition to evaluate to true `,\n    conditionValue: `${$expected} condition to have a value `,\n    number: `${$expected} evaluated value to be a number `,\n    get: `${$expected} to get evaluated value `,\n  },\n  composition: { mashUndefined: `${$internal}composition.mash undefined` },\n  audibleContext: `${$expected} AudioContext`,\n  mash: `${$expected} mash`,\n  action: `${$expected} Action`,\n  actions: `${$expected} Actions`,\n  internal: $internal,\n  argument: `${$invalidArgument} `,\n  invalid: {\n    canvas: `${$invalidArgument} canvas `,\n    definition: {\n      duration: `${$invalidDefinitionProperty} duration`,\n      audio: `${$invalidDefinitionProperty} audio|url`,\n      url: `${$invalidDefinitionProperty} url`,\n      source: `${$invalidDefinitionProperty} source`,\n      id: `${$invalidDefinitionProperty} id`,\n      object: `${$invalidProperty} definition`,\n    },\n    size: `${$invalid} size `,\n    track: `${$invalid} track `,\n    trackType: `${$invalidProperty} trackType `,\n    action: `${$invalid} action `,\n    name: `${$invalidProperty} name `,\n    value: `${$invalidProperty} value `,\n    type: `${$invalidProperty} type `,\n    url: `${$invalidProperty} url `,\n    property: $invalidProperty,\n    argument: $invalidArgument,\n    object: `${$invalidArgument} object `,\n    factory: `${$invalid} factory `,\n    volume: `${$invalidArgument} volume`,\n  },\n  type: `${$unknown} type `,\n  selection: `${$invalid} selection `,\n  unknown: {\n    type: `${$unknown} type `,\n    merger: `${$unknown} merger `,\n    effect: `${$unknown} effect `,\n    filter: `${$unknown} filter `,\n    font: `${$unknown} font `,\n    scaler: `${$unknown} scalar `,\n    mode: `${$unknown} mode `,\n    definition: `${$unknown} definition `,\n  },\n  uncached: \"Uncached URL \",\n  object: `${$invalidArgument} object `,\n  array: `${$invalidArgument} array `,\n  media: `${$invalidArgument} media `,\n  id: `${$invalidArgument} id `,\n  frame: `${$invalidArgument} frame `,\n  frames: `${$invalidProperty} frames `,\n  fps: `${$invalidArgument} fps `,\n  seconds: `${$invalidArgument} seconds `,\n  url: `${$invalidArgument} url `,\n  time: `${$invalidArgument} Time`,\n  timeRange: `${$invalidArgument} TimeRange`,\n  mainTrackOverlap: `${$internal}: main track clips overlap without transition`,\n  unknownMash: `${$unknown} Mash property `,\n  unimplemented: `${$expected} method to be overridden`,\n  property: `${$invalidArgument} property `,\n  wrongClass: `${$expected} instance of `,\n}\n\nexport { Errors }\n","import { JsonObject, ScalarValue, ValueObject } from \"../declarations\"\nimport { Errors } from \"./Errors\"\n\ninterface ParameterObject {\n  name? : string\n  value? : ScalarValue | ValueObject[]\n}\n\nclass Parameter {\n  constructor({ name, value } : ParameterObject) {\n    if (!name) throw Errors.invalid.name\n    if (typeof value === \"undefined\") throw Errors.invalid.value\n\n    this.name = String(name)\n    this.value = value\n  }\n\n  name : string\n\n  toJSON() : JsonObject {\n    return { name: this.name, value: this.value }\n  }\n\n  value : ScalarValue | ValueObject[]\n}\n\nexport { Parameter, ParameterObject }\n","import { ScalarArray, UnknownObject } from \"../declarations\"\n\nconst objectType = (value : unknown) : boolean => typeof value === 'object'\n\nconst stringType = (value : unknown) : boolean => (\n  typeof value === 'string'\n)\n\nconst undefinedType = (value : unknown) : boolean => typeof value === 'undefined'\n\nconst numberType = (value : unknown) : boolean => typeof value === 'number'\n\nconst booleanType = (value : unknown) : boolean => typeof value === 'boolean'\n\nconst methodType = (value : unknown) : boolean => typeof value === 'function'\n\nconst isDefined = (value : unknown) : boolean => !undefinedType(value)\n\nconst isNan = (value : unknown) : boolean => numberType(value) && Number.isNaN(value)\n\nconst isNumber = (value : unknown) : boolean => numberType(value) && !Number.isNaN(value)\n\nconst isInteger = (value : unknown) : boolean => Number.isInteger(value)\n\nconst isFloat = (value : unknown) : boolean => numberType(value) && !isInteger(value)\n\nconst isPositive = (value : unknown) : boolean => numberType(value) && Number(value) >= 0\n\nconst isAboveZero = (value : unknown) : boolean => isNumber(value) && Number(value) > 0\n\nconst isArray = (value : unknown) : boolean => (\n  isDefined(Array.isArray) ? Array.isArray(value) : value instanceof Array\n)\n\nconst length = (value : string | ScalarArray) : boolean => !!value.length\n\nconst isPopulatedString = (value : unknown) : boolean => stringType(value) && length(String(value))\n\nconst isPopulatedObject = (value : unknown) : boolean => (\n  objectType(value) && length(Object.keys(<UnknownObject> value))\n)\n\nconst isPopulatedArray = (value : unknown) : boolean => isArray(value) && length(<ScalarArray> value)\n\nconst Is = {\n  aboveZero: isAboveZero,\n  array: isArray,\n  boolean: booleanType,\n  defined: isDefined,\n  float: isFloat,\n  integer: isInteger,\n  method: methodType,\n  nan: isNan,\n  number: numberType,\n  object: objectType,\n  populatedArray: isPopulatedArray,\n  populatedObject: isPopulatedObject,\n  populatedString: isPopulatedString,\n  positive: isPositive,\n  string: stringType,\n  undefined: undefinedType,\n}\n\nexport {\n  Is,\n  isAboveZero,\n  isArray,\n  booleanType as isBoolean,\n  isDefined,\n  isFloat,\n  isInteger,\n  methodType as isMethod,\n  isNan,\n  numberType as isNumber,\n  objectType as isObject,\n  isPopulatedArray,\n  isPopulatedObject,\n  isPopulatedString,\n  isPositive,\n  stringType as isString,\n  undefinedType as isUndefined,\n}\n","\n\nenum ActionType {\n  AddTrack = 'addTrack',\n  AddClipsToTrack = 'addClipsToTrack',\n  MoveClips = 'moveClips',\n  AddEffect = 'addEffect',\n  Change = 'change',\n  ChangeFrames = 'changeFrames',\n  ChangeTrim = 'changeTrim',\n  ChangeGain = 'changeGain',\n  MoveEffects = 'moveEffects',\n  Split = 'split',\n  Freeze ='freeze',\n  RemoveClips = 'removeClips',\n}\n\nenum TrackType {\n  Audio = 'audio',\n  Video = 'video',\n}\n\nenum ClipType {\n  Audio = 'audio',\n  Frame = 'frame',\n  Image = 'image',\n  Theme = 'theme',\n  Transition = 'transition',\n  Video = 'video',\n  VideoSequence = 'videosequence',\n  VideoStream = 'videostream',\n  // AudioStream = 'audiostream',\n}\n\nconst ClipTypes = Object.values(ClipType)\n\n// NOTE: order important here - determines initialization\nenum DefinitionType {\n  Filter = 'filter',\n  Merger = 'merger',\n  Scaler = 'scaler',\n  Effect = 'effect',\n  Font = 'font',\n  Mash = 'mash',\n  Masher = 'masher',\n  Theme = 'theme',\n  Transition = 'transition',\n  Image = 'image',\n  Video = 'video',\n  Audio = 'audio',\n  VideoStream = 'videostream',\n  VideoSequence = 'videosequence',\n  // AudioStream = 'audiostream',\n}\nconst DefinitionTypes = Object.values(DefinitionType)\n\nenum EventType {\n  Action = 'action',\n  Duration = 'durationchange',\n  Draw = 'draw',\n  Ended = 'ended',\n  Fps = 'ratechange',\n  Loaded = 'loadeddata',\n  Mash = 'mashchange',\n  Pause = 'pause',\n  Play = 'play',\n  Playing = 'playing',\n  Seeked = 'seeked',\n  Seeking = 'seeking',\n  Selection = 'selection',\n  Time = 'timeupdate',\n  Track = 'track',\n  Volume = 'volumechange',\n  Waiting = 'waiting',\n}\n\nenum MashType {\n  Mash = DefinitionType.Mash,\n}\nconst MashTypes = Object.values(MashType)\n\nenum ModuleType {\n  Effect ='effect',\n  Font = 'font',\n  Merger = 'merger',\n  Scaler = 'scaler',\n  Theme = 'theme',\n  Transition = 'transition',\n}\nconst ModuleTypes = Object.values(ModuleType)\n\nenum LoadType {\n  Audio = 'audio',\n  Font = 'font',\n  Image = 'image',\n  Module = 'module',\n  Video = 'video',\n}\n\nenum MoveType {\n  Audio = 'audio',\n  Effect = 'effect',\n  Video = 'video',\n}\n\nenum DataType {\n  Boolean = 'boolean',\n  Direction4 = 'direction4',\n  Direction8 = 'direction8',\n  Font = 'font',\n  Fontsize = 'fontsize',\n  Integer = 'integer',\n  Mode = 'mode',\n  Number = 'number',\n  Pixel = 'pixel',\n  Rgb = 'rgb',\n  Rgba = 'rgba',\n  String = 'string',\n  Text = 'text',\n}\nconst DataTypes = Object.values(DataType)\n\nenum TransformType {\n  Merger = 'merger',\n  Scaler = 'scaler'\n}\n\nconst TransformTypes = Object.values(TransformType)\n\nenum CommandType {\n  File = 'file',\n  Stream = 'stream'\n}\n\nconst CommandTypes = Object.values(CommandType)\n\nexport {\n  ActionType,\n  ClipType,\n  ClipTypes,\n  CommandType,\n  CommandTypes,\n  DataType,\n  DataTypes,\n  DefinitionType,\n  DefinitionTypes,\n  EventType,\n  LoadType,\n  MashType,\n  MashTypes,\n  ModuleType,\n  ModuleTypes,\n  MoveType,\n  TrackType,\n  TransformType,\n  TransformTypes,\n}\n","import { ScalarValue } from \"../../declarations\";\n\ninterface TypeValueObject {\n  id : ScalarValue\n  identifier : string\n  label : string\n}\n\nclass TypeValue {\n  constructor(object : TypeValueObject) {\n    const { id, identifier, label } = object\n    this.id = id\n    this.identifier = identifier\n    this.label = label\n  }\n\n  id : ScalarValue\n\n  identifier : string\n\n  label : string\n}\n\nexport { TypeValue, TypeValueObject }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Definition } from \"../Definition/Definition\"\n\ntype DefinitionsList = Definition[]\nconst DefinitionsMap = new Map<string, Definition>()\nconst DefinitionsByType = new Map <DefinitionType, DefinitionsList>()\n\nconst definitionsByType = (type : DefinitionType) : DefinitionsList => {\n  const list = DefinitionsByType.get(type)\n  if (list) return list\n\n  const definitionsList : DefinitionsList = []\n  DefinitionsByType.set(type, definitionsList)\n  return definitionsList\n}\nconst definitionsClear = (): void => {\n  DefinitionsMap.clear()\n  DefinitionsByType.clear()\n}\n\nconst definitionsFont = definitionsByType(DefinitionType.Font)\n\nconst definitionsFromId = (id : string) : Definition => {\n  if (!definitionsInstalled(id)) {\n    console.trace(id)\n    throw Errors.unknown.definition + id\n  }\n\n  const definition = DefinitionsMap.get(id)\n  if (!definition) throw Errors.internal + id\n\n  return definition\n}\n\nconst definitionsInstall = (definition : Definition) : void => {\n  const { type, id } = definition\n  DefinitionsMap.set(id, definition)\n  definitionsByType(type).push(definition)\n}\n\nconst definitionsInstalled = (id : string) : boolean => DefinitionsMap.has(id)\n\nconst definitionsMerger = definitionsByType(DefinitionType.Merger)\n\nconst definitionsScaler = definitionsByType(DefinitionType.Scaler)\n\nconst definitionsUninstall = (id : string) : void => {\n  if (!definitionsInstalled(id)) return\n\n  const definition = definitionsFromId(id)\n  DefinitionsMap.delete(id)\n  const { type } = definition\n  const definitions = definitionsByType(type)\n  const index = definitions.indexOf(definition)\n  if (index < 0) throw Errors.internal\n\n  definitions.splice(index, 1)\n}\n\nconst Definitions = {\n  byType: definitionsByType,\n  clear: definitionsClear,\n  font: definitionsFont,\n  fromId: definitionsFromId,\n  install: definitionsInstall,\n  installed: definitionsInstalled,\n  map: DefinitionsMap,\n  merger: definitionsMerger,\n  scaler: definitionsScaler,\n  uninstall: definitionsUninstall,\n}\n\nexport {\n  Definitions,\n  definitionsByType,\n  definitionsClear,\n  definitionsFont,\n  definitionsFromId,\n  definitionsInstall,\n  definitionsInstalled,\n  DefinitionsMap,\n  definitionsMerger,\n  definitionsScaler,\n  definitionsUninstall,\n}\n","import { ScalarRaw, SelectionValue } from \"../../declarations\"\nimport { DataType } from \"../../Setup/Enums\"\nimport { TypeValue, TypeValueObject } from \"../TypeValue/TypeValue\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { colorValid } from \"../../Utilities/Color\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { isNan } from \"../../Utilities/Is\"\n\n\n\n\ninterface TypeObject {\n  id? : DataType\n  value? : ScalarRaw\n  values? : TypeValueObject[]\n  modular? : boolean\n}\n\nclass Type {\n  constructor(object : TypeObject) {\n    const { value, values, modular, id } = object\n    if (!id) throw Errors.id\n    if (typeof value === \"undefined\") throw Errors.invalid.value + JSON.stringify(object)\n\n    this.value = value\n    this.id = id\n    if (modular) this.modular = modular\n    if (values) this.values.push(...values.map(value => new TypeValue(value)))\n  }\n\n  coerce(value: SelectionValue): ScalarRaw | undefined {\n    const string = String(value)\n    const number = Number(value)\n\n    if (this.modular && !Definitions.fromId(string)) return\n\n    switch (this.id) {\n      case DataType.Boolean: return !!value\n      case DataType.Number:\n      case DataType.Fontsize:\n      case DataType.Pixel: {\n        if (isNan(number)) return\n\n        return number\n      }\n      case DataType.Integer: {\n        if (isNan(number)) return\n\n        return Math.round(number)\n      }\n      case DataType.Rgb:\n      case DataType.Rgba: {\n        if (!colorValid(string)) return\n\n        break\n      }\n      case DataType.Direction4:\n      case DataType.Direction8:\n      case DataType.Mode: {\n        if (!this.values?.find(object => { object.id === string })) return\n\n        break\n      }\n    }\n    return string\n  }\n\n  id : DataType\n\n  modular = false\n\n  value : ScalarRaw\n\n  values : TypeValueObject[] = []\n}\n\nexport { Type, TypeObject }\n","\nimport { Is } from \"../../Utilities/Is\";\nimport dataTypesJson from \"../../Setup/dataTypes.json\"\nimport { ScalarRaw } from \"../../declarations\"\nimport { DataType, DataTypes } from \"../../Setup/Enums\";\nimport { Errors } from \"../../Setup/Errors\";\nimport { Type, TypeObject } from \"../Type/Type\";\n\ninterface TypesJson {\n  [index : string] : TypeObject\n}\n\nclass TypesClass {\n  constructor(object : TypesJson) {\n    Object.entries(object).forEach(entry => {\n      const [key, value] = entry\n      const dataType = <DataType> key\n      if (!DataTypes.includes(dataType)) throw Errors.type + 'DataTypes ' + key\n\n      this.propertyTypes.set(dataType, new Type({...value, id: dataType }))\n\n    })\n  }\n\n  propertyType(type : DataType) : Type {\n    const instance = this.propertyTypes.get(type)\n    if (!instance) throw Errors.type + 'propertyType ' + type\n\n    return instance\n  }\n\n  propertyTypeDefault(type : DataType) : ScalarRaw {\n    if (!(Is.populatedString(type) && DataTypes.includes(type))) throw Errors.type + 'propertyTypeDefault ' + type\n\n    const propertyType = this.propertyType(type)\n    if (!Is.object(propertyType)) return \"\"\n\n    return propertyType.value\n  }\n\n  propertyTypes = new Map<DataType, Type>()\n}\n\nconst TypesInstance = new TypesClass(dataTypesJson)\n\nexport { TypesInstance as Types }\n","import { JsonObject, ScalarRaw } from \"../declarations\"\nimport { Errors } from \"./Errors\"\nimport { DataType } from \"./Enums\"\nimport { Type } from \"../Mash/Type/Type\"\nimport { Types } from \"../Mash/Types/Types\"\n\ninterface PropertyObject {\n  type? : DataType\n  name? : string\n  value? : ScalarRaw\n  custom? : boolean\n}\n\nclass Property {\n  constructor(object: PropertyObject) {\n    const { type, name, value, custom } = object\n    if (!type) throw Errors.invalid.type\n    if (!name) throw Errors.invalid.name\n    if (typeof value === \"undefined\") throw Errors.invalid.value + JSON.stringify(object)\n\n    this.type = Types.propertyType(type)\n    this.name = name\n    this.value = value\n    this.custom = !!custom\n  }\n\n  custom: boolean\n\n  name : string\n\n  toJSON() : JsonObject {\n    return { value: this.value, type: this.type.id }\n  }\n\n  type : Type\n\n  value : ScalarRaw\n}\n\nexport { Property, PropertyObject }\n","import { isPopulatedString } from \"./Is\"\n\nexport const Capitalize = (value : string) : string => {\n  if (!isPopulatedString(value)) return value\n\n  return `${value[0].toUpperCase()}${value.substr(1)}`\n};\n","import { ScrollMetrics } from '../declarations'\n\n\nconst ElementScrollProps = [\n  'scrollPaddingleft',\n  'scrollPaddingRight',\n  'scrollPaddingTop',\n  'scrollPaddingBottom',\n]\nconst elementScrollMetrics = (element?: Element | null): ScrollMetrics | undefined => {\n  if (!element) return\n\n  const style: CSSStyleDeclaration = getComputedStyle(element)\n  const entries = ElementScrollProps.map(key => {\n    const value = style.getPropertyValue(key) || '0px'\n    const number = Number(value.slice(0, -2))\n    return [key, isNaN(number) ? 0 : number]\n  })\n  const { scrollLeft, scrollTop } = element\n  const { x, y, width, height } = element.getBoundingClientRect()\n  entries.push(['scrollLeft', scrollLeft])\n  entries.push(['scrollTop', scrollTop])\n  entries.push(['x', x])\n  entries.push(['y', y])\n  entries.push(['width', width])\n  entries.push(['height', height])\n  return Object.fromEntries(entries)\n}\n\nconst Element = {\n  scrollMetrics: elementScrollMetrics,\n}\n\nexport { Element, elementScrollMetrics }\n","import {\n  EvaluatorValue,\n  Scalar,\n  UnknownObject,\n  ScalarRaw,\n  ScalarValue,\n  Size,\n  ValueObject\n} from \"../declarations\"\nimport { Errors } from \"../Setup/Errors\"\nimport { Is } from \"./Is\"\nimport { TimeRange } from \"./TimeRange\"\nimport { VisibleContext } from \"../Playing\"\n\nconst KEYS_SIZED = ['mm_width', 'mm_height']\n\nconst KEYS_GETTERS = [\n  \"mm_dimensions\",\n  \"mm_duration\",\n  \"mm_fps\",\n  \"mm_height\",\n  \"mm_t\",\n  \"mm_width\",\n  \"t\",\n]\n\nconst KEYS = [\n  \"ceil\",\n  \"floor\",\n  \"mm_cmp\",\n  \"mm_horz\",\n  \"mm_max\",\n  \"mm_min\",\n  \"mm_vert\",\n  ...KEYS_GETTERS,\n  ...KEYS_SIZED\n]\n\nconst $evaluator = \"evaluator\"\n\nconst arrayFromElements = (elements : Scalar) : ScalarValue[] => {\n  if (typeof elements === \"string\") return String(elements).split(',')\n\n  return <ScalarValue[]> elements\n}\n\nconst conditionalExpression = (conditional : UnknownObject) : string => {\n  const { condition } = conditional\n\n  // not strict equality, since we may have strings and numbers\n  if (Is.defined(conditional.is)) return `${condition}==${conditional.is}`\n\n  const elements = conditional.in\n  if (Is.undefined(elements)) return String(condition)\n\n  // support supplying values as array or comma-delimited string\n  const array = arrayFromElements(<Scalar> elements)\n\n  const strings = Is.string(array[0])\n  const values = array.map(element => (strings ? `\"${element}\"` : element))\n  const type = strings ? 'String' : 'Number'\n  const expression = `([${values.join(',')}].includes(${type}(${condition})))`\n  return expression\n}\n\nconst replaceOperators = (string : string) : string => (\n  string.replaceAll(' or ', ' || ').replaceAll(' and ', ' && ')\n)\n\nclass Evaluator {\n  [index: string] : unknown\n\n  constructor(timeRange : TimeRange, context : VisibleContext, size : Size, mergeContext? : VisibleContext) {\n    this.timeRange = timeRange\n    this.context = context\n    this.mergeContext = mergeContext\n    this.size = size\n    this.setInputSize(this.size)\n  }\n\n  ceil = Math.ceil\n\n  conditionalValue(conditionals : ValueObject[]) : ScalarValue {\n    // console.log(this.constructor.name, \"conditionalValue\", conditionals)\n    const trueConditional = conditionals.find((conditional) => {\n      const expression = replaceOperators(conditionalExpression(conditional))\n      const result = this.evaluateExpression(expression)\n      // console.log(this.constructor.name, \"conditionalValue\", expression, \"=\", result)\n      return result\n    })\n    if (typeof trueConditional === \"undefined\") throw Errors.eval.conditionTruth\n\n    const { value } = trueConditional\n    if (typeof value === \"undefined\") throw Errors.eval.conditionValue\n\n    // console.log(this.constructor.name, \"conditionalValue\", value.constructor.name, value)\n    return value\n  }\n\n  context : VisibleContext\n\n  get duration() : number { return this.timeRange.lengthSeconds }\n\n  evaluate(value : ScalarValue | ValueObject[]) : ScalarValue {\n    // console.log(this.constructor.name, \"evaluate\", value)\n    if (typeof value === \"number\") return value\n\n    const expression = (typeof value === \"string\") ? String(value) : this.conditionalValue(value)\n    if (typeof expression === \"number\") return expression\n\n    const result = this.evaluateExpression(expression)\n    // console.log(this.constructor.name, \"evaluate\", expression, \"=\", result)\n    return result\n  }\n\n  private evaluateExpression(expression : string) : ScalarValue {\n    const script = `return ${this.replaceKeys(expression)}`\n    try {\n      // eslint-disable-next-line no-new-func\n      const method = new Function($evaluator, script)\n      const result = method(this)\n      // console.log(this.constructor.name, \"evaluateExpression\", expression, result)\n      return result\n    } catch (exception) {\n      //console.warn(`Evaluator.evaluateExpression`, exception, expression, this.map)\n      return expression\n    }\n  }\n\n  floor = Math.floor\n\n  get(key : string) : EvaluatorValue | undefined {\n    if (this.map.has(key)) {\n      // console.log(\"Evaluator.get returning value from map\", key, this.map.get(key))\n      return this.map.get(key)\n    }\n\n    if (!KEYS.includes(key)) throw Errors.eval.get + key\n\n    const value = this[key]\n    if (KEYS_GETTERS.includes(key)) return <EvaluatorValue> value\n\n    if (typeof value === \"function\") {\n      // console.log(\"Evaluator.get returning method\", key)\n      return value.bind(this)\n    }\n\n    throw Errors.eval.get + key\n\n    // return // unknown key\n  }\n\n  has(key : string) : boolean { return KEYS.includes(key) || this.map.has(key) }\n\n  initialize(key : string, value : EvaluatorValue) : boolean {\n    if (this.has(key)) return false\n\n    this.set(key, value)\n    return true\n  }\n\n  get inputSize() : Size {\n    return {\n      width: Number(this.get(\"mm_input_width\")),\n      height: Number(this.get(\"mm_input_height\"))\n    }\n  }\n\n  get keys() : string[] { return [...new Set([...this.map.keys(), ...KEYS])] }\n\n  private map = new Map<string, EvaluatorValue>()\n\n  mergeContext? : VisibleContext\n\n  mm_cmp(a : number, b : number, x : number, y : number) : number {\n    return ((a > b) ? x : y)\n  }\n\n  get mm_dimensions() : string { return `${this.mm_width}x${this.mm_height}` }\n\n  get mm_duration() : number { return this.duration }\n\n  get mm_fps() : number { return this.timeRange.fps }\n\n  get mm_height() : number { return this.size.height }\n\n  mm_horz(size : ScalarValue, proud : ScalarRaw) : number {\n    return this.sized(0, size, proud)\n  }\n\n  mm_max = Math.max\n\n  mm_min = Math.min\n\n  get mm_t() : number { return this.position }\n\n  mm_vert(size : ScalarValue, proud : ScalarRaw) : number {\n    return this.sized(1, size, proud)\n  }\n\n  get mm_width() : number { return this.size.width }\n\n  get position() : number { return this.timeRange.position }\n\n  replaceKeys(value : string) : string {\n    let expression = value\n    const expressions = Object.fromEntries(this.keys.map(key => ([\n      key, new RegExp(`\\\\b${key}\\\\b`, 'g')\n    ])))\n    Object.entries(expressions).forEach(([key, regExp]) => {\n      expression = expression.replaceAll(regExp, `${$evaluator}.get(\"${key}\")`)\n    })\n    return expression\n  }\n\n  set(key : string, value : EvaluatorValue) : void { this.map.set(key, value) }\n\n  setInputSize({ width, height } : Size) : void {\n    this.set(\"in_h\", height)\n    this.set(\"mm_input_height\", height)\n    this.set(\"in_w\", width)\n    this.set(\"mm_input_width\", width)\n  }\n\n  size : Size\n\n  sized(vertical : number, size : ScalarValue, proud : ScalarRaw) : number {\n    const scale : number = Is.float(size) ? Number(size) : parseFloat(String(size))\n    if (Is.nan(scale)) throw Errors.eval.number + 'scale'\n\n    const sizedKey = KEYS_SIZED[vertical]\n    const sizedValue = this.get(sizedKey)\n    const value = parseFloat(String(sizedValue))\n    if (Is.nan(value)) throw Errors.eval.number + `value ${sizedKey}=>${sizedValue}`\n\n    const scaled = value * scale\n    if (!proud) return scaled\n    const otherSizedKey = KEYS_SIZED[Math.abs(vertical - 1)]\n    const otherValue = this.get(otherSizedKey)\n    if (typeof otherValue === \"undefined\") throw Errors.internal + 'otherValue'\n\n    const other = parseFloat(String(otherValue))\n    if (Is.nan(other)) throw Errors.eval.number + 'other'\n\n    if (other <= value) return scaled\n\n    return value + (scale - 1.0) * other\n  }\n\n  get t() : number { return this.mm_duration }\n\n  timeRange : TimeRange\n}\n\nexport { Evaluator }\n","const Id = () : string => {\n  return `${Date.now().toString(36)}${Math.random().toString(36).substr(2)}`\n}\n\nexport { Id }\n","import { NumberConverter } from \"../declarations\"\n\nconst roundMethod = (rounding = '') : NumberConverter => {\n  switch (rounding) {\n    case 'ceil': return Math.ceil\n    case 'floor': return Math.floor\n    default: return Math.round\n  }\n}\n\nconst roundWithMethod = (number: number, method = ''): number => {\n  const func = roundMethod(method)\n  return func(number)\n}\n\nconst Round = {\n  method: roundMethod,\n  withMethod: roundWithMethod,\n}\n\nexport { Round, roundMethod, roundWithMethod }\n","import { Point, Rgba, ScalarValue, Size, Pixels } from \"../declarations\"\nimport { roundWithMethod } from \"./Round\"\n\nconst pixelFromPoint = (pt : Point, width : number) => pt.y * width + pt.x\n\nconst pixelToPoint = (index : number, width : number) : Point => (\n  { x: index % width, y: Math.floor(index / width) }\n)\n\nconst pixelToIndex = (pixel : number) => pixel * 4\n\nconst pixelRgbaAtIndex = (index : number, pixels : Pixels) : Rgba => (\n  {\n    r: pixels[index],\n    g: pixels[index + 1],\n    b: pixels[index + 2],\n    a: pixels[index + 3],\n  }\n)\n\nconst pixelRgba = (pixel : number, data : Pixels) => pixelRgbaAtIndex(pixelToIndex(pixel), data)\n\nconst pixelSafe = (pixel : number, offsetPoint: Point, size : Size) => {\n  const { x, y } = offsetPoint\n  const { width, height } = size\n  const pt = pixelToPoint(pixel, width)\n  pt.x = Math.max(0, Math.min(width - 1, pt.x + x))\n  pt.y = Math.max(0, Math.min(height - 1, pt.y + y))\n  return pixelFromPoint(pt, width)\n}\n\nconst pixelNeighboringPixels = (pixel : number, size : Size) : number[] => {\n  const depth = 3 // should be 4, no?\n  const pixels = []\n  const halfSize = Math.floor(depth / 2)\n  for (let y = 0; y < depth; y += 1) {\n    for (let x = 0; x < depth; x += 1) {\n      const offsetPoint = { x: x - halfSize, y: y - halfSize }\n      pixels.push(pixelSafe(pixel, offsetPoint, size))\n    }\n  }\n  return pixels\n}\n\nconst pixelNeighboringRgbas = (pixel : number, data : Pixels, size : Size) : Rgba[] => (\n  pixelNeighboringPixels(pixel, size).map(p => pixelRgba(p, data))\n)\n\nconst pixelColor = (value : ScalarValue) : string => {\n  const string = String(value)\n  if (string.slice(0, 2) === \"0x\") return `#${string.slice(2)}`\n\n  return string\n}\n\nconst pixelPerFrame = (frames: number, width: number, zoom: number): number => {\n  if (!(frames && width)) return 0\n\n  const widthFrames = width / frames\n\n  const min = Math.min(1, widthFrames)\n  const max = Math.max(1, widthFrames)\n  if (zoom === 1) return max\n  if (!zoom) return min\n\n  return min + ((max - min) * zoom)\n}\n\nconst pixelFromFrame = (frame: number, perFrame : number, rounding = 'ceil'): number => {\n  if (!(frame && perFrame)) return 0\n\n  const pixels = frame * perFrame\n  return roundWithMethod(pixels, rounding)\n}\n\nconst pixelToFrame = (pixels: number, perFrame : number, rounding = 'round'): number => {\n  if (!(pixels && perFrame)) return 0\n\n  return roundWithMethod(pixels / perFrame, rounding)\n}\n\nconst Pixel = {\n  color: pixelColor,\n  fromFrame: pixelFromFrame,\n  neighboringRgbas: pixelNeighboringRgbas,\n  perFrame: pixelPerFrame,\n  rgbaAtIndex: pixelRgbaAtIndex,\n  toFrame: pixelToFrame,\n}\n\nexport {\n  Pixel,\n  pixelColor,\n  pixelFromFrame,\n  pixelNeighboringRgbas,\n  pixelPerFrame,\n  pixelRgbaAtIndex,\n  pixelToFrame,\n}\n","\nconst Seconds = (seconds : number, fps : number, duration : number) : string => {\n  let time, pad, do_rest, s = ''\n  if (! duration) duration = seconds\n  time = 60 * 60 // an hour\n  pad = 2\n  if (duration >= time) {\n    if (seconds >= time) {\n      s += String(Math.floor(seconds / time)).padStart(pad, '0')\n      do_rest = true\n      seconds = seconds % time\n    } else s += '00:'\n  }\n  time = 60 // a minute\n  if (do_rest || (duration >= time)) {\n    if (do_rest) s += ':'\n    if (seconds >= time) {\n      s += String(Math.floor(seconds / time)).padStart(pad, '0')\n      do_rest = true\n      seconds = seconds % time\n    } else s += '00:'\n  }\n  time = 1 // a second\n  if (do_rest || (duration >= time)) {\n    if (do_rest) s += ':'\n    if (seconds >= time) {\n      s += String(Math.floor(seconds / time)).padStart(pad, '0')\n      do_rest = true\n      seconds = seconds % time\n    } else s += '00'\n  } else s += '00'\n  if (fps > 1) {\n    if (fps === 10) pad = 1\n    s += '.'\n    if (seconds) {\n      if (pad === 1) seconds = Math.floor(seconds * 10) / 10\n      else seconds = Math.floor(100 * seconds) / 100\n      seconds = Number(String(seconds).substr(2, 2))\n      s += String(seconds).padStart(pad, '0')\n    } else s += '0'.padStart(pad, '0')\n  }\n  return s\n}\n\nexport { Seconds }\n","import { WithFrame, WithLabel, WithTrack } from \"../declarations\"\n\nconst byFrame = (a : WithFrame, b : WithFrame) : number => a.frame - b.frame\nconst byTrack = (a : WithTrack, b : WithTrack) : number => a.track - b.track\nconst byLabel = (a : WithLabel, b : WithLabel) : number => {\n  if (a.label < b.label) return -1\n  if (a.label > b.label) return 1\n  return 0\n}\n\nconst Sort = { byFrame, byLabel, byTrack }\n\nexport { Sort, byFrame, byLabel, byTrack }\n","import { Errors } from \"../Setup/Errors\"\nimport { Is } from \"./Is\"\nimport { roundWithMethod } from \"./Round\"\n\nconst greatestCommonDenominator = (fps1 : number, fps2 : number) : number => {\n  let a = fps1\n  let b = fps2\n  let t = 0\n  while (b !== 0) {\n    t = b\n    b = a % b\n    a = t\n  }\n  return a\n}\n\nconst lowestCommonMultiplier = (a : number, b : number) : number => (\n  (a * b) / greatestCommonDenominator(a, b)\n)\n\nconst timeEqualizeRates = (time1 : Time, time2 : Time, rounding = '') : Time[] => {\n  if (time1.fps === time2.fps) return [time1, time2]\n\n  const gcf = lowestCommonMultiplier(time1.fps, time2.fps)\n  return [\n    time1.scale(gcf, rounding),\n    time2.scale(gcf, rounding)\n  ]\n}\n\nclass Time implements Time {\n  frame : number\n\n  fps : number\n\n  constructor(frame = 0, fps = 1) {\n    if (!Is.integer(frame) || frame < 0) throw Errors.frame\n    if (!Is.integer(fps) || fps < 1) throw Errors.fps\n\n    this.frame = frame\n    this.fps = fps\n  }\n\n  add(time : Time) : Time {\n    const [time1, time2] = timeEqualizeRates(this, time)\n    return new Time(time1.frame + time2.frame, time1.fps)\n  }\n\n  addFrame(frames : number) : Time {\n    const time = this.copy\n    time.frame += frames\n    return time\n  }\n\n  get copy() : Time { return new Time(this.frame, this.fps) }\n\n  get description() : string { return `${this.frame}@${this.fps}` }\n\n  divide(number : number, rounding = '') : Time {\n    if (!Is.number(number)) throw Errors.argument + 'divide'\n    return new Time(roundWithMethod(Number(this.frame) / number, rounding), this.fps)\n  }\n\n  equalsTime(time : Time) : boolean {\n    const [time1, time2] = timeEqualizeRates(this, time)\n    return time1.frame === time2.frame\n  }\n\n  min(time : Time) : Time {\n    const [time1, time2] = timeEqualizeRates(this, time)\n    return new Time(Math.min(time1.frame, time2.frame), time1.fps)\n  }\n\n  scale(fps : number, rounding = '') : Time {\n    if (this.fps === fps) return this\n\n    const frame = (Number(this.frame) / Number(this.fps)) * Number(fps)\n    // console.debug(this.constructor.name, \"scale\", frame, \"=\", this.frame, \"/\", this.fps, \"*\", fps)\n    return new Time(roundWithMethod(frame, rounding), fps)\n  }\n\n  scaleToFps(fps : number) : Time { return this.scaleToTime(new Time(0, fps)) }\n\n  scaleToTime(time : Time) : Time {\n    return timeEqualizeRates(this, time)[0]\n  }\n  get seconds() : number { return Number(this.frame) / Number(this.fps) }\n\n  subtract(time : Time) : Time {\n    const [time1, time2] = timeEqualizeRates(this, time)\n\n    let subtracted = time2.frame\n    if (subtracted > time1.frame) {\n      subtracted -= subtracted - time1.frame\n    }\n    return new Time(time1.frame - subtracted, time1.fps)\n  }\n\n  subtractFrames(frames : number) : Time {\n    const time = this.copy\n    time.frame -= frames\n    return time\n  }\n\n  toString() : string { return `[${this.description}]` }\n\n  withFrame(frame : number) : Time {\n    const time = this.copy\n    time.frame = frame\n    return time\n  }\n\n  static fromArgs(frame = 0, fps = 1) : Time {\n    return new Time(frame, fps)\n  }\n\n  static fromSeconds(seconds = 0, fps = 1, rounding = '') : Time {\n    if (!Is.number(seconds) || seconds < 0) throw Errors.seconds\n    if (!Is.integer(fps) || fps < 1) throw Errors.fps\n\n    const rounded = roundWithMethod(seconds * fps, rounding)\n    return this.fromArgs(rounded, fps)\n  }\n}\ntype Times = Time[]\n\nexport { Time, Times, timeEqualizeRates }\n","import { Is } from \"./Is\"\nimport { Time, timeEqualizeRates } from \"./Time\"\nimport { roundWithMethod } from \"./Round\"\nimport { Errors } from \"../Setup/Errors\"\n\nclass TimeRange extends Time {\n  frames : number\n\n  constructor(frame = 0, fps = 1, frames = 1) {\n    if (!(Is.integer(frames) && frames >= 0)) {\n      throw Errors.argument + 'frames'\n    }\n    super(frame, fps)\n    this.frames = frames\n  }\n\n  addFrames(frames : number) : TimeRange {\n    const time = this.copy\n    time.frames += frames\n    return time\n  }\n\n  get description() : string { return `${this.frame}-${this.frames}@${this.fps}` }\n\n  get end() : number { return this.frame + this.frames }\n\n  get endTime() : Time { return Time.fromArgs(this.end, this.fps) }\n\n  equalsTimeRange(timeRange : TimeRange) : boolean {\n    const [range1, range2] = <TimeRange[]> timeEqualizeRates(this, timeRange)\n    return range1.frame === range2.frame && range1.frames === range2.frames\n  }\n\n  get lengthSeconds() : number { return Number(this.frames) / Number(this.fps) }\n\n  get position() : number { return Number(this.frame) / Number(this.frames) }\n\n  get startTime() : Time { return Time.fromArgs(this.frame, this.fps) }\n\n  get copy() : TimeRange {\n    return new TimeRange(this.frame, this.fps, this.frames)\n  }\n\n  scale(fps = 1, rounding = \"\") : TimeRange {\n    if (this.fps === fps) return this.copy\n\n    const value = Number(this.frames) / (Number(this.fps) / Number(fps))\n    const time = super.scale(fps, rounding)\n    const frames = Math.max(1, roundWithMethod(value, rounding))\n    return new TimeRange(time.frame, time.fps, frames)\n  }\n\n  intersects(timeRange : TimeRange) : boolean {\n    const [range1, range2] = <TimeRange[]> timeEqualizeRates(this, timeRange)\n\n    if (range1.frame >= range2.end) return false\n\n    return range1.end > range2.frame\n  }\n\n  intersectsTime(time : Time) : boolean {\n    const [time1, scaledTime] = timeEqualizeRates(this, time)\n    const scaledRange = <TimeRange> time1\n    return scaledTime.frame >= scaledRange.frame && scaledTime.frame < scaledRange.end\n\n  }\n\n  minEndTime(endTime : Time) : TimeRange {\n    const [range, time] = <TimeRange[]> timeEqualizeRates(this, endTime)\n    range.frames = Math.min(range.frames, time.frame)\n    return range\n  }\n\n  get times(): Time[] {\n    const { frames, frame, fps } = this\n    return Array.from({ length: frames + 1 }, (_, i) => Time.fromArgs(frame + i, fps))\n  }\n\n  withFrame(frame : number) : TimeRange {\n    const range = this.copy\n    range.frame = frame\n    return range\n  }\n\n  withFrames(frames : number) : TimeRange {\n    const range = this.copy\n    range.frames = frames\n    return range\n  }\n\n  static fromArgs(frame = 0, fps = 1, frames = 1) : TimeRange {\n    return new TimeRange(frame, fps, frames)\n  }\n\n  static fromSeconds(start = 0, duration = 1) : TimeRange {\n    return this.fromArgs(start, 1, duration)\n  }\n\n  static fromTime(time : Time, frames = 1) : TimeRange {\n    return this.fromArgs(time.frame, time.fps, frames)\n  }\n\n  static fromTimes(startTime : Time, endTime : Time) : TimeRange {\n    const [time1, time2] = <TimeRange[]> timeEqualizeRates(startTime, endTime)\n    if (time2.frame <= time1.frame) throw Errors.argument\n\n    const frames = time2.frame - time1.frame\n    return this.fromArgs(time1.frame, time1.fps, frames)\n  }\n}\n\nexport { TimeRange }\n","import { TrackType } from \"../Setup/Enums\"\n\nclass TrackRange {\n  constructor(first = 0, last = -1, type? : TrackType) {\n    this.first = first\n    this.last = last\n    this.type = type\n  }\n\n  get count(): number { return 1 + this.last - this.first }\n\n  last = -1\n\n  get relative(): boolean { return this.last < 0 }\n\n  equals(trackRange: TrackRange): boolean {\n    return this.last === trackRange.last && this.first === trackRange.first\n  }\n\n  first = 0\n\n  get tracks(): number[] {\n    if (this.last < 0) return []\n\n    return Array(this.last - this.first + 1).fill(0).map((_, idx) => this.first + idx)\n  }\n\n  toString(): string { return `[${this.type || 'av'}-${this.first}-${this.last}]` }\n\n  type?: TrackType\n\n  withEnd(last: number): TrackRange {\n    return TrackRange.fromArgs(this.first, last, this.type)\n  }\n\n  withMax(max: number): TrackRange { return this.withEnd(max + this.last) }\n\n  static ofType(type: TrackType, last = -1, first = 0): TrackRange {\n    return this.fromArgs(first, last, type)\n  }\n  static fromArgs(first = 0, last = -1, type?: TrackType): TrackRange {\n    return new TrackRange(first, last, type)\n  }\n}\n\nexport { TrackRange }\n","\nconst urlAbsolute = (url: string): string => (new URL(url, document.baseURI)).href\n\nconst Url = { absolute: urlAbsolute }\n\nexport { Url, urlAbsolute }\n","import { Mash } from \"../../Mash\"\nimport { Actions } from \"../Actions\"\nimport { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Effect } from \"../../Mash/Effect/Effect\"\n\ninterface ActionObject {\n  actions : Actions\n  mash : Mash\n  redoSelectedClips : Clip[]\n  redoSelectedEffects : Effect[]\n  type : string\n  undoSelectedClips : Clip[]\n  undoSelectedEffects : Effect[]\n  redoAction() : void\n  undoAction() : void\n}\n\nclass Action {\n  constructor(object : ActionObject) {\n    const {\n      actions,\n      mash,\n      redoSelectedClips,\n      redoSelectedEffects,\n      type,\n      undoSelectedClips,\n      undoSelectedEffects,\n    } = object\n    this.actions = actions\n    this.type = type\n    this.mash = mash\n    this.undoSelectedClips = undoSelectedClips\n    this.redoSelectedClips = redoSelectedClips\n    this.undoSelectedEffects = undoSelectedEffects\n    this.redoSelectedEffects = redoSelectedEffects\n  }\n\n  actions : Actions\n\n  mash : Mash\n\n  undoSelectedClips : Clip[]\n\n  redoSelectedClips : Clip[]\n\n  undoSelectedEffects : Effect[]\n\n  redoSelectedEffects : Effect[]\n\n  done =  false\n\n  get selectedClips() : Clip[] {\n    if (this.done) return this.redoSelectedClips\n\n    return this.undoSelectedClips\n  }\n\n  get selectedEffects() : Effect[] {\n    if (this.done) return this.redoSelectedEffects\n\n    return this.undoSelectedEffects\n  }\n\n  redo() : void {\n    this.redoAction()\n    this.done = true\n  }\n\n  redoAction() : void {\n    throw Errors.internal + 'redoAction'\n  }\n\n  type : string\n\n  undo() : void {\n    this.undoAction()\n    this.done = false\n  }\n\n  undoAction() : void {\n    throw Errors.internal + 'undoAction'\n  }\n}\n\nexport { Action, ActionObject }\n","import { TrackType } from \"../../Setup/Enums\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface AddTrackActionObject extends ActionObject {\n  trackType : TrackType\n}\nclass AddTrackAction extends Action {\n  constructor(object : AddTrackActionObject) {\n    super(object)\n    const { trackType } = object\n    this.trackType = trackType\n  }\n\n  trackType : TrackType\n\n  redoAction() : void { this.mash.addTrack(this.trackType) }\n\n  undoAction() : void { this.mash.removeTrack(this.trackType) }\n}\n\nexport { AddTrackAction, AddTrackActionObject }\n","import { Effect } from \"../../Mash/Effect/Effect\"\nimport { Mash } from \"../../Mash/Mash\"\nimport { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { SelectionValue } from \"../../declarations\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface ChangeActionObject extends ActionObject {\n  property : string\n  redoValue : SelectionValue\n  target : Mash | Clip | Effect\n  undoValue : SelectionValue\n}\n\nclass ChangeAction extends Action {\n  constructor(object : ChangeActionObject) {\n    super(object)\n    const { property, redoValue, target, undoValue } = object\n    this.property = property\n    this.redoValue = redoValue\n    this.target = target\n    this.undoValue = undoValue\n  }\n\n  property : string\n\n  redoValue : SelectionValue\n\n  target : Mash | Clip | Effect\n\n  undoValue : SelectionValue\n\n  get redoValueNumeric() : number { return Number(this.redoValue) }\n\n  get undoValueNumeric() : number { return Number(this.undoValue) }\n\n  redoAction() : void {\n    this.target.setValue(this.property, this.redoValue)\n  }\n\n  undoAction() : void {\n    this.target.setValue(this.property, this.undoValue)\n  }\n\n  updateAction(value : SelectionValue) : void {\n    this.redoValue = value\n    this.redo()\n  }\n}\n\nexport { ChangeAction, ChangeActionObject }\n","import { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface FreezeActionObject extends ActionObject {\n  frames : number\n  freezeClip : Clip\n  frozenClip : Clip\n  index : number\n  insertClip : Clip\n  trackClips : Clip[]\n}\n\nclass FreezeAction extends Action {\n  constructor(object : FreezeActionObject) {\n    super(object)\n    const { frames,freezeClip, frozenClip, index, insertClip, trackClips } = object\n    this.frames = frames\n    this.freezeClip = freezeClip\n    this.frozenClip = frozenClip\n    this.index = index\n    this.insertClip = insertClip\n    this.trackClips = trackClips\n\n  }\n  frames : number\n\n  index : number\n\n  trackClips : Clip[]\n\n  insertClip : Clip\n\n  freezeClip : Clip\n\n  frozenClip : Clip\n\n  redoAction() : void {\n    this.trackClips.splice(this.index, 0, this.insertClip, this.frozenClip)\n    this.freezeClip.frames -= this.frames\n  }\n\n  undoAction() : void {\n    this.freezeClip.frames += this.frames\n    this.trackClips.splice(this.index, 2)\n  }\n}\n\nexport { FreezeAction }\n","import { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { ChangeAction, ChangeActionObject } from \"./ChangeAction\"\n\nclass ChangeFramesAction extends ChangeAction {\n  constructor(object : ChangeActionObject) {\n    super(object)\n    this.clip = <Clip> this.target\n  }\n\n  clip : Clip\n\n  redoAction() : void {\n    this.mash.changeClipFrames(this.clip, this.redoValueNumeric)\n  }\n\n  undoAction() : void {\n    this.mash.changeClipFrames(this.clip, this.undoValueNumeric)\n  }\n}\n\nexport { ChangeFramesAction }\n","import { Audible } from \"../../Mash/Mixin/Audible/Audible\"\nimport { ChangeAction, ChangeActionObject } from \"./ChangeAction\"\n\ninterface ChangeTrimActionObject extends ChangeActionObject {\n  frames : number\n}\nclass ChangeTrimAction extends ChangeAction {\n  constructor(object : ChangeTrimActionObject) {\n    super(object)\n    const { frames, target } = object\n    this.frames = frames\n    this.audibleClip = <Audible> target\n  }\n  audibleClip : Audible\n\n  frames : number\n\n  redoAction() : void {\n    this.mash.changeClipTrimAndFrames(this.audibleClip, this.redoValueNumeric, this.frames)\n  }\n\n  undoAction() : void {\n    this.mash.changeClipTrimAndFrames(this.audibleClip, this.undoValueNumeric, this.frames)\n  }\n}\n\nexport { ChangeTrimAction }\n","import { Effect } from \"../../Mash/Effect/Effect\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface AddEffectActionObject extends ActionObject {\n  effect : Effect\n\n  effects : Effect[]\n\n  index : number\n}\nclass AddEffectAction extends Action {\n  constructor(object : AddEffectActionObject) {\n    super(object)\n    const { effect, effects, index } = object\n    this.effect = effect\n    this.effects = effects\n    this.index = index\n  }\n  effect : Effect\n\n  effects : Effect[]\n\n  index : number\n\n  redoAction() : void { this.effects.splice(this.index, 0, this.effect) }\n\n  undoAction() : void { this.effects.splice(this.index, 1) }\n}\n\nexport { AddEffectAction, AddEffectActionObject }\n","\nimport { Track } from \"../../Mash\"\nimport { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { AddTrackAction, AddTrackActionObject } from \"./AddTrackAction\"\n\ninterface AddClipToTrackActionObject extends AddTrackActionObject {\n  clip : Clip\n  createTracks : number\n  insertIndex : number\n  trackIndex : number\n}\n\nclass AddClipToTrackAction extends AddTrackAction {\n  constructor(object : AddClipToTrackActionObject) {\n    super(object)\n    const { clip, createTracks, insertIndex, trackIndex } = object\n    this.clip = clip\n    this.createTracks = createTracks\n    this.insertIndex = insertIndex\n    this.trackIndex = trackIndex\n  }\n\n  clip : Clip\n\n  createTracks : number\n\n  insertIndex : number\n\n  trackIndex : number\n\n  get clips() : Clip[] { return this.track.clips }\n\n  get track() : Track { return this.mash[this.trackType][this.trackIndex] }\n\n  redoAction() : void {\n    for (let i = 0; i < this.createTracks; i += 1) { super.redoAction() }\n    this.mash.addClipsToTrack([this.clip], this.trackIndex, this.insertIndex)\n  }\n\n  undoAction() : void {\n    this.mash.removeClipsFromTrack([this.clip])\n    for (let i = 0; i < this.createTracks; i += 1) { super.undoAction() }\n  }\n}\n\nexport { AddClipToTrackAction }\n","import { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface MoveClipsActionObject extends ActionObject {\n  clips : Clip[]\n  insertIndex : number\n  redoFrames? : number[]\n  trackIndex : number\n  undoFrames? : number[]\n  undoInsertIndex : number\n  undoTrackIndex : number\n}\nclass MoveClipsAction extends Action {\n  constructor(object : MoveClipsActionObject) {\n    super(object)\n    const {\n      clips,\n      insertIndex,\n      redoFrames,\n      trackIndex,\n      undoFrames,\n      undoInsertIndex,\n      undoTrackIndex\n    } = object\n    this.clips = clips\n    this.insertIndex = insertIndex\n    this.redoFrames = redoFrames\n    this.trackIndex = trackIndex\n    this.undoFrames = undoFrames\n    this.undoInsertIndex = undoInsertIndex\n    this.undoTrackIndex = undoTrackIndex\n  }\n\n  clips : Clip[]\n\n  insertIndex : number\n\n  trackIndex : number\n\n  undoTrackIndex : number\n\n  undoInsertIndex : number\n\n  undoFrames? : number[]\n\n  redoFrames? : number[]\n\n  addClips(trackIndex : number, insertIndex : number, frames?: number[]) : void {\n    this.mash.addClipsToTrack(this.clips, trackIndex, insertIndex, frames)\n  }\n\n  redoAction() : void {\n    this.addClips(this.trackIndex, this.insertIndex, this.redoFrames)\n  }\n\n  undoAction() : void {\n    this.addClips(this.undoTrackIndex, this.undoInsertIndex, this.undoFrames)\n  }\n}\nexport { MoveClipsAction }\n","import { Track } from \"../../Mash\"\nimport { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface RemoveClipsActionObject extends ActionObject {\n  clips : Clip[]\n  index : number\n  track : Track\n}\nclass RemoveClipsAction extends Action {\n  constructor(object : RemoveClipsActionObject) {\n    super(object)\n    const { clips, index, track } = object\n    this.clips = clips\n    this.index = index\n    this.track = track\n  }\n\n  track : Track\n\n  clips : Clip[]\n\n  index : number\n\n  get trackIndex() : number { return this.track.index }\n\n  redoAction() : void {\n    this.mash.removeClipsFromTrack(this.clips)\n  }\n\n  undoAction() : void {\n    this.mash.addClipsToTrack(this.clips, this.trackIndex, this.index)\n  }\n}\n\nexport { RemoveClipsAction }\n","import { Clip } from \"../../Mash/Mixin/Clip/Clip\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface SplitActionObject extends ActionObject {\n  index : number\n  insertClip : Clip\n  redoFrames : number\n  splitClip : Clip\n  trackClips : Clip[]\n  undoFrames : number\n}\n\nclass SplitAction extends Action {\n  constructor(object : SplitActionObject) {\n    super(object)\n    const { index, insertClip, redoFrames, splitClip, trackClips, undoFrames } = object\n    this.index = index\n    this.insertClip = insertClip\n    this.redoFrames = redoFrames\n    this.splitClip = splitClip\n    this.trackClips = trackClips\n    this.undoFrames = undoFrames\n  }\n\n  index : number\n\n  insertClip : Clip\n\n  redoFrames : number\n\n  splitClip : Clip\n\n  trackClips : Clip[]\n\n  undoFrames : number\n\n  redoAction() : void {\n    this.trackClips.splice(this.index, 0, this.insertClip)\n    this.splitClip.frames = this.redoFrames\n  }\n\n  undoAction() : void {\n    this.splitClip.frames = this.undoFrames\n    this.trackClips.splice(this.index, 1)\n  }\n}\n\nexport { SplitAction }\n","import { Effect } from \"../../Mash/Effect/Effect\"\nimport { Action, ActionObject } from \"./Action\"\n\ninterface MoveEffectsActionObject extends ActionObject {\n  effects : Effect[]\n  redoEffects : Effect[]\n  undoEffects : Effect[]\n}\nclass MoveEffectsAction extends Action {\n  constructor(object : MoveEffectsActionObject) {\n    super(object)\n    const { effects, redoEffects, undoEffects } = object\n    this.effects = effects\n    this.redoEffects = redoEffects\n    this.undoEffects = undoEffects\n  }\n\n  effects : Effect[]\n\n  redoEffects : Effect[]\n\n  undoEffects : Effect[]\n\n  redoAction() : void {\n    this.effects.splice(0, this.effects.length, ...this.redoEffects)\n  }\n\n  undoAction() : void {\n    this.effects.splice(0, this.effects.length, ...this.undoEffects)\n  }\n}\n\nexport { MoveEffectsAction }\n","import { Mash } from \"../../Mash\"\nimport { Action } from \"../Action\"\nimport { Is } from \"../../Utilities\";\n\ninterface ActionsObject {\n  mash : Mash\n}\n\nclass Actions  {\n\n  constructor(object : ActionsObject) {\n    const { mash } = object\n    this.mash = mash\n  }\n\n  get canRedo() : boolean { return this.index < this.instances.length - 1 }\n\n  get canSave() : boolean { return this.canUndo }\n\n  get canUndo() : boolean { return this.index > -1 }\n\n  get currentAction() : Action { return this.instances[this.index] }\n\n  get currentActionLast() : boolean { return this.canUndo && !this.canRedo }\n\n  destroy() : void {\n    this.index = -1\n    this.instances.splice(0, this.instances.length)\n  }\n\n  add(action : Action) : void {\n    const remove = this.instances.length - (this.index + 1)\n    if (Is.positive(remove)) this.instances.splice(this.index + 1, remove)\n\n    this.instances.push(action)\n  }\n\n  index = -1\n\n  instances : Action[] = []\n\n  mash : Mash\n\n  redo() : Action {\n    this.index += 1\n    const action = this.currentAction\n    action.redo()\n\n    return action\n  }\n\n  save() : void {\n    this.instances.splice(0, this.index + 1)\n    this.index = -1\n  }\n\n  undo() : Action {\n    const action = this.currentAction\n    this.index -= 1\n    action.undo()\n    return action\n  }\n}\n\nexport { Actions }\n","\nclass Input {\n\n}\n\nclass Output {\n\n}\n\nclass Job {\n  constructor() {\n\n  }\n\n  inputs : Input[] = []\n  outputs : Output[] = []\n}\n\nexport { Job }\n","import { AudibleSource } from \"../declarations\"\nimport { EventType } from \"../Setup/Enums\"\nimport { Errors } from \"../Setup/Errors\"\nimport { Time } from \"../Utilities/Time\"\n\nconst AudibleSampleRate = 44100\nconst AudibleChannels = 2\n\nexport class AudibleContext {\n  __context? : AudioContext\n\n  get context() : AudioContext {\n    if (!this.__context) {\n      const Klass = AudioContext || window.webkitAudioContext\n      if (!Klass) throw Errors.audibleContext\n\n      this.__context = new Klass()\n    }\n    return this.__context\n  }\n\n  createBuffer(seconds : number) : AudioBuffer {\n    const length = AudibleSampleRate * seconds\n    return this.context.createBuffer(AudibleChannels, length, AudibleSampleRate)\n  }\n\n  createBufferSource(buffer?: AudioBuffer): AudibleSource {\n    // console.trace(this.constructor.name, \"createBufferSource\")\n    const sourceNode = this.context.createBufferSource()\n    if (buffer) sourceNode.buffer = buffer\n    return sourceNode\n  }\n\n  createGain() : GainNode { return this.context.createGain() }\n\n  get currentTime() : number { return this.context.currentTime }\n\n  decode(buffer : ArrayBuffer) : Promise<AudioBuffer> {\n    return new Promise((resolve, reject) => (\n      this.context.decodeAudioData(\n        buffer,\n        audioData => resolve(audioData),\n        error => reject(error)\n      )\n    ))\n  }\n\n  get destination() : AudioDestinationNode { return this.context.destination }\n\n  emit(type: EventType): void { this.context.dispatchEvent(new CustomEvent(type)) }\n\n  get time() : Time { return Time.fromSeconds(this.currentTime) }\n}\n","import {\n  Context2D,\n  ContextData,\n  VisibleContextElement,\n  VisibleSource,\n  Point,\n  Rect,\n  Size,\n  TextStyle,\n} from \"../declarations\"\nimport { Errors } from \"../Setup/Errors\"\nimport { Is } from \"../Utilities/Is\"\nimport { Action } from \"../Editing/Action/Action\"\n\nconst $canvas = 'canvas'\nconst $2d = '2d'\nconst Point0 = { x: 0, y: 0 }\n\nclass VisibleContext {\n  constructor(object : { context2d? : Context2D } = {}) {\n    const { context2d } = object\n    // console.trace(\"VisibleContext\", \"constructor\", context2d)\n    if (context2d) this._context2d = context2d\n  }\n\n  get alpha() : number { return this.context2d.globalAlpha }\n\n  set alpha(value : number) { this.context2d.globalAlpha = value }\n\n  get canvas() : VisibleContextElement { return this.context2d.canvas }\n\n  set canvas(value: VisibleContextElement) {\n    const context2d = value.getContext(\"2d\")\n    if (!context2d) throw Errors.invalid.canvas\n    this.context2d = context2d\n  }\n\n  clear() : VisibleContext {\n    return this.clearSize(this.size)\n  }\n\n  clearSize(size : Size) : VisibleContext {\n    return this.clearRect({ ...Point0, ...size })\n  }\n\n  clearRect(rect : Rect) : VisibleContext {\n    const { x, y, width, height } = rect\n    this.context2d.clearRect(x, y, width, height)\n    return this\n  }\n\n  get composite() : string { return this.context2d.globalCompositeOperation }\n\n  set composite(value : string) { this.context2d.globalCompositeOperation = value }\n\n  private get context2d() : Context2D {\n    if (!this._context2d) {\n      // console.trace(this.constructor.name, \"get context2d creating canvas\")\n      const canvas = globalThis.document.createElement($canvas)\n      const context = canvas.getContext($2d)\n      if (!context) throw Errors.internal\n\n      this._context2d = context\n    }\n    return this._context2d\n  }\n\n  private set context2d(value : Context2D) {\n    // console.log(this.constructor.name, \"set context2d\", value)\n    this._context2d = value\n  }\n\n  get dataUrl() : string { return this.canvas.toDataURL() }\n\n  draw(source : VisibleSource) : VisibleContext {\n    return this.drawAtPoint(source, Point0)\n  }\n\n  drawAtPoint(source : VisibleSource, point: Point) : VisibleContext {\n    const { x, y } = point\n    this.context2d.drawImage(source, x, y)\n    return this\n  }\n\n  drawFill(fill : string) : VisibleContext {\n    return this.drawFillToSize(fill, this.size)\n  }\n\n  drawFillInRect(fill : string, rect : Rect) : VisibleContext {\n    const { x, y, width, height } = rect\n    const fillOriginal = this.fill\n    this.fill = fill\n    this.context2d.fillRect(x, y, width, height)\n    this.fill = fillOriginal\n    return this\n  }\n\n  drawFillToSize(fill : string, size : Size) : VisibleContext {\n    return this.drawFillInRect(fill, { ...Point0, ...size })\n  }\n\n  drawImageData(data : ImageData) : VisibleContext {\n    return this.drawImageDataAtPoint(data, Point0)\n  }\n\n  drawImageDataAtPoint(data : ImageData, point : Point) : VisibleContext {\n    const { x, y } = point\n    this.context2d.putImageData(data, x, y)\n    return this\n  }\n\n  drawInRect(source : VisibleSource, rect: Rect) : VisibleContext {\n    const { x, y, width, height } = rect\n    this.context2d.drawImage(source, x, y, width, height)\n    return this\n  }\n\n  drawInRectFromRect(source : VisibleSource, inRect: Rect, fromRect: Rect) : VisibleContext {\n    const { x: xIn, y: yIn, width: wIn, height: hIn } = inRect\n    const { x, y, width: w, height: h } = fromRect\n    const { width: sourceWidth, height: sourceHeight } = source\n    if (xIn + wIn > sourceWidth || yIn + hIn > sourceHeight) throw Errors.eval.sourceRect + JSON.stringify(inRect) + ' ' + sourceWidth + 'x' + sourceHeight\n\n    this.context2d.drawImage(source, xIn, yIn, wIn, hIn, x, y, w, h)\n    return this\n  }\n\n  drawInRectFromSize(source : VisibleSource, rect: Rect, size: Size) : VisibleContext {\n    return this.drawInRectFromRect(source, rect, { ...Point0, ...size })\n  }\n\n  drawInSizeFromSize(source : VisibleSource, inSize : Size, fromSize : Size) : VisibleContext {\n    const inRect = { ...Point0, ...inSize }\n    const fromRect = { ...Point0, ...fromSize }\n    return this.drawInRectFromRect(source, inRect, fromRect)\n  }\n\n  drawText(text: string, style : TextStyle) : VisibleContext {\n    return this.drawTextAtPoint(text, style, Point0)\n  }\n\n  drawTextAtPoint(text: string, style : TextStyle, point : Point) : VisibleContext {\n    const { x, y } = point\n    const { height, family, color, shadow, shadowPoint } = style\n\n    const fillOriginal = this.fill\n    const fontOriginal = this.font\n    const shadowOriginal = this.shadow\n    const shadowPointOriginal = this.shadowPoint\n\n    if (shadow) {\n      this.shadow = shadow\n      if (shadowPoint) this.shadowPoint = shadowPoint\n    }\n\n    this.font = `${height}px \"${family}\"`\n    this.fill = color\n    this.context2d.fillText(text, x, y + height)\n\n    this.font = fontOriginal\n    this.fill = fillOriginal\n    if (shadow) {\n      this.shadow = shadowOriginal\n      if (shadowPoint) this.shadowPoint = shadowPointOriginal\n    }\n    return this\n  }\n\n  drawToSize(source : VisibleSource, size: Size) : VisibleContext {\n    return this.drawInRect(source, { ...Point0, ...size })\n  }\n\n  drawWithAlpha(source : VisibleSource, alpha: number) : VisibleContext {\n    const original = this.alpha\n    this.alpha = alpha\n    const result = this.draw(source)\n    this.alpha = original\n    return result\n  }\n\n  drawWithComposite(source : VisibleSource, composite: string) : VisibleContext {\n    const original = this.composite\n    this.composite = composite\n    const result = this.draw(source)\n    this.composite = original\n    return result\n  }\n\n\n  get fill() : string { return String(this.context2d.fillStyle) }\n\n  set fill(value : string) { this.context2d.fillStyle = value }\n\n  get font() : string { return this.context2d.font }\n\n  set font(value : string) { this.context2d.font = value }\n\n  get imageData() : ContextData { return this.imageDataFromSize(this.size) }\n\n  get imageDataFresh() : ContextData {\n    const { width, height } = this.size\n    return this.context2d.createImageData(width, height)\n  }\n\n  imageDataFromRect(rect : Rect) : ContextData {\n    const { x, y, width, height } = rect\n    return this.context2d.getImageData(x, y, width, height)\n  }\n\n  imageDataFromSize(size : Size) : ContextData {\n    return this.imageDataFromRect({ ...Point0, ...size })\n  }\n\n  get drawingSource() : VisibleSource { return this.canvas }\n\n  get shadow() : string { return this.context2d.shadowColor }\n\n  set shadow(value : string) { this.context2d.shadowColor = value }\n\n  get shadowPoint() : Point {\n    return { x: this.context2d.shadowOffsetX, y: this.context2d.shadowOffsetY }\n  }\n\n  set shadowPoint(point : Point) {\n    this.context2d.shadowOffsetX = point.x\n    this.context2d.shadowOffsetY = point.y\n  }\n\n  get size() : Size { return { width: this.canvas.width, height: this.canvas.height } }\n\n  set size(value : Size) {\n    const { width, height } = value\n    if (Is.aboveZero(width)) this.canvas.width = width\n    if (Is.aboveZero(height)) this.canvas.height = height\n  }\n\n  private _context2d? : Context2D\n}\n\ninterface EventsDetail {\n  action? : Action\n}\ntype EventsType = CustomEvent<EventsDetail>\n\nexport { VisibleContext, EventsType, EventsDetail}\n","import { Size, Context2D, VisibleContextElement } from \"../declarations\"\nimport { AudibleContext } from \"./AudibleContext\"\nimport { VisibleContext } from \"./VisibleContext\"\n\nconst ContextTypes = [\"audible\", \"visible\"]\nconst ContextType = Object.fromEntries(ContextTypes.map(type => [type, type]))\n\nclass ContextFactory {\n  audible() : AudibleContext { return new AudibleContext() }\n\n  fromCanvas(canvas : VisibleContextElement) : VisibleContext {\n    const context = this.visible()\n    context.canvas = canvas\n    return context\n  }\n\n  fromContext2D(context2d : Context2D) : VisibleContext {\n    return new VisibleContext({ context2d })\n  }\n\n  toSize(size: Size) {\n    const context = this.visible()\n    context.size = size\n    return context\n  }\n\n  get type() { return ContextType }\n\n  get types() { return ContextTypes }\n\n  visible() { return new VisibleContext() }\n}\n\nconst ContextFactoryInstance = new ContextFactory()\n\nexport { ContextFactoryInstance as ContextFactory }\n","\nimport { Any } from \"../declarations\"\nimport { ContextFactory } from \"../Playing/ContextFactory\"\nimport { Errors } from \"../Setup/Errors\"\nimport { Is } from \"../Utilities/Is\"\n\nconst CacheKeyPrefix = 'cachekey'\n\nclass CacheClass {\n\n  add(url : string, value : Any) : void {\n    // console.log(this.constructor.name, \"add\", url, value.constructor.name)\n    const key = this.key(url)\n    this.cachedByKey.set(key, value)\n    this.urlsByKey.set(key, url)\n  }\n\n  audibleContext = ContextFactory.audible()\n\n  cached(url: string): boolean {\n    const object = this.getObject(url)\n    return object && ! (object instanceof Promise)\n  }\n\n  caching(url: string): boolean {\n    const object = this.getObject(url)\n    return object && object instanceof Promise\n  }\n\n  private cachedByKey = new Map<string, Any>()\n\n  flush(retainUrls: string[]) {\n    const keys = [...this.urlsByKey.keys()]\n    const retainKeys = retainUrls.map(url => this.key(url))\n    const removeKeys = keys.filter(key => !retainKeys.includes(key))\n    removeKeys.forEach(key => {\n      const url = this.urlsByKey.get(key)\n      if (url) this.remove(url)\n    })\n  }\n\n  get(url : string) : Any {\n    return this.cachedByKey.get(this.key(url))\n  }\n\n  getObject(url: string): Any {\n     if (!Is.populatedString(url)) throw Errors.argument + 'url'\n\n    const key = this.key(url)\n    if (!this.cachedByKey.has(key)) return\n\n     return this.cachedByKey.get(key)\n  }\n\n  key(url : string) : string {\n    if (!Is.populatedString(url)) throw Errors.argument + 'url'\n\n    return CacheKeyPrefix + url.replaceAll(/[^a-z0-9]/gi, '')\n  }\n\n  remove(url : string) : void {\n    // console.trace(this.constructor.name, \"remove\", url)\n    const key = this.key(url)\n    this.cachedByKey.delete(key)\n    this.urlsByKey.delete(key)\n  }\n\n  private urlsByKey = new Map<string, string>()\n\n  visibleContext = ContextFactory.visible()\n}\n\nconst Cache = new CacheClass()\nexport { Cache }\n","import { Any, LoadPromise } from \"../declarations\"\nimport { Cache } from \"./Cache\"\n\nclass Loader {\n  arrayBufferPromiseFromUrl(url: string): Promise<ArrayBuffer> {\n    return fetch(url).then(response => response.arrayBuffer())\n  }\n\n  arrayBufferPromiseFromBlob(blob: Blob):Promise<ArrayBuffer> {\n    return new Promise<ArrayBuffer>((resolve, reject) => {\n      const reader = new FileReader()\n      reader.onload = () => { resolve(<ArrayBuffer> reader.result) }\n      reader.onerror = reject\n      reader.readAsArrayBuffer(blob)\n    })\n  }\n\n  audioBufferPromiseFromArrayBuffer(arrayBuffer: ArrayBuffer): Promise<AudioBuffer> {\n    return Cache.audibleContext.decode(arrayBuffer)\n  }\n\n  async loadUrl(url : string) : LoadPromise {\n    if (Cache.cached(url)) {\n      const promiseOrCached = Cache.get(url)\n      if (promiseOrCached instanceof Promise) return promiseOrCached\n      return Promise.resolve()\n    }\n\n    const promise = this.requestUrl(url)\n    Cache.add(url, promise)\n    const processed = await promise\n    Cache.add(url, processed)\n    return processed\n  }\n\n  requestUrl(_url : string) : Promise<Any> { return Promise.resolve() }\n}\n\nexport { Loader }\n","import { Any, Constrained, JsonObject, LoadPromise, SelectionObject, SelectionValue, UnknownObject } from \"../../declarations\"\nimport { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definition } from \"../Definition/Definition\"\nimport { Time } from \"../../Utilities/Time\"\nimport { Id } from \"../../Utilities\"\n\ninterface InstanceObject extends UnknownObject {\n  definition? : Definition\n  id? : string\n  label? : string\n}\n\nclass InstanceBase {\n  [index: string]: unknown\n\n  constructor(...args : Any[]) {\n    const [object] = args\n    if (!Is.populatedObject(object)) throw Errors.invalid.object + 'InstanceBase'\n\n    const { definition, id, label } = <InstanceObject> object\n    if (!definition) throw Errors.invalid.definition.object + 'InstanceBase'\n\n    this.definition = definition\n    if (id && id !== definition.id) this._id = id\n    if (label && label !== definition.label) this._label = label\n  }\n\n  get copy() : Instance {\n    return this.definition.instanceFromObject(this.toJSON())\n  }\n\n  definition : Definition\n\n  get definitions() : Definition[] { return [this.definition] }\n\n  definitionTime(quantize : number, time : Time) : Time {\n    return time.scaleToFps(quantize) // may have fps higher than quantize and time.fps\n  }\n\n  protected _id? : string\n\n  get id() : string { return this._id || this.definition.id }\n\n  private _identifier?: string\n\n  get identifier() : string { return this._identifier ||= Id() }\n\n  protected _label? : string\n\n  get label() : string { return this._label || this.definition.label || this.id }\n\n  set label(value : string) { this._label = value }\n\n  get propertyNames() : string[] {\n    return this.definition.properties.map(property => property.name)\n  }\n\n  get propertyValues() : SelectionObject {\n    return Object.fromEntries(this.definition.properties.map(property => {\n      return [property.name, this.value(property.name)]\n    }))\n  }\n\n  setValue(key: string, value: SelectionValue): boolean {\n    const property = this.definition.property(key)\n    if (!property) throw Errors.property + key\n\n    const { type } = property\n    const coerced = type.coerce(value)\n    if (typeof coerced === 'undefined') {\n      console.error(this.constructor.name, \"setValue\", key, value)\n      return false\n    }\n\n    this[key] = coerced\n    return true\n  }\n\n  toJSON() : JsonObject { return this.propertyValues }\n\n  get type() : DefinitionType { return this.definition.type }\n\n  value(key : string) : SelectionValue {\n    const value = this[key]\n    if (typeof value === \"undefined\") throw Errors.property + key\n\n    return <SelectionValue> value\n  }\n}\n\ninterface Instance extends InstanceBase {}\n\ntype InstanceClass = Constrained<InstanceBase>\n\nexport { Instance, InstanceClass, InstanceBase, InstanceObject }\n","import { DataType, DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Any, Constrained, JsonObject, LoadPromise, SelectionValue, UnknownObject } from \"../../declarations\"\nimport { Instance, InstanceBase, InstanceObject } from \"../Instance/Instance\"\nimport { Property } from \"../../Setup/Property\"\nimport { Time, Times } from \"../../Utilities/Time\"\nimport { Is } from \"../../Utilities\"\n\ninterface DefinitionObject {\n  [index: string]: unknown\n  id? : string\n  type? : string\n  label? : string\n  icon? : string\n}\n\nclass DefinitionBase {\n  constructor(...args : Any[]) {\n    const [object] = args\n    const { id, label, icon } = <DefinitionObject> object\n    if (!(id && Is.populatedString(id))) throw Errors.invalid.definition.id + JSON.stringify(object)\n    this.id = id\n\n    this.label = label || id\n    if (icon) this.icon = icon\n\n    this.properties.push(new Property({ name: \"label\", type: DataType.String, value: \"\" }))\n  }\n\n  icon? : string\n\n  id : string\n\n  get instance() : Instance {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : InstanceObject) : Instance {\n    const instance = new InstanceBase({ ...this.instanceObject, ...object })\n    return instance\n  }\n\n  get instanceObject() : InstanceObject {\n    const object : UnknownObject = {}\n    object.definition = this\n    this.properties.forEach(property => {\n      object[property.name] = property.value\n    })\n    return object\n  }\n\n  label : string\n\n  loadDefinition(_quantize: number, _start : Time, _end? : Time) : LoadPromise | void { }\n\n  definitionUrls(_start: Time, _end?: Time): string[] { return [] }\n\n  properties : Property[] = []\n\n  get propertiesModular() : Property[] { return this.properties.filter(property => property.type.modular) }\n\n  property(name : string) : Property | undefined {\n    return this.properties.find(property => property.name === name)\n  }\n\n  retain = false\n\n  toJSON() : JsonObject {\n    const object : JsonObject = { id: this.id, type: this.type }\n    if (this.icon) object.icon = this.icon\n    if (this.label !== this.id) object.label = this.label\n    return object\n  }\n\n  type! : DefinitionType\n\n  unload(_times : Times[] = []) : void {}\n\n  value(name : string) : SelectionValue | undefined {\n    const property = this.property(name)\n    if (!property) return\n\n    return property.value\n  }\n}\n\ninterface Definition extends DefinitionBase {}\n\ntype DefinitionTimes = Map<Definition, Times[]>\n\ntype DefinitionClass = Constrained<DefinitionBase>\n\nexport { Definition, DefinitionClass, DefinitionBase, DefinitionObject, DefinitionTimes }\n","import { Is } from \"../../../Utilities/Is\"\nimport { Any, AudibleSource, JsonObject, StartOptions } from \"../../../declarations\"\nimport { ClipClass } from \"../Clip/Clip\"\nimport { AudibleClass, AudibleDefinition, AudibleObject } from \"./Audible\"\nimport { Default } from \"../../../Setup/Default\"\nimport { Cache } from \"../../../Loading/Cache\"\nimport { Time } from \"../../../Utilities/Time\"\n\nconst AudibleGainDelimiter = ','\n\nfunction AudibleMixin<T extends ClipClass>(Base: T) : AudibleClass & T {\n  return class extends Base {\n    constructor(...args : Any[]) {\n      super(...args)\n      const [object] = args\n      const { gain } = <AudibleObject> object\n\n      if (typeof gain !== \"undefined\") {\n        if (typeof gain === \"string\") {\n          if (gain.includes(AudibleGainDelimiter)){\n            const floats = gain.split(AudibleGainDelimiter).map(string => parseFloat(string))\n            const z = floats.length / 2\n            for (let i = 0; i < z; i += 1) {\n              this.gainPairs.push([floats[i * 2], floats[i * 2 + 1]])\n            }\n            this.gain = -1\n          } else this.gain = Number(gain)\n        } else this.gain = gain\n      }\n    }\n\n    audible = true\n\n    declare definition : AudibleDefinition\n\n    gain = Default.instance.audio.gain\n\n    gainPairs : number[][] = []\n\n\n    loadedAudible():AudibleSource | undefined {\n      return this.definition.loadedAudible()\n    }\n\n    get muted() : boolean {\n      if (this.gain === 0) return true\n      if (Is.positive(this.gain)) return false\n\n      return this.gainPairs === [[0, 0], [1, 0]]\n    }\n\n    startOptions(seconds: number, quantize: number): StartOptions {\n        const range = this.timeRange(quantize)\n\n        let start = seconds + range.seconds\n        let duration = range.lengthSeconds\n\n        const now = Cache.audibleContext.currentTime\n        if (now > start) {\n          const dif = now - start\n          start = now\n          duration -= dif\n        }\n        return { start, duration }\n    }\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      if (this.gain !== Default.instance.audio.gain) object.gain = this.gain\n      return object\n    }\n  }\n}\n\nexport { AudibleMixin }\n","import { Any, JsonObject, LoadPromise } from \"../../../declarations\"\nimport { TrackType } from \"../../../Setup/Enums\"\nimport { Time  } from \"../../../Utilities/Time\"\nimport { Is } from \"../../../Utilities/Is\"\nimport { TimeRange } from \"../../../Utilities/TimeRange\"\nimport { InstanceClass } from \"../../Instance\"\nimport { ClipClass, ClipObject, ClipDefinition } from \"./Clip\"\n\n\n\nfunction ClipMixin<T extends InstanceClass>(Base: T): ClipClass & T {\n  return class extends Base {\n    constructor(...args : Any[]) {\n      super(...args)\n      const [object] = args\n      const { frame, frames, track } = <ClipObject> object\n\n      if (typeof frame !== \"undefined\" && Is.positive(frame)) this.frame = frame\n      if (frames && Is.aboveZero(frames)) this.frames = frames\n      if (typeof track !== \"undefined\") this.track = track\n    }\n\n    audible = false\n\n    declare definition: ClipDefinition\n\n    definitionTime(quantize : number, time : Time) : Time {\n      const scaledTime = super.definitionTime(quantize, time)\n      const startTime = this.time(quantize).scale(scaledTime.fps)\n      const endTime = this.endTime(quantize).scale(scaledTime.fps)\n\n      const frame = Math.max(Math.min(scaledTime.frame, endTime.frame), startTime.frame)\n      return scaledTime.withFrame(frame - startTime.frame)\n    }\n\n    get endFrame() { return this.frame + this.frames }\n\n    endTime(quantize : number) : Time {\n      return Time.fromArgs(this.endFrame, quantize)\n    }\n\n    frame = 0\n\n    frames = -1\n\n    loadClip(quantize : number, start : Time, end? : Time) : LoadPromise | void {\n      const startTime = this.definitionTime(quantize, start)\n      const endTime = end ? this.definitionTime(quantize, end) : end\n      return this.definition.loadDefinition(quantize, startTime, endTime)\n    }\n\n    clipUrls(quantize : number, start : Time, end? : Time) : string[] {\n      const startTime = this.definitionTime(quantize, start)\n      const endTime = end ? this.definitionTime(quantize, end) : end\n      return this.definition.definitionUrls(startTime, endTime)\n    }\n\n    maxFrames(_quantize : number, _trim? : number) : number { return 0 }\n\n    time(quantize : number) : Time { return Time.fromArgs(this.frame, quantize) }\n\n    timeRange(quantize : number) : TimeRange {\n      return TimeRange.fromArgs(this.frame, quantize, this.frames)\n    }\n\n    timeRangeRelative(time : Time, quantize : number) : TimeRange {\n      const range = this.timeRange(quantize).scale(time.fps)\n      const frame = Math.max(0, time.frame - range.frame)\n      return range.withFrame(frame)\n    }\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      object.id = this.id\n      return object\n    }\n\n    track = -1\n\n    trackType = TrackType.Video\n\n    visible = false\n  }\n}\n\nexport { ClipMixin }\n","import { Any, JsonObject, StartOptions } from \"../../../declarations\"\nimport { Default } from \"../../../Setup/Default\"\nimport { Is } from \"../../../Utilities/Is\"\nimport { Time } from \"../../../Utilities/Time\"\nimport { AudibleClass } from \"../Audible/Audible\"\nimport { AudibleFileClass, AudibleFileDefinition, AudibleFileObject } from \"./AudibleFile\"\n\nimport { Cache } from \"../../../Loading/Cache\"\n\nfunction AudibleFileMixin<T extends AudibleClass>(Base: T): AudibleFileClass & T {\n  return class extends Base {\n    constructor(...args: Any[]) {\n      super(...args)\n      const [object] = args\n      const { loop, trim } = <AudibleFileObject>object\n\n      if (typeof trim !== \"undefined\" && Is.integer(trim)) this.trim = trim\n      if (typeof loop !== \"undefined\" && Is.integer(loop)) this.loop = loop\n    }\n\n    declare definition : AudibleFileDefinition\n\n    definitionTime(quantize : number, time : Time) : Time {\n      const scaledTime = super.definitionTime(quantize, time)\n      if (!Is.aboveZero(this.trim)) return scaledTime\n\n      const trimTime = this.trimTime(quantize).scale(scaledTime.fps)\n      return scaledTime.withFrame(scaledTime.frame + trimTime.frame)\n    }\n\n    loop = Default.instance.audio.loop\n\n    maxFrames(quantize : number, trim? : number) : number {\n      const space = trim ? trim : this.trim\n      return Math.floor(this.definition.duration * quantize) - space\n    }\n\n    startOptions(seconds: number, quantize: number): StartOptions {\n      const range = this.timeRange(quantize)\n\n      let offset = 0\n      let start = seconds + range.seconds\n      let duration = range.lengthSeconds\n\n      if (this.trim) {\n        range.frame = this.trim\n        offset = range.seconds\n      }\n      const now = Cache.audibleContext.currentTime\n      if (now > start) {\n        const dif = now - start\n        start = now\n        offset += dif\n        duration -= dif\n      }\n      return { start, offset, duration }\n    }\n\n    trim = Default.instance.audio.trim\n\n    trimTime(quantize: number): Time { return Time.fromArgs(this.trim, quantize) }\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      if (this.trim !== Default.instance.audio.trim) object.trim = this.trim\n      if (this.loop !== Default.instance.audio.loop) object.loop = this.loop\n      return object\n    }\n  }\n}\nexport { AudibleFileMixin }\n","import { TrackType } from \"../../Setup/Enums\"\nimport { AudioDefinition } from \"./Audio\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { AudibleMixin } from \"../Mixin/Audible/AudibleMixin\"\nimport { ClipMixin } from \"../Mixin/Clip/ClipMixin\"\nimport { AudibleFileMixin } from \"../Mixin/AudibleFile/AudibleFileMixin\"\n\nconst AudioWithClip = ClipMixin(InstanceBase)\nconst AudioWithAudible = AudibleMixin(AudioWithClip)\nconst AudioWithAudibleFile = AudibleFileMixin(AudioWithAudible)\nclass AudioClass extends AudioWithAudibleFile {\n  declare definition : AudioDefinition\n\n  trackType = TrackType.Audio\n}\n\n\nexport { AudioClass }\n","\nimport { Property } from \"../../../Setup/Property\"\nimport { Any, ObjectUnknown } from \"../../../declarations\"\nimport { DataType } from \"../../../Setup/Enums\"\nimport { DefinitionClass } from \"../../Definition/Definition\"\nimport { Default } from \"../../../Setup/Default\"\nimport { ClipDefinitionClass } from \"./Clip\"\nimport { Time } from \"../../../Utilities/Time\"\n\nconst ClipPropertyObjects = [\n  { name: \"frame\", type: DataType.Integer, value: 0 },\n  { name: \"frames\", type: DataType.Integer, value: -1 },\n  { name: \"track\", type: DataType.Integer, value: -1 },\n]\n\nfunction ClipDefinitionMixin<T extends DefinitionClass>(Base: T) : ClipDefinitionClass & T {\n  return class extends Base {\n    constructor(...args : Any[]) {\n      super(...args)\n      const properties = ClipPropertyObjects.map(object => new Property(object))\n      this.properties.push(...properties)\n    }\n\n    audible = false\n\n    // TODO: determine if this is needed!\n    // used by theme, image, frame, transition\n    private _duration? : number\n\n    get duration() : number {\n      if (!this._duration) {\n        const object = <ObjectUnknown> Default.definition\n        this._duration = Number(object[this.type].duration)\n      }\n      return this._duration\n    }\n\n    set duration(value : number) { this._duration = value }\n\n    frames(quantize: number): number {\n      return Time.fromSeconds(this.duration, quantize, 'floor').frame\n    }\n\n    streamable = false\n\n    visible = false\n  }\n}\n\nexport { ClipDefinitionMixin }\n","import { LoadAudioPromise } from \"../../declarations\"\nimport { LoadType} from \"../../Setup/Enums\"\nimport { Loader } from \"../../Loading/Loader\"\n\nclass AudioLoader extends Loader {\n  async requestUrl(url: string): LoadAudioPromise {\n    const promise: LoadAudioPromise = new Promise((resolve, reject) => {\n      this.arrayBufferPromiseFromUrl(url)\n        .then(arrayBuffer => this.audioBufferPromiseFromArrayBuffer(arrayBuffer))\n        .then(resolve)\n        .catch(reject)\n    })\n    return promise\n  }\n\n  type = LoadType.Audio\n}\n\nexport { AudioLoader }\n","import { LoadFontPromise } from \"../../declarations\"\nimport { LoadType } from \"../../Setup/Enums\"\nimport { Loader } from \"../../Loading/Loader\"\nimport { Cache } from \"../../Loading/Cache\"\n\nclass FontLoader extends Loader {\n  type = LoadType.Font\n\n  requestUrl(url: string): LoadFontPromise {\n    const promise : LoadFontPromise = new Promise((resolve, reject) => {\n      console.debug(this.constructor.name, \"requestUrl\", url)\n      const family = Cache.key(url)\n      this.arrayBufferPromiseFromUrl(url)\n        .then(buffer => {\n          const face = new FontFace(family, buffer)\n          return face.load()\n        }).then(face => {\n          document.fonts.add(face)\n          resolve(face)\n        }).catch(reason => reject(reason))\n    })\n    return promise\n  }\n}\n\nexport { FontLoader }\n","import { LoadImagePromise } from \"../../declarations\"\nimport { LoadType } from \"../../Setup/Enums\"\nimport { Loader } from \"../../Loading/Loader\"\n\nclass ImageLoader extends Loader {\n  type = LoadType.Image\n\n  requestUrl(url : string) : LoadImagePromise {\n    const image = new Image()\n    image.crossOrigin = \"Anonymous\"\n    image.src = url\n    return image.decode().then(() => Promise.resolve(image))\n  }\n}\n\nexport { ImageLoader }\n","import { LoadedVideo, LoadVideoPromise } from \"../../declarations\"\nimport { LoadType } from \"../../Setup/Enums\"\nimport { Loader } from \"../../Loading/Loader\"\n\nclass VideoLoader extends Loader {\n  requestUrl(url: string): LoadVideoPromise {\n    const promise: LoadVideoPromise = new Promise((resolve, reject) => {\n      return this.videoPromiseFromUrl(url).then(video => {\n        return this.arrayBufferPromiseFromUrl(url).then(arrayBuffer => {\n          return this.audioBufferPromiseFromArrayBuffer(arrayBuffer).then(audioBuffer => {\n            resolve({ video, audio: audioBuffer, sequence: [] })\n          })\n        })\n      })\n      .catch(reject)\n    })\n    return promise\n  }\n\n  type = LoadType.Video\n\n  videoPromiseFromUrl(url: string): Promise<LoadedVideo> {\n    return new Promise<LoadedVideo>((resolve, reject) => {\n      const video = this.videoFromUrl(url)\n\n      video.ondurationchange = () => {\n        video.ondurationchange = null\n        video.width = video.videoWidth\n        video.height = video.videoHeight\n        // console.debug(this.constructor.name, \"videoPromiseFromUrl\", 'ondurationchange', video.width, video.height)\n        resolve(video)\n      }\n      video.onerror = reject\n      video.load()\n    })\n  }\n\n  videoFromUrl(url: string): HTMLVideoElement {\n    const video = document.createElement('video')\n    video.crossOrigin = 'anonymous'\n    video.src = url\n    return video\n  }\n}\n\nexport { VideoLoader }\n","import { Loader } from \"./Loader\"\nimport { AudioLoader } from \"../Mash/Audio/AudioLoader\"\nimport { FontLoader } from \"../Mash/Font/FontLoader\"\nimport { ImageLoader } from \"../Mash/Image/ImageLoader\"\nimport { VideoLoader } from \"../Mash/Video/VideoLoader\"\nimport { Capitalize } from \"../Utilities/Capitalize\"\n\ntype LoaderClassType = typeof Loader\n\nconst classes : {[index : string] : LoaderClassType } = {\n  Audio: AudioLoader,\n  Font: FontLoader,\n  Image: ImageLoader,\n  Video: VideoLoader,\n}\n\nclass LoaderClass {\n  audio() { return new classes.Audio() }\n\n  font() { return new classes.Font() }\n\n  image() { return new classes.Image() }\n\n  install(type : string, loader : LoaderClassType) {\n    classes[Capitalize(type)] = loader\n  }\n\n  video() { return new classes.Video()}\n}\n\nconst LoaderFactory = new LoaderClass()\n\nexport { LoaderFactory }\n","import { Any, JsonObject, LoadPromise, AudibleSource, LoadedAudio } from \"../../../declarations\"\nimport { DataType } from \"../../../Setup/Enums\"\nimport { Errors } from \"../../../Setup/Errors\"\nimport { AudibleDefinitionClass, AudibleDefinitionObject } from \"./Audible\"\nimport { ClipDefinitionClass } from \"../Clip/Clip\"\nimport { Property } from \"../../../Setup/Property\"\nimport { Time, Times } from \"../../../Utilities/Time\"\nimport { Cache } from \"../../../Loading/Cache\"\nimport { LoaderFactory } from \"../../../Loading/LoaderFactory\"\nimport { urlAbsolute } from \"../../../Utilities/Url\"\n\nfunction AudibleDefinitionMixin<T extends ClipDefinitionClass>(Base: T) : AudibleDefinitionClass & T {\n  return class extends Base {\n    constructor(...args: Any[]) {\n      super(...args)\n      const [object] = args\n      const { stream, url, audio, source, waveform } = <AudibleDefinitionObject>object\n\n      const urlAudible = audio || url || source || \"\"\n      if (!urlAudible) throw Errors.invalid.definition.audio\n\n      this.urlAudible = urlAudible\n\n      if (stream) this.stream = true\n      if (source) this.source = source\n      if (waveform) this.waveform = waveform\n\n      this.properties.push(new Property({ name: \"gain\", type: DataType.Number, value: 1.0 }))\n    }\n\n    get absoluteUrl(): string { return urlAbsolute(this.urlAudible) }\n\n    audible = true\n\n    loadDefinition(_quantize: number, _start: Time, end?: Time): LoadPromise | void {\n      if (!end) return\n\n      const url = this.absoluteUrl\n      if (Cache.cached(url)) return\n\n      if (Cache.caching(url)) return Cache.get(url)\n\n      return LoaderFactory.audio().loadUrl(url)\n    }\n\n    definitionUrls() : string[] { return [this.absoluteUrl] }\n\n    loadedAudible(): AudibleSource | undefined {\n\n      const cached: LoadPromise | LoadedAudio | undefined = Cache.get(this.absoluteUrl)\n      if (!cached || cached instanceof Promise) return\n\n      console.debug(this.constructor.name, \"loadedAudible\", cached.constructor.name)\n      return Cache.audibleContext.createBufferSource(cached)\n    }\n\n    loops = false\n\n    source? : string\n\n    stream = false\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      object.audio = this.urlAudible\n      if (this.source) object.source = this.source\n      if (this.waveform) object.waveform = this.waveform\n      return object\n    }\n\n    unload(times : Times[] = []) : void {\n      super.unload(times)\n      if (times.length && times.some(maybePair => maybePair.length === 2)) {\n        return // don't unload if any times indicate audio needed\n      }\n      if (!Cache.cached(this.absoluteUrl)) return\n\n      Cache.remove(this.absoluteUrl)\n    }\n\n    urlAudible : string\n\n    waveform? : string\n  }\n}\n\nexport { AudibleDefinitionMixin }\n","import { DataType } from \"../../../Setup/Enums\"\nimport { Any, JsonObject } from \"../../../declarations\"\nimport { Errors } from \"../../../Setup/Errors\"\nimport { AudibleFileDefinitionClass, AudibleFileDefinitionObject } from \"./AudibleFile\"\nimport { Property } from \"../../../Setup/Property\"\nimport { AudibleDefinitionClass } from \"../Audible/Audible\"\n\nfunction AudibleFileDefinitionMixin<T extends AudibleDefinitionClass>(Base: T) : AudibleFileDefinitionClass & T {\n  return class extends Base {\n    constructor(...args : Any[]) {\n      super(...args)\n      const [object] = args\n      const { loops, duration } = <AudibleFileDefinitionObject> object\n      if (!duration) throw Errors.invalid.definition.duration\n\n      this.duration = Number(duration)\n      if (loops) {\n        this.properties.push(new Property({ name: \"loop\", type: DataType.Integer, value: 1 }))\n        this.loops = true\n      }\n      this.properties.push(new Property({ name: \"trim\", type: DataType.Integer, value: 0 }))\n    }\n\n    duration : number\n\n    loops = false\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      object.duration = this.duration\n      if (this.loops) object.loops = true\n      return object\n    }\n  }\n}\n\nexport { AudibleFileDefinitionMixin }\n","import { Any } from \"../../declarations\"\nimport { DefinitionType, TrackType } from \"../../Setup/Enums\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { AudioClass } from \"./AudioInstance\"\nimport { Audio, AudioObject } from \"./Audio\"\nimport { ClipDefinitionMixin } from \"../Mixin/Clip/ClipDefinitionMixin\"\nimport { AudibleDefinitionMixin } from \"../Mixin/Audible/AudibleDefinitionMixin\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { AudibleFileDefinitionMixin } from \"../Mixin/AudibleFile/AudibleFileDefinitionMixin\"\n\nconst AudioDefinitionWithClip = ClipDefinitionMixin(DefinitionBase)\nconst AudioDefinitionWithAudible = AudibleDefinitionMixin(AudioDefinitionWithClip)\nconst AudioDefinitionWithAudibleFile = AudibleFileDefinitionMixin(AudioDefinitionWithAudible)\nclass AudioDefinitionClass extends AudioDefinitionWithAudibleFile {\n  constructor(...args : Any[]) {\n    super(...args)\n    Definitions.install(this)\n  }\n\n  get instance() : Audio { return this.instanceFromObject(this.instanceObject) }\n\n  instanceFromObject(object : AudioObject) : Audio {\n    // console.log(\"instanceFromObject\", object)\n    const audioObject = { ...this.instanceObject, ...object }\n    // console.log(\"instanceFromObject\", typeof audioObject.gain, audioObject.gain, object)\n    return new AudioClass(audioObject)\n  }\n\n  trackType = TrackType.Audio\n\n  type = DefinitionType.Audio\n}\n\nexport { AudioDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { AudioFactory } from \"../Audio/Audio\"\nimport { EffectFactory } from \"../Effect/Effect\"\nimport { FilterFactory } from \"../Filter/Filter\"\nimport { FontFactory } from \"../Font/Font\"\nimport { ImageFactory } from \"../Image/Image\"\nimport { MashFactory } from \"../Mash/Mash\"\nimport { MergerFactory } from \"../Merger/Merger\"\nimport { ScalerFactory } from \"../Scaler/Scaler\"\nimport { ThemeFactory } from \"../Theme/Theme\"\nimport { TransitionFactory } from \"../Transition/Transition\"\nimport { VideoFactory } from \"../Video/Video\"\nimport { MasherFactory } from \"../Masher/Masher\"\nimport { VideoStreamFactory } from \"../VideoStream/VideoStream\"\nimport { VideoSequenceFactory } from \"../VideoSequence/VideoSequence\"\n\ntype FactoryObject = {\n  [DefinitionType.Filter]?: FilterFactory\n  [DefinitionType.Audio]?: AudioFactory\n  [DefinitionType.Effect]?: EffectFactory\n  [DefinitionType.Font]?: FontFactory\n  [DefinitionType.Image]?: ImageFactory\n  [DefinitionType.Mash]?: MashFactory\n  [DefinitionType.Masher]?: MasherFactory\n  [DefinitionType.Merger]?: MergerFactory\n  [DefinitionType.Scaler]?: ScalerFactory\n  [DefinitionType.Theme]?: ThemeFactory\n  [DefinitionType.Transition]?: TransitionFactory\n  [DefinitionType.Video]?: VideoFactory\n  [DefinitionType.VideoSequence]?: VideoSequenceFactory\n  [DefinitionType.VideoStream]?: VideoStreamFactory\n}\n\nconst Factories : FactoryObject = {}\n\nexport { Factories, FactoryObject }\n","import { Errors } from \"../../Setup/Errors\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { AudioDefinitionClass } from \"./AudioDefinition\"\nimport { AudioDefinition, AudioDefinitionObject, Audio, AudioObject } from \"./Audio\"\nimport { Factories } from \"../Factories/Factories\"\nimport { Is } from \"../../Utilities/Is\"\nimport { DefinitionType } from \"../../Setup/Enums\"\n\n/**\n * @internal\n */\nconst audioDefinition = (object : AudioDefinitionObject) : AudioDefinition => {\n  const { id } = object\n  if (!id) throw Errors.id\n\n  if (Definitions.installed(id)) return <AudioDefinition> Definitions.fromId(id)\n\n  return new AudioDefinitionClass(object)\n}\n\n/**\n * @internal\n */\nconst audioDefinitionFromId = (id : string) : AudioDefinition => {\n  return audioDefinition({ id })\n}\n\n/**\n * @internal\n */\nconst audioInstance = (object : AudioObject) : Audio => {\n  const definition = audioDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\n/**\n * @internal\n */\nconst audioFromId = (id : string) : Audio => {\n  return audioInstance({ id })\n}\n\n/**\n * @internal\n */\nconst audioInitialize = () : void => {}\n\n/**\n * @internal\n */\nconst audioDefine = (object : AudioDefinitionObject) : AudioDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return audioDefinition(object)\n}\n\n/**\n * @internal\n */\nconst audioInstall = (object: AudioDefinitionObject): AudioDefinition => {\n  const instance = audioDefine(object)\n  instance.retain = true\n  return instance\n}\n\nconst AudioFactoryImplementation = {\n  define: audioDefine,\n  definition: audioDefinition,\n  definitionFromId: audioDefinitionFromId,\n  fromId: audioFromId,\n  initialize: audioInitialize,\n  install: audioInstall,\n  instance: audioInstance,\n}\n\nFactories[DefinitionType.Audio] = AudioFactoryImplementation\n\n\nexport {\n  audioDefine,\n  audioDefinition,\n  audioDefinitionFromId,\n  AudioFactoryImplementation,\n  audioFromId,\n  audioInstall,\n  audioInitialize,\n  audioInstance,\n}\n","import { InstanceBase } from \"../Instance/Instance\"\nimport { VisibleContext } from \"../../Playing\"\nimport { Any, JsonObject, ValueObject } from \"../../declarations\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Evaluator, Is } from \"../../Utilities\"\nimport { FilterDefinition } from \"./Filter\"\nimport { Parameter } from \"../../Setup/Parameter\"\nimport { FilterObject } from \"./Filter\"\n\nclass FilterClass extends InstanceBase {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n    if (!Is.populatedObject(object)) throw Errors.invalid.object + 'filter'\n\n    const { parameters } = <FilterObject> object\n    if (parameters) {\n      this.parameters.push(...parameters.map(parameter => new Parameter(parameter)))\n    }\n  }\n\n  declare definition : FilterDefinition\n\n  drawFilter(evaluator : Evaluator) : VisibleContext {\n    this.definition.scopeSet(evaluator)\n    const evaluated = this.evaluated(evaluator)\n    console.log(this.constructor.name, \"drawFilter\", evaluated)\n    return this.definition.draw(evaluator, evaluated)\n  }\n\n  evaluated(evaluator : Evaluator) : ValueObject {\n    const evaluated : ValueObject = {}\n    const parameters = [...this.parameters]\n    // console.log(this.constructor.name, \"evaluated\", this.id, parameters.map(p => p.name))\n    this.definition.parameters.forEach(parameter => {\n      if (parameters.find(p => p.name === parameter.name)) return\n\n      // console.log(this.constructor.name, \"evaluated\", this.id, \"adding\", parameter.name)\n      parameters.push(parameter)\n    })\n\n    if (!Is.populatedArray(parameters)) return evaluated\n\n    parameters.forEach(parameter => {\n      const { name, value } = parameter\n      if (!Is.populatedString(name)) return\n\n      const evaluatedValue = evaluator.evaluate(value)\n      evaluated[name] = evaluatedValue\n      evaluator.set(name, evaluatedValue)\n      return `${name}=>${evaluatedValue}`\n    })\n    return evaluated\n  }\n\n  parameters : Parameter[] = []\n\n  toJSON() : JsonObject {\n    const object : JsonObject = { id: this.id }\n    if (this.parameters.length) object.parameters = this.parameters\n    return object\n  }\n}\n\nexport { FilterClass }\n","import { Any, ValueObject } from \"../../declarations\"\nimport { Parameter } from \"../../Setup/Parameter\"\nimport { Evaluator } from \"../../Utilities/Evaluator\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { VisibleContext } from \"../../Playing\"\nimport { Filter, FilterObject } from \"./Filter\"\nimport { FilterClass } from \"./FilterInstance\"\nimport { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Definitions } from \"../Definitions/Definitions\"\n\n\nclass FilterDefinitionClass extends DefinitionBase {\n  constructor(...args : Any[]) {\n    super(...args)\n    Definitions.install(this)\n  }\n\n  draw(_evaluator : Evaluator, _evaluated : ValueObject) : VisibleContext {\n    throw Errors.unimplemented\n  }\n\n  get instance() : Filter {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : FilterObject) : Filter {\n    const instance = new FilterClass({ ...this.instanceObject, ...object })\n    return instance\n  }\n\n  parameters : Parameter[] = []\n\n  retain = true\n\n  scopeSet(_evaluator : Evaluator) : void {}\n\n  type = DefinitionType.Filter\n}\n\nexport { FilterDefinitionClass }\n","import { Evaluator } from \"../../../Utilities\"\nimport { Errors } from \"../../../Setup/Errors\"\nimport { DataType } from \"../../../Setup/Enums\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\nimport { VisibleContext } from \"../../../Playing\"\nimport { Types } from \"../../Types\"\n\nclass BlendFilter extends FilterDefinitionClass {\n\n  // eslint-disable-next-line camelcase\n  draw(evaluator : Evaluator, evaluated : { all_mode : string }) : VisibleContext {\n    const { context, mergeContext } = evaluator\n    if (typeof mergeContext === \"undefined\") throw Errors.internal + 'BlendFilter mergeContext'\n\n    const modes = Types.propertyType(DataType.Mode).values\n    if (typeof modes === \"undefined\") throw Errors.unknown.mode\n\n    const mode = modes.find(object => object.id === evaluated.all_mode)\n    if (typeof mode === \"undefined\") throw Errors.unknown.mode\n\n    const { identifier } = mode\n\n    mergeContext.drawWithComposite(context.drawingSource, identifier)\n    return mergeContext\n  }\n\n  // id = 'blend'\n}\n\nexport { BlendFilter }\n","import { Evaluator, Color, Pixel } from \"../../../Utilities\"\nimport { Pixels, ValueObject, Yuv } from \"../../../declarations\"\nimport { Parameter } from \"../../../Setup/Parameter\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\nimport { VisibleContext } from \"../../../Playing\"\n\nclass ChromaKeyFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : ValueObject) : VisibleContext {\n    const { context } = evaluator\n    const { width, height } = context.size\n    const { accurate } = evaluated\n    const similarity = Number(evaluated.similarity)\n    const blend = Number(evaluated.blend)\n\n    const color = String(evaluated.color)\n    const components = color.substr(4, color.length - 5).split(',')\n    const colors = components.map(f => Number(f))\n    const rgb = { r: colors[0], g: colors[1], b: colors[2] }\n    const yuv = Color.rgb2yuv(rgb)\n    const frame = context.imageData\n    const pixelsRgb = frame.data\n    const pixelsYuv = accurate ? (\n      this.yuvsFromPixelsAccurate(pixelsRgb, width, height) // slow!\n    ) : this.yuvsFromPixels(pixelsRgb)\n\n    let offset = 0\n\n    pixelsYuv.reverse().forEach(matrix => {\n      pixelsRgb[offset + 3] = Color.yuvBlend(matrix, yuv, similarity, blend)\n      offset += 4\n    })\n    context.drawImageData(frame)\n    return context\n  }\n\n  // id = 'chromakey'\n\n  parameters = [\n    new Parameter({ name: \"color\", value: \"color\" }),\n    new Parameter({ name: \"similarity\", value: \"similarity\" }),\n    new Parameter({ name: \"blend\", value: \"blend\" }),\n  ]\n\n  yuvsFromPixels(pixels : Pixels) : Yuv[][] {\n    const array = []\n    for (let index = pixels.length / 4 - 1; index > 0; index -= 1) {\n      array.push([Color.rgb2yuv(Pixel.rgbaAtIndex(index * 4, pixels))])\n    }\n    return array\n  }\n\n  yuvsFromPixelsAccurate(pixels : Pixels, width : number, height : number) : Yuv[][] {\n    const array = []\n    for (let index = pixels.length / 4 - 1; index > 0; index -= 1) {\n      const size = { width, height }\n      array.push(Pixel.neighboringRgbas(index * 4, pixels, size).map(rgb => Color.rgb2yuv(rgb)))\n    }\n    return array\n  }\n}\n\nexport { ChromaKeyFilter }\n","import { VisibleContext } from \"../../../Playing\"\nimport { Parameter } from \"../../../Setup/Parameter\"\nimport { Evaluator, isPopulatedString, Pixel } from \"../../../Utilities\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nclass ColorFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : { color : string }) : VisibleContext {\n    const { context } = evaluator\n    const { color } = evaluated\n    if (!isPopulatedString(color)) return context\n\n    context.drawFill(Pixel.color(color))\n    return context\n  }\n\n  // id = 'color'\n\n  parameters = [\n    new Parameter({ name: \"color\", value: \"color\" }),\n    new Parameter({ name: \"size\", value: \"mm_dimensions\" }),\n    new Parameter({ name: \"duration\", value: \"mm_duration\" }),\n    new Parameter({ name: \"rate\", value: \"mm_fps\" }),\n  ]\n}\n\nexport { ColorFilter }\n","import { VisibleContext } from \"../../../Playing\"\nimport { ValueObject } from \"../../../declarations\"\nimport { Evaluator } from \"../../../Utilities\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nclass ColorChannelMixerFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : ValueObject) : VisibleContext {\n    const map = Object.fromEntries(Object.entries(evaluated).map(entry => {\n      const [key, value] = entry\n      return [key, Number(value)]\n    }))\n    const { context } = evaluator\n    const rgbas = 'rgba'.split('')\n    rgbas.forEach(first => {\n      rgbas.forEach(second => {\n        const key = `${first}${second}`\n        if (map[key] === null) map[key] = first === second ? 1.0 : 0.0\n      })\n    })\n    const { imageData } = context\n    const { data } = imageData\n    data.forEach((r, i) => {\n      const g = data[i + 1]\n      const b = data[i + 2]\n      const a = data[i + 3]\n      data[i] = r * map.rr + g * map.rg + b * map.rb + a * map.ra\n      data[i + 1] = r * map.gr + g * map.gg + b * map.gb + a * map.ga\n      data[i + 2] = r * map.br + g * map.bg + b * map.bb + a * map.ba\n      data[i + 3] = r * map.ar + g * map.ag + b * map.ab + a * map.aa\n    })\n    context.drawImageData(imageData)\n    return context\n  }\n\n  // id = 'colorchannelmixer'\n\n}\n\nexport { ColorChannelMixerFilter }\n","import { VisibleContext } from \"../../../Playing\"\nimport { UnknownObject, ValueObject } from \"../../../declarations\"\nimport { Evaluator } from \"../../../Utilities/Evaluator\"\nimport { pixelNeighboringRgbas } from \"../../../Utilities/Pixel\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nconst RBGA = 'rgba'\n\nconst parse = (evaluated : ValueObject) => {\n  const result : Record<string, UnknownObject> = { bias: {}, rdiv: {}, matrix: {} }\n  RBGA.split('').forEach((channel, index) => {\n    const matrixString = <string> evaluated[`${index}m`]\n    const matrix = matrixString.split(' ').map((i : string) => parseInt(i))\n    result.matrix[channel] = matrix\n    result.rdiv[channel] = evaluated[`${index}rdiv`] || 1\n    if (String(result.rdiv[channel]).includes('/')) {\n      const array = String(result.rdiv[channel]).split('/')\n      result.rdiv[channel] = parseFloat(array[0]) / parseFloat(array[1])\n    } else result.rdiv[channel] = parseFloat(String(result.rdiv[channel]))\n    result.bias[channel] = evaluated[`${index}bias`] || 0\n  })\n  // console.log(ConvolutionFilter.name, \"parse\", evaluated, result)\n  return result\n}\n\nclass ConvolutionFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : ValueObject) : VisibleContext {\n    const options = parse(evaluated)\n    const { context } = evaluator\n    const { size } = context\n    const { width, height } = size\n    const input = context.imageData\n    // TODO: figure out if we actually need fresh data??\n    const output = context.imageDataFresh\n    const inputData = input.data\n    const outputData = output.data\n    const area = width * height\n    for (let pixel = 0; pixel < area; pixel += 1) {\n      const rgbas = pixelNeighboringRgbas(pixel, inputData, size)\n      RBGA.split('').forEach((channel, index) => {\n        const rdiv = <number> options.rdiv[channel]\n        const matrix = <number[]> options.matrix[channel]\n        const bias = <number> options.bias[channel]\n        let sum = 0\n        for (let y = 0; y < 9; y += 1) sum += rgbas[y][channel] * matrix[y]\n\n        sum = Math.floor(sum * rdiv + bias + 0.5)\n        outputData[pixel * 4 + index] = sum\n      })\n    }\n    context.drawImageData(output)\n    return context\n  }\n\n  // id = 'convolution'\n\n}\n\nexport { ConvolutionFilter }\n","import { ContextFactory, VisibleContext } from \"../../../Playing\"\nimport { EvaluatedRect } from \"../../../declarations\"\nimport { Errors } from \"../../../Setup/Errors\"\nimport { Evaluator } from \"../../../Utilities/Evaluator\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nclass CropFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : EvaluatedRect) : VisibleContext {\n    const { context } = evaluator\n    const x = evaluated.x || 0\n    const y = evaluated.y || 0\n    const inSize = evaluator.inputSize\n    let width = evaluated.w || evaluated.out_w || 0\n    let height = evaluated.h || evaluated.out_h || 0\n    // console.log(this.constructor.name, width, height, evaluated)\n\n    if (width + height < 2) throw Errors.eval.outputSize\n\n    if (width === -1) width = inSize.width * (height / inSize.height)\n    if (height === -1) height = inSize.height * (width / inSize.width)\n\n    const fromSize = { width, height }\n    const inRect = { x, y, ...fromSize }\n    const drawing = ContextFactory.toSize(fromSize)\n    // console.log(this.constructor.name, \"draw\", inRect, fromSize)\n\n    drawing.drawInRectFromSize(context.drawingSource, inRect, fromSize)\n    return drawing\n  }\n\n  // id = 'crop'\n\n  scopeSet(evaluator : Evaluator) : void {\n    evaluator.setInputSize(evaluator.context.size)\n    evaluator.initialize(\"x\", '((in_w - out_w) / 2)')\n    evaluator.initialize(\"y\", '((in_h - out_h) / 2)')\n  }\n}\n\nexport { CropFilter }\n","import { VisibleContext } from \"../../../Playing\"\nimport { Evaluator, isPopulatedString, Pixel } from \"../../../Utilities\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\ninterface EvaluatedBox {\n  x? : number\n  y? : number\n  color? : string\n  width? : number\n  height? : number\n}\nclass DrawBoxFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : EvaluatedBox) : VisibleContext {\n    const { context } = evaluator\n    const color = isPopulatedString(evaluated.color) ? <string> evaluated.color : 'black'\n    const x = evaluated.x || 0\n    const y = evaluated.y || 0\n    const width = evaluated.width || context.size.width\n    const height = evaluated.height || context.size.height\n\n    context.drawFillInRect(Pixel.color(color), { x, y, width, height })\n    return context\n  }\n\n  // id = 'drawbox'\n\n}\n\nexport { DrawBoxFilter }\n","import { InstanceBase } from \"../Instance/Instance\"\nimport { FontDefinition } from \"./Font\"\n\nclass FontClass extends InstanceBase {\n  declare definition : FontDefinition\n}\n\nexport { FontClass }\n","import { Any, JsonObject, LoadPromise } from \"../../declarations\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { DefinitionType } from \"../../Setup/Enums\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { Font, FontDefinitionObject, FontObject } from \"./Font\"\nimport { FontClass } from \"./FontInstance\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Time } from \"../../Utilities/Time\"\nimport { LoaderFactory } from \"../../Loading/LoaderFactory\"\nimport { Cache } from \"../../Loading/Cache\"\nimport { urlAbsolute } from \"../../Utilities/Url\"\n\nclass FontDefinitionClass extends DefinitionBase {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n    const { source } = <FontDefinitionObject> object\n    if (!source) throw Errors.invalid.definition.source + JSON.stringify(object)\n\n    this.source = source\n    Definitions.install(this)\n  }\n  get absoluteUrl(): string { return urlAbsolute(this.source) }\n\n  get instance() : Font {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : FontObject) : Font {\n    return new FontClass({ ...this.instanceObject, ...object })\n  }\n\n  loadDefinition(): LoadPromise | void {\n    const url = this.absoluteUrl\n    if (Cache.cached(url)) return\n\n    if (Cache.caching(url)) return Cache.get(url)\n\n    return LoaderFactory.font().loadUrl(url)\n  }\n\n  definitionUrls(_start : Time, _end? : Time) : string[] {\n    return [urlAbsolute(this.source)]\n  }\n\n  loadedVisible() : Any { return Cache.get(urlAbsolute(this.source)) }\n\n  retain = true\n\n  source : string\n\n  toJSON() : JsonObject {\n    return { ...super.toJSON(), source: this.source }\n  }\n\n  type = DefinitionType.Font\n}\n\nexport { FontDefinitionClass }\n","import { Definitions } from \"../Definitions\"\nimport { DefinitionType } from \"../../Setup/Enums\"\nimport { FontDefinitionClass } from \"./FontDefinition\"\nimport { Font, FontDefinition, FontDefinitionObject, FontObject } from \"./Font\"\nimport { Factories } from \"../Factories\"\nimport { Is } from \"../../Utilities/Is\"\nimport fontDefaultJson from \"../../DefinitionObjects/font/default.json\"\n\nconst fontDefaultId = \"com.moviemasher.font.default\"\n\nconst fontDefinition = (object : FontDefinitionObject) : FontDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) ? id : fontDefaultId\n  if (!Definitions.installed(idString)) {\n    new FontDefinitionClass({ ...object, type: DefinitionType.Font, id: idString })\n  }\n  return <FontDefinition> Definitions.fromId(idString)\n}\nconst fontDefinitionFromId = (id : string) : FontDefinition => {\n  return fontDefinition({ id })\n}\n\nconst fontInstance = (object : FontObject) : Font => {\n  return fontDefinition(object).instanceFromObject(object)\n}\n\nconst fontFromId = (id : string) : Font => {\n  return fontInstance({ id })\n}\n\nconst fontInitialize = () : void => {\n  fontDefinition(fontDefaultJson)\n}\nconst fontDefine = (object : FontDefinitionObject) : FontDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) ? id : fontDefaultId\n  Definitions.uninstall(idString)\n  return fontDefinition(object)\n}\n\nconst FontFactoryImplementation = {\n  define: fontDefine,\n  install: fontDefine,\n  definition: fontDefinition,\n  definitionFromId: fontDefinitionFromId,\n  fromId: fontFromId,\n  initialize: fontInitialize,\n  instance: fontInstance,\n}\n\nFactories[DefinitionType.Font] = FontFactoryImplementation\n\nexport {\n  fontDefine,\n  fontDefine as fontInstall,\n  fontDefinition,\n  fontDefinitionFromId,\n  FontFactoryImplementation,\n  fontFromId,\n  fontInitialize,\n  fontInstance,\n}\n","import { Cache } from \"../../../Loading\"\nimport { Evaluator, Is } from \"../../../Utilities\"\nimport { Parameter } from \"../../../Setup/Parameter\"\nimport { ScalarValue, TextStyle, ValueObject } from \"../../../declarations\"\nimport { Errors } from \"../../../Setup/Errors\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\nimport { VisibleContext } from \"../../../Playing\"\nimport { fontDefinitionFromId } from \"../../Font/FontFactory\"\n\nconst mmFontFile = (id? : ScalarValue) : string => {\n  if (!Is.populatedString(id)) throw Errors.id\n\n  return fontDefinitionFromId(<string> id).absoluteUrl\n}\n\nconst mmTextFile = (text? : ScalarValue) : string => String(text)\n\nconst mmFontFamily = (id? : ScalarValue) : string => Cache.key(mmFontFile(id))\n\nclass DrawTextFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : ValueObject) : VisibleContext {\n    const { context } = evaluator\n    const fontface = String(evaluator.get(\"fontface\"))\n    const family = mmFontFamily(fontface)\n    const {\n      x, y, fontsize, fontcolor, text, textfile, shadowcolor, shadowx, shadowy\n    } = evaluated\n    if (!(fontsize && Is.aboveZero(fontsize))) throw Errors.eval.number + \" fontsize\"\n\n    const height = Number(fontsize)\n    const textStyle : TextStyle =  {\n      height,\n      family,\n      color: String(fontcolor || 'black'),\n      shadow: String(shadowcolor || \"\"),\n      shadowPoint: { x: Number(shadowx || 0), y: Number(shadowy || 0) },\n    }\n    const point = { x: Number(x || 0), y: Number(y || 0) }\n    const string = String(text || textfile)\n    context.drawTextAtPoint(string, textStyle, point)\n\n    return context\n  }\n\n  parameters = [\n    new Parameter({ name: \"fontcolor\", value: \"#000000\" }),\n    new Parameter({ name: \"shadowcolor\", value: \"#FFFFFF\" }),\n    new Parameter({ name: \"fontsize\", value: \"mm_vert(20)\" }),\n    new Parameter({ name: \"x\", value: \"0\" }),\n    new Parameter({ name: \"y\", value: \"0\" }),\n    new Parameter({ name: \"shadowx\", value: \"mm_horz(5)\" }),\n    new Parameter({ name: \"shadowy\", value: \"mm_vert(5)\" }),\n    new Parameter({ name: \"fontfile\", value: \"mmFontFile('com.moviemasher.font.default')\" }),\n    new Parameter({ name: \"textfile\", value: \"Hello World\" }),\n  ]\n\n  scopeSet(evaluator : Evaluator) : void {\n    evaluator.set(\"text_w\", 0) // width of the text to draw\n    evaluator.set(\"text_h\", 0) // height of the text to draw\n    evaluator.set(\"mmFontFamily\", mmFontFamily)\n    evaluator.set(\"mmTextFile\", mmTextFile)\n    evaluator.set(\"mmFontFile\", mmFontFile)\n\n    // support deprecated snake case\n    evaluator.set(\"mm_fontfamily\", mmFontFamily)\n    evaluator.set(\"mm_textfile\", mmTextFile)\n    evaluator.set(\"mm_fontfile\", mmFontFile)\n  }\n}\n\nexport { DrawTextFilter }\n","\nimport { ContextFactory, VisibleContext } from \"../../../Playing\"\nimport { Evaluator } from \"../../../Utilities\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nclass FadeFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator) : VisibleContext {\n    const { context } = evaluator\n    const drawing = ContextFactory.toSize(context.size)\n    const alpha = Number(evaluator.get('alpha') || evaluator.position)\n    const type = String(evaluator.get('type') || 'in')\n    const typedAlpha = type === 'in' ? alpha : 1.0 - alpha\n    drawing.drawWithAlpha(context.drawingSource, typedAlpha)\n    return drawing\n  }\n\n  // id = 'fade'\n}\n\nexport { FadeFilter }\n","\nimport { VisibleContext } from \"../../../Playing\"\nimport { EvaluatedPoint } from \"../../../declarations\"\nimport { Errors } from \"../../../Setup/Errors\"\nimport { Evaluator } from \"../../../Utilities\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nclass OverlayFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : EvaluatedPoint) : VisibleContext {\n    const { x, y } = evaluated\n    const { context, mergeContext } = evaluator\n    if (typeof mergeContext === \"undefined\") throw Errors.internal + 'OverlayFilter mergeContext'\n\n    mergeContext.drawAtPoint(context.drawingSource, { x: x || 0, y: y || 0 })\n    return mergeContext\n  }\n\n  // id = 'overlay'\n\n  scopeSet(evaluator : Evaluator) : void {\n    const { width, height } = evaluator.context.size\n    evaluator.set(\"overlay_w\", width)\n    evaluator.set(\"overlay_h\", height)\n  }\n}\n\nexport { OverlayFilter }\n","\nimport { EvaluatedSize, Size } from \"../../../declarations\"\nimport { Evaluator } from \"../../../Utilities/Evaluator\"\nimport { ContextFactory, VisibleContext } from \"../../../Playing\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nclass ScaleFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, evaluated : EvaluatedSize) : VisibleContext {\n    const { context } = evaluator\n    let outWidth = evaluated.w || evaluated.width || 0\n    let outHeight = evaluated.h || evaluated.height || 0\n    if (outWidth + outHeight < 2) return context\n\n\n    const inSize : Size = {\n      width: Number(evaluator.get(\"mm_in_w\")), height: Number(evaluator.get(\"mm_in_h\"))\n  } //evaluator.inputSize\n    if (outWidth === -1) outWidth = inSize.width * (outHeight / inSize.height)\n    else if (outHeight === -1) outHeight = inSize.height * (outWidth / inSize.width)\n\n    const fromSize = { width: outWidth, height: outHeight }\n    const drawing = ContextFactory.toSize(fromSize)\n    // console.log(this.constructor.name, \"draw\", inSize, fromSize)\n\n    drawing.drawInSizeFromSize(context.drawingSource, inSize, fromSize)\n    return drawing\n  }\n\n  // id = 'scale'\n\n  scopeSet(evaluator : Evaluator) : void {\n    const { width, height } = evaluator.context.size\n    evaluator.set(\"in_h\", height)\n    evaluator.set(\"mm_in_h\", height)\n    evaluator.set(\"in_w\", width)\n    evaluator.set(\"mm_in_w\", width)\n  }\n}\n\nexport { ScaleFilter }\n","import { VisibleContext } from \"../../../Playing/VisibleContext\"\nimport { ValueObject } from \"../../../declarations\"\nimport { Evaluator } from \"../../../Utilities/Evaluator\"\nimport { FilterDefinitionClass } from \"../FilterDefinition\"\n\nclass SetSarFilter extends FilterDefinitionClass {\n  draw(evaluator : Evaluator, _evaluated : ValueObject) : VisibleContext {\n    return evaluator.context\n  }\n\n  // id = 'setsar'\n}\n\nexport { SetSarFilter }\n","import { BlendFilter } from \"./Definitions/BlendFilter\"\nimport { ChromaKeyFilter } from \"./Definitions/ChromaKeyFilter\"\nimport { ColorFilter } from \"./Definitions/ColorFilter\"\nimport { ColorChannelMixerFilter } from \"./Definitions/ColorChannelMixerFilter\"\nimport { ConvolutionFilter } from \"./Definitions/ConvolutionFilter\"\nimport { CropFilter } from \"./Definitions/CropFilter\"\nimport { DrawBoxFilter } from \"./Definitions/DrawBoxFilter\"\nimport { DrawTextFilter } from \"./Definitions/DrawTextFilter\"\nimport { FadeFilter } from \"./Definitions/FadeFilter\"\nimport { OverlayFilter } from \"./Definitions/OverlayFilter\"\nimport { ScaleFilter } from \"./Definitions/ScaleFilter\"\nimport { SetSarFilter } from \"./Definitions/SetSarFilter\"\nimport { Definitions } from \"../Definitions\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { FilterDefinition, Filter, FilterDefinitionObject } from \"./Filter\"\nimport { Factories } from \"../Factories\"\nimport { Is } from \"../../Utilities/Is\"\nimport { DefinitionType } from \"../../Setup/Enums\"\n\n\nconst filterDefinition = (object : FilterDefinitionObject) : FilterDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  if (Definitions.installed(id)) return <FilterDefinition> Definitions.fromId(id)\n\n  throw Errors.invalid.definition.id + ' filterDefinition ' + id\n}\n\nconst filterDefinitionFromId = (id : string) : FilterDefinition => {\n  return filterDefinition({ id })\n}\n\nconst filterInstance = (object : FilterDefinitionObject) : Filter => {\n  return filterDefinition(object).instanceFromObject(object)\n}\n\nconst filterFromId = (id : string) : Filter => { return filterInstance({ id }) }\n\nconst filterInitialize = () : void => {\n  new ConvolutionFilter({ id: 'convolution', type: DefinitionType.Filter })\n  new SetSarFilter({ id: 'setsar', type: DefinitionType.Filter })\n  new BlendFilter({ id: 'blend', type: DefinitionType.Filter })\n  new ChromaKeyFilter({ id: 'chromakey', type: DefinitionType.Filter })\n  new ColorFilter({ id: 'color', type: DefinitionType.Filter })\n  new ColorChannelMixerFilter({ id: 'colorchannelmixer', type: DefinitionType.Filter })\n  new CropFilter({ id: 'crop', type: DefinitionType.Filter })\n  new DrawBoxFilter({ id: 'drawbox', type: DefinitionType.Filter })\n  new DrawTextFilter({ id: 'drawtext', type: DefinitionType.Filter })\n  new FadeFilter({ id: 'fade', type: DefinitionType.Filter })\n  new OverlayFilter({ id: 'overlay', type: DefinitionType.Filter })\n  new ScaleFilter({ id: 'scale', type: DefinitionType.Filter })\n}\n\nconst filterDefine = (object : FilterDefinitionObject) : FilterDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.invalid.definition.id + 'filterDefine'\n\n  Definitions.uninstall(id)\n  return filterDefinition(object)\n}\n\nconst FilterFactoryImplementation = {\n  define: filterDefine,\n  install: filterDefine,\n  definition: filterDefinition,\n  definitionFromId: filterDefinitionFromId,\n  fromId: filterFromId,\n  initialize: filterInitialize,\n  instance: filterInstance,\n}\n\nFactories[DefinitionType.Filter] = FilterFactoryImplementation\n\nexport {\n  filterDefine,\n  filterDefine as filterInstall,\n  filterDefinition,\n  filterDefinitionFromId,\n  FilterFactoryImplementation,\n  filterFromId,\n  filterInitialize,\n  filterInstance,\n}\n","import { Modular, ModularDefinitionClass, ModularDefinitionObject } from \"./Modular\"\nimport { Property, PropertyObject } from \"../../../Setup/Property\"\nimport { Any, JsonObject, ScalarValue, Size } from \"../../../declarations\"\nimport { Errors } from \"../../../Setup/Errors\"\nimport { TimeRange } from \"../../../Utilities/TimeRange\"\nimport { Is } from \"../../../Utilities/Is\"\nimport { VisibleContext } from \"../../../Playing\"\nimport { DefinitionClass } from \"../../Definition/Definition\"\nimport { Filter } from \"../../Filter/Filter\"\nimport { Evaluator } from \"../../../Utilities/Evaluator\"\nimport { filterInstance } from \"../../Filter\"\n\nfunction ModularDefinitionMixin<T extends DefinitionClass>(Base: T) : ModularDefinitionClass & T {\n  return class extends Base {\n    constructor(...args : Any[]) {\n      super(...args)\n      const [object] = args\n      const { properties, filters } = <ModularDefinitionObject> object\n      if (properties) {\n        const propertyInstances = Object.entries(properties).map(entry => {\n          const [name, propertyObject] = entry\n          if (!Is.object(propertyObject)) throw Errors.invalid.property + \"name \" + name\n\n          const property : PropertyObject = Object.assign(propertyObject, { name, custom: true })\n          return new Property(property)\n        })\n        this.properties.push(...propertyInstances)\n        //console.log(\"ModularDefinition\", this.id, \"properties\", this.properties.map(p => `${p.name} => ${p.value}`))\n      }\n\n      if (filters) {\n        const filterInstances = filters.map(filter => {\n          const { id } = filter\n          if (!id) throw Errors.id\n\n          return filterInstance(filter)\n        })\n        this.filters.push(...filterInstances)\n      }\n    }\n\n    drawFilters(modular: Modular, range : TimeRange, context : VisibleContext, size : Size, outContext?: VisibleContext) : VisibleContext {\n      // range's frame is offset of draw time in clip = frames is duration\n      let contextFiltered = context\n      this.filters.forEach(filter => {\n        const evaluator = this.evaluator(modular, range, contextFiltered, size, outContext)\n        contextFiltered = filter.drawFilter(evaluator)\n      })\n      return contextFiltered\n    }\n\n    evaluator(modular: Modular, range : TimeRange, context : VisibleContext, size : Size, mergerContext? : VisibleContext) : Evaluator {\n      const instance = new Evaluator(range, context, size, mergerContext)\n      this.propertiesCustom.forEach(property => {\n        const value = <ScalarValue> modular.value(property.name)\n        instance.set(property.name, value)\n      })\n      return instance\n    }\n\n    filters : Filter[] = []\n\n    get propertiesCustom() : Property[] {\n      return this.properties.filter(property => property.custom)\n    }\n\n    retain = true\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      if (this.filters.length) object.filters = this.filters\n      const entries = this.propertiesCustom.map(property => [property.name, property])\n      if (entries.length) object.properties = Object.fromEntries(entries)\n\n      return object\n    }\n  }\n}\n\nexport { ModularDefinitionMixin }\n","import { Any, LoadPromise } from \"../../../declarations\"\nimport { Definition } from \"../../Definition/Definition\"\nimport { ModularClass, ModularDefinition } from \"./Modular\"\nimport { Definitions } from \"../../Definitions\"\nimport { InstanceClass } from \"../../Instance\"\nimport { Time } from \"../../../Utilities/Time\"\n\n\nfunction ModularMixin<T extends InstanceClass>(Base: T) : ModularClass & T {\n  return class extends Base {\n    constructor(...args : Any[]) {\n      super(...args)\n      const [object] = args\n      this.constructProperties(object)\n    }\n\n    constructProperties(object : Any = {}) : void {\n      // console.log(this.constructor.name, \"constructProperties\", object, this.propertyNames)\n      this.definition.properties.forEach(property => {\n        const { name } = property\n        if (typeof object[name] !== \"undefined\") this[name] = object[name]\n        else if (typeof this[name] === \"undefined\") this[name] = property.value\n      })\n    }\n\n    declare definition : ModularDefinition\n\n    get definitions() : Definition[] {\n      return [...super.definitions, ...this.modularDefinitions]\n    }\n\n    loadModular(quantize : number, start : Time, end? : Time) : LoadPromise | void {\n      const promises: LoadPromise[] = []\n      const startTime = this.definitionTime(quantize, start)\n      const endTime = end ? this.definitionTime(quantize, end) : end\n      this.modularDefinitions.forEach(definition => {\n        const promise = definition.loadDefinition(quantize, startTime, endTime)\n        if (promise) promises.push(promise)\n      })\n      return Promise.all(promises).then()\n    }\n\n    modularUrls(quantize : number, start : Time, end? : Time) : string[] {\n      const startTime = this.definitionTime(quantize, start)\n      const endTime = end ? this.definitionTime(quantize, end) : end\n      return this.modularDefinitions.flatMap(definition =>\n        definition.definitionUrls(startTime, endTime)\n      )\n    }\n\n    get modularDefinitions() : Definition[] {\n      const modular = this.definition.propertiesModular\n      const ids = modular.map(property => String(this.value(property.name)))\n      return ids.map(id => Definitions.fromId(id))\n    }\n  }\n}\n\nexport { ModularMixin }\n","import { EffectDefinition } from \"./Effect\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ModularMixin } from \"../Mixin/Modular/ModularMixin\"\nimport { JsonObject } from \"../../declarations\"\n\nconst EffectWithModular = ModularMixin(InstanceBase)\nclass EffectClass extends EffectWithModular {\n  declare definition : EffectDefinition\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    object.id = this.id\n    return object\n  }\n}\n\nexport { EffectClass }\n","import { DefinitionBase } from \"../Definition/Definition\"\nimport { Effect, EffectObject } from \"./Effect\"\nimport { ModularDefinitionMixin } from \"../Mixin/Modular/ModularDefinitionMixin\"\nimport { Any } from \"../../declarations\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { EffectClass } from \"./EffectInstance\"\nimport { DefinitionType } from \"../../Setup/Enums\"\n\nconst EffectDefinitionWithModular = ModularDefinitionMixin(DefinitionBase)\nclass EffectDefinitionClass extends EffectDefinitionWithModular {\n  constructor(...args : Any[]) {\n    super(...args)\n    Definitions.install(this)\n  }\n\n  get instance() : Effect { return this.instanceFromObject(this.instanceObject) }\n\n  instanceFromObject(object : EffectObject) : Effect {\n    return new EffectClass({ ...this.instanceObject, ...object })\n  }\n\n  type = DefinitionType.Effect\n}\n\nexport { EffectDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { EffectDefinitionClass } from \"./EffectDefinition\"\nimport { Definitions } from \"../Definitions\"\nimport { Factories } from \"../Factories\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Effect, EffectDefinition, EffectObject, EffectDefinitionObject } from \"./Effect\"\n\nimport effectBlurJson from \"../../DefinitionObjects/effect/blur.json\"\nimport effectChromaKeyJson from \"../../DefinitionObjects/effect/chromakey.json\"\nimport effectEmbossJson from \"../../DefinitionObjects/effect/emboss.json\"\nimport effectGrayscaleJson from \"../../DefinitionObjects/effect/grayscale.json\"\nimport effectSepiaJson from \"../../DefinitionObjects/effect/sepia.json\"\nimport effectSharpenJson from \"../../DefinitionObjects/effect/sharpen.json\"\nimport effectTextJson from \"../../DefinitionObjects/effect/text.json\"\n\n\nconst effectDefinition = (object : EffectDefinitionObject) : EffectDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  if (Definitions.installed(id)) return <EffectDefinition> Definitions.fromId(id)\n\n  return new EffectDefinitionClass({...object, type: DefinitionType.Effect })\n}\n\nconst effectDefinitionFromId = (id : string) : EffectDefinition => {\n  return effectDefinition({ id })\n}\n\nconst effectInstance = (object : EffectObject) : Effect => {\n  const definition = effectDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst effectFromId = (id : string) : Effect => {\n  return effectInstance({ id })\n}\n\nconst effectInitialize = () : void => {\n  new EffectDefinitionClass(effectBlurJson)\n  new EffectDefinitionClass(effectChromaKeyJson)\n  new EffectDefinitionClass(effectEmbossJson)\n  new EffectDefinitionClass(effectGrayscaleJson)\n  new EffectDefinitionClass(effectSepiaJson)\n  new EffectDefinitionClass(effectSharpenJson)\n  new EffectDefinitionClass(effectTextJson)\n}\n\nconst effectDefine = (object : EffectDefinitionObject) : EffectDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return effectDefinition(object)\n}\n\nconst EffectFactoryImplementation = {\n  define: effectDefine,\n  definition: effectDefinition,\n  definitionFromId: effectDefinitionFromId,\n  fromId: effectFromId,\n  initialize: effectInitialize,\n  install: effectDefine,\n  instance: effectInstance,\n}\n\nFactories[DefinitionType.Effect] = EffectFactoryImplementation\n\nexport {\n  effectDefine,\n  effectDefinition,\n  effectDefinitionFromId,\n  EffectFactoryImplementation,\n  effectFromId,\n  effectDefine as effectInstall,\n  effectInitialize,\n  effectInstance,\n}\n","import { DefinitionType } from \"../Setup/Enums\"\nimport { Factories } from \"../Mash/Factories/Factories\"\nimport { Errors } from \"../Setup/Errors\"\nimport { AudioFactory } from \"../Mash/Audio/Audio\"\nimport { EffectFactory } from \"../Mash/Effect/Effect\"\nimport { FilterFactory } from \"../Mash/Filter/Filter\"\nimport { FontFactory } from \"../Mash/Font/Font\"\nimport { ImageFactory } from \"../Mash/Image/Image\"\nimport { MergerFactory } from \"../Mash/Merger/Merger\"\nimport { ScalerFactory } from \"../Mash/Scaler/Scaler\"\nimport { ThemeFactory } from \"../Mash/Theme/Theme\"\nimport { TransitionFactory } from \"../Mash/Transition/Transition\"\nimport { VideoFactory } from \"../Mash/Video/Video\"\nimport { MashFactory } from \"../Mash/Mash/Mash\"\nimport { MasherFactory } from \"../Mash/Masher/Masher\"\nimport { VideoStreamFactory } from \"../Mash/VideoStream/VideoStream\"\nimport { VideoSequenceFactory } from \"../Mash/VideoSequence/VideoSequence\"\nimport { ContextFactory } from \"../Playing/ContextFactory\"\n\n/**\n * Provides access to factory objects that create all other object definitions and instances.\n *\n * @example Create {@link Masher} instance\n * ```ts\n * const masher : Masher = Factory.masher.instance()\n * ```\n * @sealed\n */\nclass Factory {\n  /**\n   * Object with methods to create audio definitions and instances\n   */\n  static get [DefinitionType.Audio]() : AudioFactory {\n    const factory = Factories[DefinitionType.Audio]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Audio\n\n    return factory\n  }\n\n  static get context():typeof ContextFactory { return ContextFactory }\n\n  /**\n   * Object with methods to create effect definitions and instances\n   */\n  static get [DefinitionType.Effect]() : EffectFactory {\n    const factory = Factories[DefinitionType.Effect]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Effect\n\n    return factory\n  }\n\n  /**\n   * Object with methods to create audio definitions and instances\n   */\n  static get [DefinitionType.Filter]() : FilterFactory {\n    const factory = Factories[DefinitionType.Filter]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Filter\n\n    return factory\n  }\n\n  static get [DefinitionType.Font]() : FontFactory {\n    const factory = Factories[DefinitionType.Font]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Font\n\n    return factory\n  }\n\n  static get [DefinitionType.Image]() : ImageFactory {\n    const factory = Factories[DefinitionType.Image]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Image\n\n    return factory\n  }\n\n  static get [DefinitionType.Mash]() : MashFactory {\n    const factory = Factories[DefinitionType.Mash]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Mash\n\n    return factory\n  }\n\n  static get [DefinitionType.Masher]() : MasherFactory {\n    const factory = Factories[DefinitionType.Masher]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Masher\n\n    return factory\n  }\n\n  static get [DefinitionType.Merger]() : MergerFactory {\n    const factory = Factories[DefinitionType.Merger]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Merger\n\n    return factory\n  }\n\n  static get [DefinitionType.Scaler]() : ScalerFactory {\n    const factory = Factories[DefinitionType.Scaler]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Scaler\n\n    return factory\n  }\n\n  static get [DefinitionType.Theme]() : ThemeFactory {\n    const factory = Factories[DefinitionType.Theme]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Theme\n\n    return factory\n  }\n\n  static get [DefinitionType.Transition]() : TransitionFactory {\n    const factory = Factories[DefinitionType.Transition]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Transition\n\n    return factory\n  }\n\n  static get [DefinitionType.Video]() : VideoFactory {\n    const factory = Factories[DefinitionType.Video]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.Video\n\n    return factory\n  }\n\n  static get [DefinitionType.VideoSequence]() : VideoSequenceFactory {\n    const factory = Factories[DefinitionType.VideoSequence]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.VideoSequence\n\n    return factory\n  }\n\n  static get [DefinitionType.VideoStream]() : VideoStreamFactory {\n    const factory = Factories[DefinitionType.VideoStream]\n    if (!factory) throw Errors.invalid.factory + DefinitionType.VideoStream\n\n    return factory\n  }\n  private constructor() {}\n}\n\nexport { Factory }\n","import { MergerDefinition } from \"./Merger\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ModularMixin } from \"../Mixin/Modular/ModularMixin\"\nimport { Factory } from \"../../Factory/Factory\"\n\n\nconst MergerWithModular = ModularMixin(InstanceBase)\nclass MergerClass extends MergerWithModular {\n  declare definition : MergerDefinition\n\n  get id() : string { return this.definition.id }\n\n  set id(value : string) {\n    this.definition = Factory.merger.definitionFromId(value)\n    this.constructProperties()\n  }\n}\n\nexport { MergerClass }\n","import { MergerClass } from \"./MergerInstance\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { Merger, MergerObject } from \"./Merger\"\nimport { ModularDefinitionMixin } from \"../Mixin/Modular/ModularDefinitionMixin\"\nimport { Any } from \"../../declarations\"\nimport { DataType, DefinitionType } from \"../../Setup/Enums\"\nimport { Property } from \"../../Setup/Property\"\n\nimport { Definitions } from \"../Definitions/Definitions\"\n\nconst MergerDefinitionWithModular = ModularDefinitionMixin(DefinitionBase)\nclass MergerDefinitionClass extends MergerDefinitionWithModular {\n  constructor(...args : Any[]) {\n    super(...args)\n    this.properties.push(new Property({ name: \"id\", type: DataType.String, value: \"\" }))\n    Definitions.install(this)\n  }\n\n  get instance() : Merger {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : MergerObject) : Merger {\n    const instance = new MergerClass({ ...this.instanceObject, ...object })\n    return instance\n  }\n  retain = true\n\n  type = DefinitionType.Merger\n}\n\nexport { MergerDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { MergerDefinitionClass } from \"../Merger/MergerDefinition\"\nimport { Definitions } from \"../Definitions\"\nimport mergerBlendJson from \"../../DefinitionObjects/merger/blend.json\"\nimport mergerCenterJson from \"../../DefinitionObjects/merger/center.json\"\nimport mergerConstrainedJson from \"../../DefinitionObjects/merger/constrained.json\"\nimport mergerDefaultJson from \"../../DefinitionObjects/merger/default.json\"\nimport mergerOverlayJson from \"../../DefinitionObjects/merger/overlay.json\"\nimport {\n  Merger,\n  MergerObject,\n  MergerDefinition,\n  MergerDefinitionObject,\n  MergerFactory\n} from \"../Merger/Merger\"\nimport { Factories } from \"../Factories\"\nimport { Is } from \"../../Utilities/Is\"\n\nconst mergerDefaultId = \"com.moviemasher.merger.default\"\n\nconst mergerDefinition = (object : MergerDefinitionObject) : MergerDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) ? id : mergerDefaultId\n  if (Definitions.installed(idString)) return <MergerDefinition> Definitions.fromId(idString)\n\n  return new MergerDefinitionClass({ ...object, type: DefinitionType.Merger, id: idString })\n}\n\nconst mergerDefinitionFromId = (id : string) : MergerDefinition => {\n  return mergerDefinition({ id })\n}\n\nconst mergerInstance = (object : MergerObject) : Merger => {\n  const definition = mergerDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst mergerFromId = (id : string) : Merger => {\n  return mergerInstance({ id })\n}\n\nconst mergerInitialize = () : void => {\n  new MergerDefinitionClass(mergerBlendJson)\n  new MergerDefinitionClass(mergerCenterJson)\n  new MergerDefinitionClass(mergerConstrainedJson)\n  new MergerDefinitionClass(mergerDefaultJson)\n  new MergerDefinitionClass(mergerOverlayJson)\n}\n\nconst mergerDefine = (object : MergerDefinitionObject) : MergerDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) ? id : mergerDefaultId\n  Definitions.uninstall(idString)\n  return mergerDefinition(object)\n}\n\n\nconst MergerFactoryImplementation : MergerFactory = {\n  define: mergerDefine,\n  install: mergerDefine,\n  definition: mergerDefinition,\n  definitionFromId: mergerDefinitionFromId,\n  fromId: mergerFromId,\n  initialize: mergerInitialize,\n  instance: mergerInstance,\n}\n\nFactories[DefinitionType.Merger] = MergerFactoryImplementation\n\nexport {\n  mergerDefine,\n  mergerDefine as mergerInstall,\n  mergerDefaultId,\n  mergerDefinition,\n  mergerDefinitionFromId,\n  MergerFactoryImplementation,\n  mergerFromId,\n  mergerInitialize,\n  mergerInstance,\n}\n","import { ScalerDefinition } from \"./Scaler\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ModularMixin } from \"../Mixin/Modular/ModularMixin\"\nimport { Factory } from \"../../Factory\"\n\nconst ScalerWithModular = ModularMixin(InstanceBase)\nclass ScalerClass extends ScalerWithModular {\n  declare definition : ScalerDefinition\n\n  get id() : string { return this.definition.id }\n\n  set id(value : string) {\n    this.definition = Factory.scaler.definitionFromId(value)\n    this.constructProperties()\n  }\n}\n\nexport { ScalerClass }\n","import { Scaler, ScalerObject } from \"./Scaler\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { ModularDefinitionMixin } from \"../Mixin/Modular/ModularDefinitionMixin\"\nimport { DataType, DefinitionType } from \"../../Setup/Enums\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Any } from \"../../declarations\"\nimport { ScalerClass } from \"./ScalerInstance\"\nimport { Property } from \"../../Setup/Property\"\n\nconst ScalerDefinitionWithModular = ModularDefinitionMixin(DefinitionBase)\nclass ScalerDefinitionClass extends ScalerDefinitionWithModular {\n  constructor(...args : Any[]) {\n    super(...args)\n    this.properties.push(new Property({ name: \"id\", type: DataType.String, value: \"\" }))\n    Definitions.install(this)\n  }\n\n  get instance() : Scaler {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : ScalerObject) : Scaler {\n    const instance = new ScalerClass({ ...this.instanceObject, ...object })\n    return instance\n  }\n\n  retain = true\n\n  type = DefinitionType.Scaler\n}\n\nexport { ScalerDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions\"\nimport { Factories } from \"../Factories\"\nimport { ScalerDefinitionClass } from \"../Scaler/ScalerDefinition\"\nimport {\n  Scaler, ScalerDefinition, ScalerDefinitionObject, ScalerObject\n} from \"../Scaler/Scaler\"\n\nimport scalerDefaultJson from \"../../DefinitionObjects/scaler/default.json\"\nimport scalerPanJson from \"../../DefinitionObjects/scaler/pan.json\"\nimport scalerScaleJson from \"../../DefinitionObjects/scaler/scale.json\"\n\nconst scalerDefaultId = \"com.moviemasher.scaler.default\"\n\nconst scalerDefinition = (object : ScalerDefinitionObject) : ScalerDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) ? id : scalerDefaultId\n  if (Definitions.installed(idString)) return <ScalerDefinition> Definitions.fromId(idString)\n\n  return new ScalerDefinitionClass({ ...object, type: DefinitionType.Scaler, id: idString })\n}\n\nconst scalerDefinitionFromId = (id : string) : ScalerDefinition => {\n  return scalerDefinition({ id })\n}\n\nconst scalerInstance = (object : ScalerObject) : Scaler => {\n  return scalerDefinition(object).instanceFromObject(object)\n}\n\nconst scalerFromId = (id : string) : Scaler => {\n  return scalerInstance({ id })\n}\n\nconst scalerInitialize = () : void => {\n  new ScalerDefinitionClass(scalerDefaultJson)\n  new ScalerDefinitionClass(scalerPanJson)\n  new ScalerDefinitionClass(scalerScaleJson)\n}\n\nconst scalerDefine = (object : ScalerDefinitionObject) : ScalerDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) ? id : scalerDefaultId\n\n  Definitions.uninstall(idString)\n  return scalerDefinition(object)\n}\n\n\nconst ScalerFactoryImplementation = {\n  define: scalerDefine,\n  install: scalerDefine,\n  definitionFromId: scalerDefinitionFromId,\n  definition: scalerDefinition,\n  instance: scalerInstance,\n  fromId: scalerFromId,\n  initialize: scalerInitialize,\n}\n\nFactories[DefinitionType.Scaler] = ScalerFactoryImplementation\n\nexport {\n  scalerDefine,\n  scalerDefine as scalerInstall,\n  scalerDefaultId,\n  scalerDefinition,\n  scalerDefinitionFromId,\n  ScalerFactoryImplementation,\n  scalerFromId,\n  scalerInitialize,\n  scalerInstance,\n}\n","import {\n  Any, JsonObject, LoadPromise, SelectionObject, Size, ValueObject\n} from \"../../../declarations\"\nimport { Merger } from \"../../Merger/Merger\"\nimport { Effect } from \"../../Effect/Effect\"\nimport { Scaler } from \"../../Scaler/Scaler\"\nimport { VisibleClass } from \"../Visible/Visible\"\nimport { VisibleContext } from \"../../../Playing/VisibleContext\"\nimport { Definition } from \"../../Definition/Definition\"\nimport { TransformableClass, TransformableObject } from \"./Transformable\"\nimport { mergerInstance } from \"../../Merger/MergerFactory\"\nimport { Time } from \"../../../Utilities/Time\"\nimport { Is } from \"../../../Utilities/Is\"\nimport { effectInstance } from \"../../Effect\"\nimport { scalerInstance } from \"../../Scaler\"\n\nfunction TransformableMixin<T extends VisibleClass>(Base: T): TransformableClass & T {\n  return class extends Base {\n    constructor(...args: Any[]) {\n      super(...args)\n      const [object] = args\n\n      const { merger, effects, scaler } = <TransformableObject>object\n\n      this.merger = mergerInstance(merger || {})\n      this.scaler = scalerInstance(scaler || {})\n\n      if (effects) {\n        const effectInstances = effects.map(effect => effectInstance(effect))\n        this.effects.push(...effectInstances)\n      }\n    }\n\n    get definitions(): Definition[] {\n      return [\n        ...super.definitions,\n        ...this.merger.definitions,\n        ...this.scaler.definitions,\n        ...this.effects.flatMap(effect => effect.definitions)\n      ]\n    }\n\n    effectedContextAtTimeToSize(mashTime: Time, quantize: number, dimensions: Size): VisibleContext | undefined {\n      const scaledContext = this.scaledContextAtTimeToSize(mashTime, quantize, dimensions)\n      if (!scaledContext) return\n\n      let context = scaledContext\n      if (!this.effects) return context\n\n      const clipTimeRange = this.timeRangeRelative(mashTime, quantize)\n      if (!clipTimeRange) return\n\n      this.effects.reverse().every(effect => (\n        context = effect.definition.drawFilters(effect, clipTimeRange, context, dimensions)\n      ))\n      return context\n    }\n\n    effects: Effect[] = []\n\n    loadClip(quantize: number, start: Time, end?: Time): LoadPromise | void {\n      const loads = [\n        super.loadClip(quantize, start, end),\n        this.loadTransformable(quantize, start, end)\n      ]\n      const promises = loads.filter(Boolean)\n      switch (promises.length) {\n        case 0: return\n        case 1: return promises[0]\n        default: return Promise.all(promises).then()\n      }\n    }\n\n    loadTransformable(quantize: number, start: Time, end?: Time): LoadPromise | void {\n      const loads = [\n        this.merger.loadModular(quantize, start, end),\n        this.scaler.loadModular(quantize, start, end),\n        ...this.effects.map(effect => effect.loadModular(quantize, start, end))\n      ]\n      const promises = loads.filter(Boolean)\n      switch (promises.length) {\n        case 0: return\n        case 1: return promises[0]\n        default: return Promise.all(promises).then()\n      }\n    }\n\n    mergeContextAtTime(mashTime: Time, quantize: number, context: VisibleContext): void {\n      const effected = this.effectedContextAtTimeToSize(mashTime, quantize, context.size)\n      if (!effected) return\n\n      const range = this.timeRangeRelative(mashTime, quantize)\n      this.merger.definition.drawFilters(this.merger, range, effected, context.size, context)\n    }\n\n    merger: Merger\n\n    get propertyValues(): SelectionObject {\n      const merger = <ValueObject>this.merger.propertyValues\n      const scaler = <ValueObject>this.scaler.propertyValues\n      const combined = { merger, scaler, ...super.propertyValues }\n      // console.log(this.constructor.name, \"get propertyValues\", combined)\n      return combined\n    }\n\n    scaledContextAtTimeToSize(mashTime: Time, quantize: number, dimensions: Size): VisibleContext | undefined {\n      const context = this.contextAtTimeToSize(mashTime, quantize, dimensions)\n      if (!context) return\n\n      const clipTimeRange = this.timeRangeRelative(mashTime, quantize)\n      if (Is.undefined(clipTimeRange)) return context\n      // console.log(this.constructor.name, \"scaledContextAtTimeToSize\", clipTimeRange)\n      return this.scaler.definition.drawFilters(this.scaler, clipTimeRange, context, dimensions)\n    }\n\n    scaler: Scaler\n\n    toJSON(): JsonObject {\n      const object = super.toJSON() // gets merger and scaler from propertyValues\n      if (this.effects.length) object.effects = this.effects\n      return object\n    }\n  }\n}\n\nexport { TransformableMixin }\n","import { ContextFactory } from \"../../../Playing/ContextFactory\"\nimport { VisibleContext } from \"../../../Playing/VisibleContext\"\nimport { VisibleSource, Size } from \"../../../declarations\"\nimport { TrackType } from \"../../../Setup/Enums\"\nimport { Time  } from \"../../../Utilities/Time\"\nimport { ClipClass } from \"../Clip/Clip\"\nimport { VisibleClass, VisibleDefinition } from \"./Visible\"\n\nfunction VisibleMixin<T extends ClipClass>(Base: T) : VisibleClass & T {\n  return class extends Base {\n    contextAtTimeToSize(mashTime : Time, quantize: number, _dimensions : Size) : VisibleContext | undefined {\n      const definitionTime = this.definitionTime(quantize, mashTime)\n      // console.debug(this.constructor.name, \"contextAtTimeToSize\", definitionTime.toString(), mashTime.toString())\n      const image = this.loadedVisible(quantize, definitionTime)\n      if (!image) {\n        console.error(this.constructor.name, \"contextAtTimeToSize not loaded\", this.id)\n        return\n      }\n      const width = Number(image.width)\n      const height = Number(image.height)\n\n      const context = ContextFactory.toSize({ width, height })\n      context.draw(image)\n      return context\n    }\n\n    declare definition: VisibleDefinition\n\n    loadedVisible(quantize: number, definitionTime:Time):VisibleSource | undefined {\n      return this.definition.loadedVisible(quantize, definitionTime)\n    }\n\n    mergeContextAtTime(_time : Time, _quantize: number, _context : VisibleContext) : void {}\n\n    trackType = TrackType.Video\n\n    visible = true\n  }\n}\nexport { VisibleMixin }\n","import { InstanceBase } from \"../Instance/Instance\"\nimport { ClipMixin } from \"../Mixin/Clip/ClipMixin\"\nimport { TransformableMixin } from \"../Mixin/Transformable/TransformableMixin\"\nimport { VisibleMixin } from \"../Mixin/Visible/VisibleMixin\"\nimport { ImageDefinition } from \"./Image\"\n\nconst ImageWithClip = ClipMixin(InstanceBase)\nconst ImageWithVisible = VisibleMixin(ImageWithClip)\nconst ImageWithTransformable = TransformableMixin(ImageWithVisible)\nclass ImageClass extends ImageWithTransformable {\n  declare definition : ImageDefinition\n}\n\nexport { ImageClass }\n","import { VisibleSource } from \"../../../declarations\"\nimport { TrackType } from \"../../../Setup/Enums\"\nimport { ClipDefinitionClass } from \"../Clip/Clip\"\nimport { VisibleDefinitionClass } from \"./Visible\"\n\nfunction VisibleDefinitionMixin<T extends ClipDefinitionClass>(Base: T) : VisibleDefinitionClass & T {\n  return class extends Base {\n    loadedVisible(): VisibleSource | undefined { return }\n\n    trackType = TrackType.Video\n\n    visible = true\n  }\n}\n\nexport { VisibleDefinitionMixin }\n","import { DefinitionBase } from \"../Definition/Definition\"\nimport { Any, VisibleSource, JsonObject, LoadPromise } from \"../../declarations\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { DefinitionType } from \"../../Setup/Enums\"\nimport { Image, ImageDefinitionObject, ImageObject } from \"./Image\"\nimport { ImageClass } from \"./ImageInstance\"\nimport { VisibleDefinitionMixin } from \"../Mixin/Visible/VisibleDefinitionMixin\"\nimport { ClipDefinitionMixin } from \"../Mixin/Clip/ClipDefinitionMixin\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Time, Times } from \"../../Utilities/Time\"\nimport { Cache } from \"../../Loading\"\nimport { LoaderFactory } from \"../../Loading/LoaderFactory\"\nimport { urlAbsolute } from \"../../Utilities/Url\"\n\n\nconst ImageDefinitionWithClip = ClipDefinitionMixin(DefinitionBase)\nconst ImageDefinitionWithVisible = VisibleDefinitionMixin(ImageDefinitionWithClip)\nconst ImageDefinitionWithTransformable = VisibleDefinitionMixin(ImageDefinitionWithVisible)\n\nclass ImageDefinitionClass extends ImageDefinitionWithTransformable {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n    if (!object) throw Errors.unknown.definition\n    // console.log(\"ImageDefinition\", object)\n    const { url, source } = <ImageDefinitionObject> object\n    if (!url) throw Errors.invalid.definition.url\n\n    this.urlVisible = url\n    if (source) this.source = source\n\n    Definitions.install(this)\n  }\n\n  get absoluteUrl(): string { return urlAbsolute(this.urlVisible) }\n\n  get instance() : Image {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : ImageObject) : Image {\n    const instance = new ImageClass({ ...this.instanceObject, ...object })\n    return instance\n  }\n\n  loadDefinition(quantize: number, start: Time, end?: Time): LoadPromise | void {\n    const promises: LoadPromise[] = []\n    const definitionPromise = super.loadDefinition(quantize, start, end)\n    if (definitionPromise) promises.push(definitionPromise)\n    const url = this.absoluteUrl\n    if (!Cache.cached(url)) {\n      if (Cache.caching(url)) promises.push(Cache.get(url))\n      else promises.push(LoaderFactory.image().loadUrl(url))\n    }\n    switch (promises.length) {\n      case 0: return\n      case 1: return promises[0]\n      default: return Promise.all(promises).then()\n    }\n  }\n\n  definitionUrls(_start : Time, _end? : Time) : string[] { return [this.absoluteUrl] }\n\n  loadedVisible(): VisibleSource | undefined { return Cache.get(this.absoluteUrl) }\n\n  source = ''\n\n  type = DefinitionType.Image\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    object.url = this.urlVisible\n    if (this.source) object.source = this.source\n    return object\n  }\n\n  unload(times : Times[] = []) : void {\n    super.unload(times)\n    if (times.length) return // don't unload since any times indicate image needed\n\n    if (!Cache.cached(this.urlVisible)) return // we're not loaded\n\n    Cache.remove(this.urlVisible)\n  }\n\n  urlVisible : string\n}\n\nexport { ImageDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions\"\nimport { Factories } from \"../Factories\"\nimport { ImageDefinitionClass } from \"../Image/ImageDefinition\"\nimport { Image, ImageDefinition, ImageDefinitionObject, ImageObject } from \"./Image\"\n\nconst imageDefinition = (object : ImageDefinitionObject) : ImageDefinition => {\n  const { id } = object\n  if (!id) throw Errors.id\n\n  if (Definitions.installed(id)) return <ImageDefinition> Definitions.fromId(id)\n\n  return new ImageDefinitionClass(object)\n}\n\nconst imageDefinitionFromId = (id : string) : ImageDefinition => {\n  return imageDefinition({ id })\n}\n\nconst imageInstance = (object : ImageObject) : Image => {\n  const definition = imageDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst imageFromId = (id : string) : Image => {\n  return imageInstance({ id })\n}\n\nconst imageInitialize = () : void => {}\n\nconst imageDefine = (object : ImageDefinitionObject) : ImageDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return imageDefinition(object)\n}\n\n\n/**\n * @internal\n */\nconst imageInstall = (object: ImageDefinitionObject): ImageDefinition => {\n  const instance = imageDefine(object)\n  instance.retain = true\n  return instance\n}\n\n\nconst ImageFactoryImplementation = {\n  define: imageDefine,\n  install: imageInstall,\n  definition: imageDefinition,\n  definitionFromId: imageDefinitionFromId,\n  fromId: imageFromId,\n  initialize: imageInitialize,\n  instance: imageInstance,\n}\n\nFactories[DefinitionType.Image] = ImageFactoryImplementation\n\nexport {\n  imageInstall,\n  imageDefine,\n  imageDefinition,\n  imageDefinitionFromId,\n  ImageFactoryImplementation,\n  imageFromId,\n  imageInitialize,\n  imageInstance,\n}\n","import { JsonObject } from \"../../declarations\"\nimport { TrackType, DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { byFrame } from \"../../Utilities\"\nimport { Clip, ClipObject } from \"../Mixin/Clip/Clip\"\n\ninterface TrackObject {\n  clips? : ClipObject[]\n  type? : TrackType\n  index? : number\n}\n\ninterface TrackOptions {\n  clips? : Clip[]\n  type? : TrackType\n  index? : number\n}\n\nclass TrackClass {\n  constructor(object : TrackOptions) {\n    const { clips, index, type } = object\n    if (index) this.index = index\n    if (type) this.type = type\n    if (clips) this.clips.push(...clips)\n  }\n\n  clips : Clip[] = []\n\n  get frames() : number {\n    if (!this.clips.length) return 0\n\n    const clip = this.clips[this.clips.length - 1]\n    return clip.frame + clip.frames\n  }\n\n  index = 0\n\n  get isMainVideo() : boolean { return !this.index && this.type === TrackType.Video }\n\n  type = TrackType.Video\n\n  addClips(clips : Clip[], insertIndex = 0) : void {\n    // console.log(\"addClips\", clips.length, insertIndex, this.index)\n    let clipIndex = insertIndex || 0\n    if (!this.isMainVideo) clipIndex = 0 // ordered by clip.frame values\n\n    const origIndex = clipIndex // note original, since it may decrease...\n    const movingClips : Clip[] = [] // build array of clips already in this.clips\n    // build array of my clips excluding the clips we're inserting\n    const spliceClips = this.clips.filter((clip, index) => {\n      const moving = clips.includes(clip)\n      if (moving) movingClips.push(clip)\n      // insert index should be decreased when clip is moving and comes before\n      if (origIndex && moving && index < origIndex) clipIndex -= 1\n      return !moving\n    })\n    // insert the clips we're adding at the correct index, then sort properly\n    spliceClips.splice(clipIndex, 0, ...clips)\n    this.sortClips(spliceClips)\n\n    // set the track of clips we aren't moving\n    const newClips = clips.filter(clip => !movingClips.includes(clip))\n    newClips.forEach(clip => { clip.track = this.index })\n\n    // remove all my current clips and replace with new ones in one step\n    this.clips.splice(0, this.clips.length, ...spliceClips)\n  }\n\n  frameForClipsNearFrame(clips : Clip[], frame = 0) : number {\n    if (this.isMainVideo) return frame\n\n    const others = this.clips.filter(clip => !clips.includes(clip) && clip.endFrame > frame)\n    if (!others.length) return frame\n\n    const startFrame = Math.min(...clips.map(clip => clip.frame))\n    const endFrame = Math.max(...clips.map(clip => clip.endFrame))\n    const frames = endFrame - startFrame\n\n    let lastFrame = frame\n    others.find(clip => {\n      if (clip.frame >= lastFrame + frames) return true\n\n      lastFrame = clip.endFrame\n    })\n    return lastFrame\n  }\n\n  removeClips(clips : Clip[]) : void {\n    const spliceClips = this.clips.filter(clip => !clips.includes(clip))\n    if (spliceClips.length === this.clips.length) {\n      // console.trace(\"removeClips\", this.type, this.index, this.clips)\n      throw Errors.internal + 'removeClips'\n    }\n    clips.forEach(clip => { clip.track = -1 })\n    this.sortClips(spliceClips)\n    this.clips.splice(0, this.clips.length, ...spliceClips)\n  }\n\n  sortClips(clips : Clip[]) : void {\n    if (this.isMainVideo) {\n      let frame = 0\n      clips.forEach((clip, i) => {\n        const isTransition = clip.type === DefinitionType.Transition\n        if (i && isTransition) frame -= clip.frames\n        clip.frame = frame\n        if (!isTransition) frame += clip.frames\n      })\n    }\n    clips.sort(byFrame)\n  }\n\n  toJSON() : JsonObject {\n    return { type: this.type, index: this.index, clips: this.clips }\n  }\n}\n\ninterface Track extends TrackClass {}\n\nexport { Track, TrackClass, TrackObject, TrackOptions}\n","import { Errors} from \"../../Setup/Errors\"\nimport { Default } from \"../../Setup/Default\"\nimport { DefinitionType, EventType } from \"../../Setup/Enums\"\nimport { pixelColor } from \"../../Utilities/Pixel\"\nimport { byTrack } from \"../../Utilities/Sort\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Time } from \"../../Utilities/Time\"\nimport { Audible } from \"../../Mash/Mixin/Audible/Audible\"\nimport { Visible } from \"../../Mash/Mixin/Visible/Visible\"\nimport { Transition } from \"../../Mash/Transition/Transition\"\nimport { Cache } from \"../../Loading/Cache\"\nimport { AudibleSource } from \"../..\"\n\ninterface Source {\n  gainNode: GainNode\n  gainSource: AudibleSource\n}\n\ninterface CompositionObject {\n  buffer? : number\n  gain? : number\n  quantize? : number\n  backcolor? : string\n}\n\nclass Composition {\n  constructor(object : CompositionObject) {\n    const { backcolor, buffer, gain, quantize } = object\n    if (backcolor) this.backcolor = backcolor\n    if (quantize && Is.aboveZero(quantize)) this.quantize = quantize\n    if (typeof gain !== \"undefined\" && Is.positive(gain)) this._gain = gain\n    if (buffer && Is.aboveZero(buffer)) this.buffer = buffer\n  }\n\n  adjustSourceGain(clip : Audible) : void {\n    const source = this.sourcesByClip.get(clip)\n    if (!source) {\n      // console.log(this.constructor.name, \"adjustSourceGain no source\", clip.id)\n      return\n    }\n\n    const { gainNode } = source\n    if (this.gain === 0.0) {\n      gainNode.gain.value = 0.0\n      return\n    }\n\n    const gain = clip.gain\n\n    if (Is.positive(gain)) {\n      gainNode.gain.value = this.gain * gain\n      return\n    }\n\n    // position/gain pairs...\n    const timing = clip.startOptions(this.startedContextAt - this.startedMashAt, this.quantize)\n    const { start, duration } = timing\n\n    console.log(this.constructor.name, \"adjustSourceGain\", clip.label, timing, this.startedContextAt - this.startedMashAt, this.quantize)\n\n\n    gainNode.gain.cancelScheduledValues(0)\n    clip.gainPairs.forEach(pair => {\n      const [position, value] = pair\n      gainNode.gain.linearRampToValueAtTime(this.gain * value, start + position * duration)\n    })\n  }\n\n  backcolor? : string\n\n  buffer = Default.mash.buffer\n\n  private bufferSource? : AudioBufferSourceNode\n\n\n  compositeAudible(clips: Audible[]): boolean {\n    // console.log(this.constructor.name, \"compositeAudible\", clips.length)\n    if (!this.createSources(clips)) {\n      // if (clips.length) console.log(this.constructor.name, \"compositeAudible didn't createSources\")\n      return false\n    }\n\n    this.destroySources(clips)\n    return true\n  }\n\n  compositeVisible(time : Time, clips : Visible[]) : void {\n    const main = clips.filter(clip => clip.track === 0)\n    this.drawBackground() // clear and fill with mash background color if defined\n    if (main.length > 1) {\n      const transitionClip = main.find(clip => clip.type === DefinitionType.Transition)\n      if (!transitionClip) throw Errors.mainTrackOverlap\n\n      const transitioned = main.filter(clip => clip.type !== DefinitionType.Transition)\n      const transition = <Transition> transitionClip\n\n      transition.mergeClipsIntoContextAtTime(\n        transitioned, Cache.visibleContext, time, this.quantize, this.backcolor\n      )\n    } else {\n      const [mainClip] = main\n      if (mainClip) mainClip.mergeContextAtTime(time, this.quantize, Cache.visibleContext)\n    }\n    const tracked = clips.filter(clip => !main.includes(clip)).sort(byTrack)\n    tracked.forEach(clip => {\n      clip.mergeContextAtTime(time, this.quantize, Cache.visibleContext)\n    })\n    Cache.audibleContext.emit(EventType.Draw)\n  }\n\n  compositeVisibleRequest(time : Time, clips : Visible[]) : void {\n    if (Is.populatedArray(clips)) {\n      // console.log(this.constructor.name, \"compositeVisibleRequest calling requestAnimationFrame\", time, clips.length)\n      requestAnimationFrame(() => this.compositeVisible(time, clips))\n      return\n    }\n    this.drawBackground()\n  }\n\n\n  private createSources(clips: Audible[]): boolean {\n    // console.log(\"Composition.createSources\", clips.length)\n\n    const filtered = clips.filter(clip => !this.sourcesByClip.has(clip))\n    return filtered.every(clip => {\n      const sourceNode = clip.loadedAudible()\n      if (!sourceNode) {\n        console.debug(this.constructor.name, \"createSources loadedAudible undefined\", clip.id)\n        return false\n      }\n\n      const timing = clip.startOptions(this.startedContextAt - this.startedMashAt, this.quantize)\n      const { start, duration, offset } = timing\n      console.log(this.constructor.name, \"createSources\", clip.label, timing, this.startedContextAt - this.startedMashAt, this.quantize)\n      if (Is.positive(start) && Is.aboveZero(duration)) {\n        sourceNode.loop = clip.definition.loops\n        const gainNode = Cache.audibleContext.createGain()\n        sourceNode.connect(gainNode)\n        gainNode.connect(Cache.audibleContext.destination)\n        sourceNode.start(start, offset, duration)\n\n        this.sourcesByClip.set(clip, { gainSource: sourceNode, gainNode })\n        this.adjustSourceGain(clip)\n      }\n      return true\n    })\n  }\n\n  private destroySources(clipsToKeep: Audible[] = []): void {\n    const sourceClips = [...this.sourcesByClip.keys()]\n    const clipsToRemove = sourceClips.filter(clip => !clipsToKeep.includes(clip))\n    clipsToRemove.forEach(clip => {\n      const source = this.sourcesByClip.get(clip)\n      if (!source) return\n\n      const { gainSource, gainNode } = source\n      gainNode.disconnect(Cache.audibleContext.destination)\n      gainSource.disconnect(gainNode)\n    })\n    clipsToRemove.forEach(clip => this.sourcesByClip.delete(clip))\n  }\n\n  private drawBackground() : void {\n    Cache.visibleContext.clear()\n    if (!this.backcolor) return\n\n    Cache.visibleContext.drawFill(pixelColor(this.backcolor))\n  }\n\n  private _gain = Default.mash.gain\n\n  get gain() : number { return this._gain }\n\n  set gain(value : number) {\n    if (this._gain === value) return\n\n    this._gain = value\n\n    if (this.playing) {\n      [...this.sourcesByClip.keys()].forEach(clip => this.adjustSourceGain(clip))\n    }\n    Cache.audibleContext.emit(EventType.Volume)\n  }\n\n\n  playing = false\n\n  quantize = Default.mash.quantize\n\n  get seconds() : number {\n    const ellapsed = Cache.audibleContext.currentTime - this.startedContextAt\n    return ellapsed + this.startedMashAt\n  }\n\n  private sourcesByClip = new Map<Audible, Source>()\n\n  startContext(): void {\n    // console.log(this.constructor.name, \"startContext\")\n    if (this.bufferSource) throw Errors.internal + 'bufferSource startContext'\n    if (this.playing) throw Errors.internal + 'playing'\n\n    const buffer = Cache.audibleContext.createBuffer(1)\n    this.bufferSource = Cache.audibleContext.createBufferSource(buffer)\n    this.bufferSource.loop = true\n    this.bufferSource.connect(Cache.audibleContext.destination)\n    this.bufferSource.start(0)\n  }\n\n  startPlaying(time : Time, clips: Audible[]) : boolean {\n    if (!this.bufferSource) throw Errors.internal + 'bufferSource startPlaying'\n    if (this.playing) throw Errors.internal + 'playing'\n\n    const { seconds } = time\n    this.playing = true\n    this.startedMashAt = seconds\n\n    this.startedContextAt = Cache.audibleContext.currentTime\n    console.log(this.constructor.name, \"startPlaying startedContextAt\", this.startedContextAt)\n\n    if (!this.createSources(clips)) {\n      this.stopPlaying()\n      return false\n    }\n    // console.log(this.constructor.name, \"startPlaying\", this.startedMashAt, this.startedContextAt)\n    return true\n  }\n\n  // position of masher (in seconds) when startPlaying called\n  private startedMashAt = 0\n\n  // currentTime of context (in seconds) was created when startPlaying called\n  private startedContextAt = 0\n\n  stopPlaying(): void {\n    // console.log(this.constructor.name, \"stopPlaying\")\n    if (!this.playing) return\n\n    this.playing = false\n    if (this.bufferSource) this.bufferSource.stop()\n\n    this.destroySources()\n    this.startedMashAt = 0\n    this.startedContextAt = 0\n\n    if (!this.bufferSource) return\n\n    this.bufferSource.disconnect(Cache.audibleContext.destination)\n    delete this.bufferSource\n  }\n}\n\nexport { Composition }\n","import { CommandType, DefinitionType, DefinitionTypes, EventType, TrackType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Any, InputCommand, InputCommandPromise, Interval, JsonObject, LoadPromise } from \"../../declarations\"\nimport { Default } from \"../../Setup/Default\"\nimport { Is } from \"../../Utilities/Is\"\nimport { TimeRange } from \"../../Utilities/TimeRange\"\nimport { Time } from \"../../Utilities/Time\"\nimport { Track, TrackClass, TrackObject, TrackOptions } from \"../Track\"\nimport { Definition, DefinitionTimes } from \"../Definition/Definition\"\nimport { Clip, ClipDefinition } from \"../Mixin/Clip/Clip\"\nimport { Visible } from \"../Mixin/Visible/Visible\"\nimport { Audible } from \"../Mixin/Audible/Audible\"\nimport { Factory } from \"../../Factory\"\nimport { Composition } from \"../../Playing/Composition/Composition\"\nimport { ChangeAction } from \"../../Editing/Action/ChangeAction\"\nimport { InstanceBase } from \"../Instance\"\nimport { Mash, MashDefinition, MashOptions } from \"./Mash\"\nimport { Id } from \"../../Utilities/Id\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Action } from \"../../Editing/Action/Action\"\nimport { Cache } from \"../../Loading/Cache\"\n\ninterface TimeRangeClips {\n  clips: Clip[]\n  timeRange: TimeRange\n}\nclass MashClass extends InstanceBase implements Mash {\n  constructor(...args: Any[]) {\n    super(...args)\n    this._id ||= Id()\n\n\n    const object = args[0] || {}\n    const {\n      audio,\n      backcolor,\n      label,\n      loop,\n      media,\n      quantize,\n      video,\n      buffer,\n      gain,\n    } = <MashOptions>object\n\n    if (typeof loop === \"boolean\") this.loop = loop\n    if (quantize && Is.aboveZero(quantize)) this.quantize = quantize\n    if (label && Is.populatedString(label)) this.label = label\n    if (backcolor && Is.populatedString(backcolor)) this._backcolor = backcolor\n\n    if (media) media.forEach(definition => {\n      const { id: definitionId, type } = definition\n      if (!(type && Is.populatedString(type))) throw Errors.type + 'Mash.constructor media'\n\n      const definitionType = <DefinitionType>type\n      if (!DefinitionTypes.includes(definitionType)) throw Errors.type + definitionType\n\n      if (!(definitionId && Is.populatedString(definitionId))) {\n        throw Errors.invalid.definition.id + JSON.stringify(definition)\n      }\n\n      return Factory[definitionType].definition(definition)\n    })\n\n    if (audio) this.audio.push(...audio.map((track, index) =>\n      new TrackClass(this.trackOptions(track, index, TrackType.Audio))\n    ))\n    else this.audio.push(new TrackClass({ type: TrackType.Audio }))\n    if (video) this.video.push(...video.map((track, index) =>\n      new TrackClass(this.trackOptions(track, index, TrackType.Video))\n    ))\n    else this.video.push(new TrackClass({ type: TrackType.Video }))\n\n    if (buffer && Is.aboveZero(buffer)) this.buffer = buffer\n    if (typeof gain !== \"undefined\" && Is.positive(gain)) this._gain = gain\n\n    this.setDrawInterval()\n    // console.debug(this.constructor.name, \"constructor\", this.identifier, this)\n  }\n\n  addClipsToTrack(clips: Clip[], trackIndex = 0, insertIndex = 0, frames? : number[]): void {\n    // console.log(this.constructor.name, \"addClipsToTrack\", trackIndex, insertIndex)\n    this.assureClipsHaveFrames(clips)\n    const [clip] = clips\n    const newTrack = this.clipTrackAtIndex(clip, trackIndex)\n    if (!newTrack) throw Errors.invalid.track\n\n    const oldTrack = Is.positive(clip.track) && this.clipTrack(clip)\n\n    this.emitIfFramesChange(() => {\n      if (oldTrack && oldTrack !== newTrack) {\n        // console.log(\"addClipsToTrack\", newTrack.index, oldTrack.index)\n        oldTrack.removeClips(clips)\n      }\n      if (frames) clips.forEach((clip, index) => { clip.frame = frames[index] })\n      newTrack.addClips(clips, insertIndex)\n    })\n  }\n\n  addTrack(trackType: TrackType): Track {\n    const array = this[trackType]\n    // console.log(\"addTrack\", trackType, array.length)\n    const options = { type: trackType, index: array.length }\n    const track = new TrackClass(options)\n    array.push(track)\n    Cache.audibleContext.emit(EventType.Track)\n    return track\n  }\n\n  private assureClipsHaveFrames(clips: Clip[]): void {\n    clips.filter(clip => !Is.positive(clip.frames)).forEach(clip => {\n      const definition = <ClipDefinition>clip.definition\n      clip.frames = definition.frames(this.quantize)\n    })\n  }\n\n  audio: Track[] = []\n\n  private _backcolor = Default.mash.backcolor\n\n  get backcolor(): string { return this._backcolor }\n\n  set backcolor(value: string) {\n    this._backcolor = value\n    if (this._composition) this.composition.backcolor = value\n  }\n  private _buffer = Default.mash.buffer\n\n  get buffer(): number { return this._buffer }\n\n  set buffer(value: number) {\n    if (!Is.aboveZero(value)) throw Errors.invalid.argument + 'buffer ' + value\n\n    if (this._buffer !== value) {\n      this._buffer = value\n      if (this._composition) this.composition.buffer = value\n    }\n  }\n\n  get bufferFrames(): number { return this.buffer * this.quantize }\n\n  private bufferStart() {\n    if (this._bufferTimer) return\n\n    this._bufferTimer = setInterval(() => {\n      // console.debug(this.constructor.name, \"bufferTimer calling load\")\n      this.loadPromise\n    }, Math.round((this.buffer * 1000) / 2))\n  }\n\n  private bufferStop() {\n    if (!this._bufferTimer) return\n\n    clearInterval(this._bufferTimer)\n    delete this._bufferTimer\n  }\n\n  private get bufferTime(): Time { return Time.fromSeconds(this.buffer) }\n\n  private _bufferTimer?: Interval\n\n  changeClipFrames(clip: Clip, value: number): void {\n    let limitedValue = Math.max(1, value) // frames value must be > 0\n\n    const max = clip.maxFrames(this.quantize) // only audible returns nonzero\n    if (Is.aboveZero(max)) limitedValue = Math.min(max, limitedValue)\n\n    const track = this.clipTrack(clip)\n    this.emitIfFramesChange(() => {\n      clip.frames = limitedValue\n      track.sortClips(track.clips)\n    })\n  }\n\n  changeClipTrimAndFrames(clip: Audible, value: number, frames: number): void {\n    let limitedValue = Math.max(0, value)\n\n    const max = clip.maxFrames(this.quantize, 1) // do not remove last frame\n    if (Is.aboveZero(max)) limitedValue = Math.min(max, limitedValue)\n\n    const newFrames = frames - limitedValue\n    const track = this.clipTrack(clip)\n    this.emitIfFramesChange(() => {\n      clip.trim = limitedValue\n      clip.frames = newFrames\n      track.sortClips(track.clips)\n    })\n  }\n\n  clearDrawInterval():void {\n    if (this.drawInterval) {\n      clearInterval(this.drawInterval)\n      this.drawInterval = undefined\n    }\n  }\n\n  clipIntersects(clip: Clip, range: TimeRange): boolean {\n    return clip.timeRange(this.quantize).intersects(range)\n  }\n\n  clipTrack(clip: Clip): Track {\n    return this.clipTrackAtIndex(clip, clip.track)\n  }\n\n  clipTrackAtIndex(clip: Clip, index = 0): Track {\n    return this.trackOfTypeAtIndex(clip.trackType, index)\n  }\n\n  get clips(): Clip[] { return this.clipsInTracks() }\n\n  private clipsAtTimes(start: Time, end?: Time): Clip[] {\n    const objects: Clip[] = this.clipsVisible(start, end)\n    if (end) objects.push(...this.clipsAudible(start, end))\n    return [...new Set(objects)]\n  }\n\n  private clipsAudible(start: Time, end?: Time): Audible[] {\n    const range = end && TimeRange.fromTimes(start, end)\n    return this.clipsAudibleInTracks.filter(clip => {\n      const clipRange = clip.timeRange(this.quantize)\n      if (range) return clipRange.intersects(range)\n\n      return clipRange.intersectsTime(start)\n    })\n  }\n\n  private clipsInTracks(tracks?: Track[]): Clip[] {\n    const clipTracks = tracks || this.tracks\n    return clipTracks.map(track => track.clips).flat()\n  }\n\n  private filterIntersecting(clips: Clip[], timeRange: TimeRange): Clip[] {\n    const range = timeRange.scale(this.quantize)\n    return clips.filter(clip => this.clipIntersects(clip, range))\n\n  }\n  private get clipsAudibleInTracks(): Audible[] {\n    return <Audible[]> this.clipsInTracks().filter(clip => clip.audible && !clip.muted)\n  }\n\n  private clipsAudibleInTimeRange(timeRange: TimeRange): Audible[] {\n    return <Audible[]> this.filterIntersecting(this.clipsAudibleInTracks, timeRange)\n  }\n\n  private get clipsVideo(): Visible[] { return <Visible[]>this.video.flatMap(track => track.clips) }\n\n  clipsVisible(start: Time, end?: Time): Visible[] {\n    const range = end && TimeRange.fromTimes(start, end)\n    return this.clipsVideo.filter(clip => {\n      const clipRange = clip.timeRange(this.quantize)\n      if (range) return clipRange.intersects(range)\n\n      return clipRange.intersectsTime(start)\n    })\n  }\n\n  private clipsVisibleAtTime(time: Time): Visible[] {\n    return this.clipsVisibleInTimeRange(TimeRange.fromTime(time))\n  }\n\n  private clipsVisibleInTimeRange(timeRange: TimeRange): Visible[] {\n    const range = timeRange.scale(this.quantize)\n    return this.clipsVideo.filter(clip => this.clipIntersects(clip, range))\n  }\n\n  private compositeAudible(clips? : Audible[]): boolean {\n    const audibleClips = clips || this.clipsAudibleInTimeRange(this.timeRangeToBuffer)\n    return this.composition.compositeAudible(audibleClips)\n  }\n\n  private compositeAudibleClips(clips: Clip[]): void {\n    if (this._paused) return\n\n    const audibleClips = clips.filter(clip => clip.audible && !clip.muted)\n    if (audibleClips.length) this.compositeAudible(<Audible[]> audibleClips)\n  }\n\n  private _composition?: Composition\n\n  get composition(): Composition {\n    if (!this._composition) {\n      const options = {\n        backcolor: this.backcolor,\n        buffer: this.buffer,\n        gain: this.gain,\n        quantize: this.quantize,\n      }\n      this._composition = new Composition(options)\n    }\n    return this._composition\n  }\n\n  compositeVisible(): void {\n    const { time } = this\n    this.composition.compositeVisible(time, this.clipsVisibleAtTime(time))\n  }\n\n  compositeVisibleRequest(clips?: Visible[]): void {\n    const { time, composition } = this\n    composition.compositeVisibleRequest(time, clips || this.clipsVisibleAtTime(time))\n  }\n\n  declare definition: MashDefinition\n\n  destroy(): void {\n    this.paused = true\n    this.clearDrawInterval()\n    delete this._composition\n  }\n\n  private drawInterval?: Interval\n\n  private drawTime(time: Time): void {\n    const timeChange = time !== this.time\n    this.drawnTime = time\n    this.compositeVisibleRequest()\n    Cache.audibleContext.emit(timeChange ? EventType.Time : EventType.Loaded)\n  }\n\n  private drawWhileNotPlaying() {\n    const now = performance.now()\n    const ellapsed = now - this.drawnSeconds\n    if (ellapsed < 1.0 / this.quantize) return\n\n    this.drawnSeconds = now\n    const { time } = this\n    const clips = this.clipsVisible(time)\n    const streamableClips = clips.filter(clip => clip.definition.streamable)\n    if (!streamableClips.length) return\n\n    const loading = clips.some(clip => clip.clipUrls(this.quantize, time).some(url =>\n      !Cache.cached(url)\n    ))\n    if (loading) return\n\n    this.compositeVisibleRequest()\n  }\n\n  private drawWhilePlaying() {\n    // what time does the audio context think it is?\n    const { seconds } = this.composition\n\n    // what time would masher consider to be in next frame?\n    const nextFrameTime = this.time.withFrame(this.time.frame + 1)\n\n    // are we beyond the end of mash?\n    if (seconds >= this.endTime.seconds) {\n\n      // should we loop back to beginning?\n      if (this.loop) this.seekToTime(this.time.withFrame(0))\n      else {\n        this.paused = true\n        Cache.audibleContext.emit(EventType.Ended)\n      }\n    } else {\n\n      // are we at or beyond the next frame?\n      if (seconds >= nextFrameTime.seconds) {\n\n        const compositionTime = Time.fromSeconds(seconds, this.time.fps)\n        const difference = compositionTime.frame - this.time.frame\n        if (difference > 1) console.debug(this.constructor.name, \"drawWhilePlaying dropped frames\", difference - 1)\n        // go to where the audio context thinks we are\n        this.drawTime(compositionTime)\n      }\n    }\n  }\n\n  drawnSeconds = 0\n\n  drawnTime?: Time\n\n  get duration(): number { return this.endTime.seconds }\n\n  private emitIfFramesChange(method: () => void): void {\n    const origFrames = this.frames\n    method()\n    const { frames } = this\n    if (origFrames !== frames) {\n      Cache.audibleContext.emit(EventType.Duration)\n      if (this.frame > frames) this.seekToTime(Time.fromArgs(frames, this.quantize))\n    }\n  }\n\n  get endTime(): Time { return Time.fromArgs(this.frames, this.quantize) }\n\n  get frame(): number { return this.time.scale(this.quantize, \"floor\").frame }\n\n  get frames(): number {\n    return Math.max(0, ...this.tracks.map(track => track.frames))\n  }\n\n  private _gain = Default.mash.gain\n\n  get gain(): number { return this._gain }\n\n  set gain(value: number) {\n    if (!Is.positive(value)) throw Errors.invalid.argument + 'gain ' + value\n\n    if (this._gain !== value) {\n      this._gain = value\n      this.composition.gain = value\n    }\n  }\n\n  handleAction(action: Action): void {\n    Cache.audibleContext.emit(EventType.Action)\n\n    if (action instanceof ChangeAction) {\n      const changeAction = <ChangeAction>action\n      const { property } = changeAction\n      if (property === \"gain\") {\n        if (this.playing && Is.aboveZero(this.gain)) {\n          this.composition.adjustSourceGain(<Audible>changeAction.target)\n        }\n        return\n      }\n    }\n    this.stopLoadAndDraw()\n  }\n\n  private handleDrawInterval(): void {\n    if (this._playing) this.drawWhilePlaying()\n    else this.drawWhileNotPlaying()\n  }\n\n  private seqmentsAtTimes(type: CommandType, start: Time, end?: Time): TimeRangeClips[] {\n    const fullRangeClips = this.clipsAtTimes(start, end)\n    const startTime = start.scale(this.quantize)\n    if (!end) return [{ clips: fullRangeClips, timeRange: TimeRange.fromTime(startTime) }]\n\n    const result: TimeRangeClips[] = []\n\n    const endTime = end.scale(this.quantize)\n    const fullRange = TimeRange.fromTimes(startTime, endTime)\n    const { times } = fullRange\n    let identifiers = '~'\n    let timeRangeClips: TimeRangeClips\n\n    times.forEach(time => {\n      const timeRange = TimeRange.fromTime(time)\n      const clips = this.filterIntersecting(fullRangeClips, timeRange)\n      const ids = clips.map(clip => clip.identifier).join('~')\n      if (identifiers === ids) {\n        timeRangeClips.timeRange = timeRangeClips.timeRange.addFrames(1)\n      } else {\n        identifiers = ids\n        timeRangeClips = { timeRange, clips }\n        result.push(timeRangeClips)\n      }\n    })\n\n\n    return result\n  }\n\n  private inputCommand(type: CommandType, start: Time, end?: Time): InputCommand {\n    const segments = this.seqmentsAtTimes(type, start, end)\n    return segments.map(({clips, timeRange}) => {\n      const inputCommand: InputCommand = { inputs: []}\n\n      return inputCommand\n    })\n  }\n\n  inputCommandPromise(type: CommandType, start: Time, end?: Time): InputCommandPromise {\n    const promise: InputCommandPromise = new Promise(resolve => {\n      const clips = this.clipsAtTimes(start, end)\n      const loads = clips.map(clip => clip.loadClip(this.quantize, start, end))\n      const promises = loads.filter(Boolean)\n      if (promises.length) Promise.all(promises).then(() => {\n        resolve(this.inputCommand(type, start, end))\n      })\n      else resolve(this.inputCommand(type, start, end))\n    })\n    return promise\n  }\n  get loadPromise(): LoadPromise | undefined {\n    const [start, end] = this.startAndEnd\n    // console.log(this.constructor.name, \"load\", start, end)\n    const clips = this.clipsAtTimes(start, end)\n    const loads = clips.map(clip => clip.loadClip(this.quantize, start, end))\n    const promises = loads.filter(Boolean)\n    if (promises.length) return Promise.all(promises).then(() => {\n      this.compositeAudibleClips(clips)\n    })\n\n    this.compositeAudibleClips(clips)\n  }\n\n  get loadUrls(): string[] {\n    const [start, end] = this.startAndEnd\n    // console.log(this.constructor.name, \"load\", start, end)\n    const clips = this.clipsAtTimes(start, end)\n    const urls = clips.flatMap(clip => clip.clipUrls(this.quantize, start, end))\n\n    // console.trace(this.constructor.name, \"loadUrls\", this.identifier, start, end, urls)\n    return urls\n  }\n\n  get loadedDefinitions(): DefinitionTimes {\n    const map = <DefinitionTimes>new Map()\n    const [start, end] = this.startAndEnd\n    this.clipsAtTimes(start, end).forEach(clip => {\n      const { definitions } = clip\n      const times = [clip.definitionTime(this.quantize, start)]\n      if (end) times.push(clip.definitionTime(this.quantize, end))\n\n      definitions.forEach(definition => {\n        if (!map.has(definition)) map.set(definition, [])\n        const definitionTimes = map.get(definition)\n        if (!definitionTimes) throw Errors.internal\n\n        definitionTimes.push(times)\n      })\n    })\n    return map\n  }\n\n  loop = false\n\n  maxTracks(type?: TrackType): number {\n    return type ? this[type].length : this.audio.length + this.video.length\n  }\n\n  get media() : Definition[] {\n    return [...new Set(this.clipsInTracks().flatMap(clip => clip.definitions))]\n  }\n\n  private _paused = true\n\n  get paused() : boolean { return this._paused }\n\n  set paused(value : boolean) {\n    const forcedValue = value || !this.frames\n    // console.log(this.constructor.name, \"set paused\", forcedValue)\n    if (this._paused === forcedValue) return\n\n    this._paused = forcedValue\n    if (forcedValue) {\n      this.playing = false\n      this.bufferStop()\n      if (this._bufferTimer) {\n        clearInterval(this._bufferTimer)\n        delete this._bufferTimer\n      }\n      Cache.audibleContext.emit(EventType.Pause)\n    } else {\n      this.composition.startContext()\n      this.bufferStart()\n      const promise = this.loadPromise\n      if (promise) promise.then(() => { this.playing = true })\n      else this.playing = true\n      // console.log(\"Mash emit\", EventType.Play)\n      Cache.audibleContext.emit(EventType.Play)\n    }\n  }\n\n  private _playing = false\n\n  get playing() : boolean { return this._playing }\n\n  set playing(value : boolean) {\n    // console.trace(this.constructor.name, \"set playing\", value)\n    if (this._playing !== value) {\n      this._playing = value\n      if (value) {\n        const clips = this.clipsAudibleInTimeRange(this.timeRangeToBuffer)\n        if (!this.composition.startPlaying(this.time, clips)) {\n          // console.log(this.constructor.name, \"set playing\", value, \"audio not cached\", this.time, clips.length)\n          // audio was not cached\n\n          this._playing = false\n          return\n        }\n        Cache.audibleContext.emit(EventType.Playing)\n      } else this.composition.stopPlaying()\n    }\n  }\n\n  removeClipsFromTrack(clips : Clip[]) : void {\n    const [clip] = clips\n    const track = this.clipTrack(clip)\n    this.emitIfFramesChange(() => { track.removeClips(clips) })\n  }\n\n  removeTrack(trackType : TrackType) : void {\n    const array = this[trackType]\n    this.emitIfFramesChange(() => { array.pop() })\n    Cache.audibleContext.emit(EventType.Track)\n  }\n\n  private restartAfterStop(time:Time, paused:boolean, seeking?: boolean): void {\n     if (time === this.time) { // otherwise we must have gotten a seek call\n        if (seeking) {\n          delete this.seekTime\n          Cache.audibleContext.emit(EventType.Seeked)\n        }\n        this.drawTime(time)\n        if (!paused) {\n          this.composition.startContext()\n          this.playing = true\n        }\n      }\n  }\n\n  quantize = Default.mash.quantize\n\n  private seekTime? : Time\n\n  seekToTime(time: Time): LoadPromise | undefined {\n    // console.debug(this.constructor.name, \"seekToTime\", time)\n    if (this.seekTime !== time) {\n      this.seekTime = time\n      Cache.audibleContext.emit(EventType.Seeking)\n      Cache.audibleContext.emit(EventType.Time)\n    }\n    return this.stopLoadAndDraw(true)\n  }\n\n  setDrawInterval():void {\n    this.clearDrawInterval()\n    this.drawInterval = setInterval(() => { this.handleDrawInterval()}, 500 / this.time.fps)\n  }\n\n  get stalled() : boolean { return !this.paused && !this.playing }\n\n  get startAndEnd(): Time[] {\n    const { time } = this\n    const times = [time]\n    if (!this.paused) times.push(time.add(this.bufferTime))\n    return times\n  }\n\n  private stopLoadAndDraw(seeking? : boolean) : LoadPromise | undefined {\n    const { time, paused, playing } = this\n\n    if (playing) this.playing = false\n    const promise = this.loadPromise\n    if (promise) return promise.then(() => { this.restartAfterStop(time, paused, seeking) })\n    this.restartAfterStop(time, paused, seeking)\n  }\n\n  get time() : Time {\n    return this.seekTime || this.drawnTime || Time.fromArgs(0, this.quantize)\n  }\n\n  get timeRange(): TimeRange {\n    return TimeRange.fromTime(this.time, this.endTime.scale(this.time.fps).frame)\n  }\n\n  get timeRangeToBuffer() : TimeRange {\n    const { time, quantize, buffer, paused } = this\n    if (paused) {\n      const singleFrame = TimeRange.fromArgs(time.scale(quantize, 'floor').frame, quantize, 1)\n      // console.log(this.constructor.name, \"timeRangeToBuffer paused\", singleFrame)\n      return singleFrame\n    }\n\n    const frames = TimeRange.fromTimes(time, Time.fromSeconds(buffer + time.seconds, time.fps))\n    // console.log(this.constructor.name, \"timeRangeToBuffer !PAUSED\", frames)\n\n    return frames\n  }\n\n  toJSON() : JsonObject {\n    return {\n      label: this.label,\n      quantize: this.quantize,\n      backcolor: this.backcolor || \"\",\n      id: this.id,\n      media: this.media,\n      audio: this.audio,\n      video: this.video,\n    }\n  }\n\n  trackOfTypeAtIndex(type : TrackType, index = 0) : Track {\n    if (!Is.positive(index)) {\n      console.error(Errors.invalid.track, index, index?.constructor.name)\n      throw Errors.invalid.track\n    }\n    return this[type][index]\n  }\n\n  private trackOptions(object : TrackObject, index : number, type : TrackType) : TrackOptions {\n    const { clips } = object\n    if (!(clips && Is.populatedArray(clips))) return { type, index }\n\n    const objects = clips.map(clip => {\n      const { id } = clip\n      if (!id) throw Errors.id\n\n      const definition = Definitions.fromId(id)\n      const clipWithTrack = { track: index, ...clip }\n      return <Clip> definition.instanceFromObject(clipWithTrack)\n    })\n    this.assureClipsHaveFrames(objects)\n    return { type, index, clips: objects }\n  }\n\n  get tracks() : Track[] { return Object.values(TrackType).map(av => this[av]).flat() }\n\n  video : Track[] = []\n}\n\nexport { MashClass }\n","import { DefinitionBase } from \"../Definition/Definition\"\nimport { Mash, MashObject } from \"./Mash\"\nimport { MashClass } from \"./MashInstance\"\nimport { Any } from \"../../declarations\"\nimport { DataType, DefinitionType } from \"../../Setup/Enums\"\nimport { Property } from \"../../Setup/Property\"\nimport { Definitions } from \"../Definitions/Definitions\"\n\nclass MashDefinitionClass extends DefinitionBase {\n  constructor(...args : Any[]) {\n    super(...args)\n    this.properties.push(new Property({ name: \"backcolor\", type: DataType.Rgba, value: \"#00000000\" }))\n    Definitions.install(this)\n  }\n\n  id = \"com.moviemasher.mash.default\"\n\n  get instance() : Mash {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : MashObject) : Mash {\n    const instance = new MashClass({ ...this.instanceObject, ...object })\n    return instance\n  }\n\n  retain = true\n  type = DefinitionType.Mash\n}\n\nexport { MashDefinitionClass }\n","import { Mash, MashDefinition, MashDefinitionObject, MashOptions } from \"./Mash\"\nimport { Factories } from \"../Factories/Factories\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { MashDefinitionClass } from \"./MashDefinition\"\nimport { DefinitionType } from \"../../Setup/Enums\"\n\nconst MashDefaultId = \"com.moviemasher.mash.default\"\n\nconst mashDefinition = (object : MashDefinitionObject) : MashDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) && Definitions.installed(id) ? id : MashDefaultId\n  return <MashDefinition> Definitions.fromId(idString)\n}\n\nconst mashDefinitionFromId = (id : string) : MashDefinition => {\n  return mashDefinition({ id })\n}\n\nconst mashInstance = (object : MashOptions) : Mash => {\n  const definition = mashDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst mashFromId = (id : string) : Mash => {\n  return mashInstance({ id })\n}\n\nconst mashInitialize = () : void => {\n  new MashDefinitionClass({ id: MashDefaultId })\n}\n\nconst mashDefine = (object : MashDefinitionObject) : MashDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return mashDefinition(object)\n}\n\n/**\n * @internal\n */\nconst mashInstall = (object: MashDefinitionObject): MashDefinition => {\n  const instance = mashDefine(object)\n  instance.retain = true\n  return instance\n}\n\nconst MashFactoryImplementation = {\n  define: mashDefine,\n  install: mashInstall,\n  definition: mashDefinition,\n  definitionFromId: mashDefinitionFromId,\n  fromId: mashFromId,\n  initialize: mashInitialize,\n  instance: mashInstance,\n}\n\nFactories[DefinitionType.Mash] = MashFactoryImplementation\n\nexport {\n  mashInstall,\n  mashDefine,\n  mashDefinition,\n  mashDefinitionFromId,\n  MashFactoryImplementation,\n  mashFromId,\n  mashInitialize,\n  mashInstance,\n}\n","import {\n  AddTrackAction,\n  MoveClipsAction,\n  AddClipToTrackAction,\n  AddEffectAction,\n  ChangeAction,\n  ChangeFramesAction,\n  ChangeTrimAction,\n  SplitAction,\n  FreezeAction,\n  MoveEffectsAction,\n  RemoveClipsAction,\n  Action,\n  ActionObject,\n} from \"../Action\"\nimport { Capitalize } from \"../../Utilities\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { UnknownObject } from \"../../declarations\"\n\n\nconst classes : { [index: string] : typeof Action}= {\n  AddTrack: AddTrackAction,\n  AddClipsToTrack: AddClipToTrackAction,\n  MoveClips: MoveClipsAction,\n  AddEffect: AddEffectAction,\n  Change: ChangeAction,\n  ChangeFrames: ChangeFramesAction,\n  ChangeTrim: ChangeTrimAction,\n  Split: SplitAction,\n  Freeze: FreezeAction,\n  MoveEffects: MoveEffectsAction,\n  RemoveClips: RemoveClipsAction,\n}\n\nclass ActionFactoryClass {\n  createFromObject(object : UnknownObject) : Action {\n    const { type } = object\n    if (typeof type !== \"string\") throw Errors.type + JSON.stringify(object)\n\n    return new classes[Capitalize(type)](<ActionObject><unknown> object)\n  }\n}\n\nconst ActionFactory = new ActionFactoryClass()\n\nexport { ActionFactory }\n","import {\n  Any,\n  LoadPromise,\n  SelectionValue,\n  ScalarValue,\n  SelectionObject,\n  UnknownObject,\n  ContextData,\n  Size\n} from \"../../declarations\"\nimport {\n  ActionType,\n  ClipType,\n  ClipTypes,\n  DefinitionType,\n  EventType,\n  MoveType,\n  TrackType,\n  TransformType,\n  TransformTypes\n} from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Id } from \"../../Utilities/Id\"\nimport { Is } from \"../../Utilities/Is\"\nimport { byFrame } from \"../../Utilities/Sort\"\nimport { Time } from \"../../Utilities/Time\"\nimport { TimeRange } from \"../../Utilities/TimeRange\"\nimport { Action } from \"../../Editing/Action/Action\"\nimport { ActionFactory } from \"../../Editing/Action/ActionFactory\"\nimport { ChangeAction } from \"../../Editing/Action/ChangeAction\"\nimport { Actions } from \"../../Editing/Actions/Actions\"\nimport { Factory } from \"../../Factory/Factory\"\nimport { Definition, DefinitionObject, DefinitionTimes } from \"../Definition/Definition\"\nimport { Definitions } from \"../Definitions\"\nimport { Effect } from \"../Effect/Effect\"\nimport { EffectClass } from \"../Effect/EffectInstance\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { Mash, MashObject, MashOptions } from \"../Mash/Mash\"\nimport { AudibleFile } from \"../Mixin/AudibleFile/AudibleFile\"\nimport { Clip } from \"../Mixin/Clip/Clip\"\nimport { Transformable } from \"../Mixin/Transformable/Transformable\"\nimport { Video } from \"../Video/Video\"\nimport { ClipOrEffect, Masher, MasherAddPromise, MasherObject } from \"./Masher\"\nimport { Default } from \"../../Setup/Default\"\nimport { Cache } from \"../../Loading/Cache\"\n\nclass MasherClass extends InstanceBase implements Masher {\n  [index : string] : unknown\n  constructor(...args : Any[]) {\n    super(...args)\n    this._id ||= Id()\n    const [object] = args\n    const {\n      autoplay,\n      precision,\n      loop,\n      fps,\n      volume,\n      buffer,\n      mash,\n    } = <MasherObject> object\n    if (typeof autoplay !== \"undefined\") this.autoplay = autoplay\n    if (typeof precision !== \"undefined\") this.precision = precision\n    if (typeof loop !== \"undefined\") this._loop = loop\n    if (typeof fps !== \"undefined\") this._fps = fps\n    if (typeof volume !== \"undefined\") this._volume = volume\n    if (typeof buffer !== \"undefined\") this._buffer = buffer\n    if (mash) this.mash = mash\n  }\n\n  private actionCreate(object : UnknownObject) : void {\n    const mash = object.mash || this.mash\n    const actions = object.actions || this.actions\n    const undoSelectedClips = object.undoSelectedClips || this.selectedClips\n    const undoSelectedEffects = object.undoSelectedEffects  || this.selectedEffects\n    const redoSelectedClips = object.redoSelectedClips  || this.selectedClips\n    const redoSelectedEffects = object.redoSelectedEffects  || this.selectedEffects\n\n    const clone : UnknownObject = {\n      ...object,\n      actions,\n      mash,\n      undoSelectedClips,\n      undoSelectedEffects,\n      redoSelectedClips,\n      redoSelectedEffects,\n    }\n    const action = ActionFactory.createFromObject(clone)\n    this.actions.add(action)\n    this.handleAction(this.actions.redo())\n  }\n\n  private _actions? : Actions\n\n  private get actions() : Actions {\n    if (!this._actions) {\n      this._actions = new Actions({ mash: this.mash })\n    }\n    return this._actions\n  }\n\n\n  add(object : DefinitionObject, frameOrIndex = 0, trackIndex = 0) : MasherAddPromise {\n    if (!Is.populatedObject(object)) throw Errors.argument + 'add'\n    const { id } = object\n    const definitionFromId = id && Definitions.installed(id) ? Definitions.fromId(id) : false\n    const type = object.type || (definitionFromId && definitionFromId.type)\n    if (!type) throw Errors.type + 'Masher.add ' + id + JSON.stringify(definitionFromId)\n\n    if (type === DefinitionType.Effect) {\n      const effectDefinition = Factory.effect.definition(object)\n      const effect = effectDefinition.instance\n      return this.addEffect(effect, frameOrIndex).then(() => effect)\n    }\n    const clipType = <ClipType> type\n\n    if (!ClipTypes.includes(clipType)) throw Errors.type + type\n\n    const definitionType = <DefinitionType> type\n    const definition = Factory[definitionType].definition(object)\n\n    const clip = <Clip> definition.instanceFromObject(object)\n\n    return this.addClip(clip, frameOrIndex, trackIndex).then(() => clip)\n  }\n\n  addClip(clip : Clip, frameOrIndex = 0, trackIndex = 0) : LoadPromise {\n    const { trackType } = clip\n\n    const clips = [clip]\n    const options : UnknownObject = {\n      clip,\n      type: ActionType.AddClipsToTrack,\n      redoSelectedClips: clips,\n      trackType,\n    }\n    const track = this.mash.trackOfTypeAtIndex(trackType, trackIndex)\n    const trackCount = this.mash[trackType].length\n    if (track.isMainVideo) {\n      options.insertIndex = frameOrIndex\n      options.createTracks = Math.min(1, Math.max(0, 1 - trackCount))\n    } else {\n      options.trackIndex = trackIndex\n      clip.frame = track.frameForClipsNearFrame(clips, frameOrIndex)\n      options.createTracks = Math.max(0, trackIndex + 1 - trackCount)\n    }\n    this.actionCreate(options)\n    return this.loadMashAndDraw()\n  }\n\n  addEffect(effect : Effect, insertIndex = 0) : LoadPromise {\n    // console.log(this.constructor.name, \"addEffect\", object, index)\n    const { effects } = <Transformable> this.selectedClipOrThrow\n    if (!effects) throw Errors.selection\n\n    const undoEffects = [...effects]\n    const redoEffects = [...effects]\n    const redoSelectedEffects = [effect]\n    redoEffects.splice(insertIndex, 0, effect)\n    const options = {\n      effects,\n      undoEffects,\n      redoEffects,\n      redoSelectedEffects,\n      type: ActionType.MoveEffects\n    }\n    this.actionCreate(options)\n    return this.loadMashAndDraw()\n  }\n\n  addTrack(trackType = TrackType.Video) : void {\n    this.actionCreate({ trackType, type: ActionType.AddTrack })\n  }\n\n  autoplay = Default.masher.autoplay\n\n  private _buffer = Default.masher.buffer\n\n  get buffer() : number { return this._buffer }\n\n  set buffer(value: number) {\n    const number = Number(value)\n    if (this._buffer !== number) {\n      this._buffer = number\n      this.mash.buffer = number\n    }\n  }\n\n  can(method : string) : boolean {\n    const z = this._selectedClips.length\n    switch (method) {\n      case 'save': return this.actions.canSave\n      case 'undo': return this.actions.canUndo\n      case 'redo': return this.actions.canRedo\n      case 'copy': return z > 0\n      case 'cut':\n      case 'remove': return !!z // TODO: check removing won't create transition problem\n      case 'split': return z === 1 && this.clipCanBeSplit(this.selectedClipOrThrow, this.time, this.mash.quantize)\n      case 'freeze': return (\n        z === 1\n        && DefinitionType.Video === this.selectedClipOrThrow.type\n        && this.clipCanBeSplit(this.selectedClipOrThrow, this.time, this.mash.quantize)\n      )\n      default: throw Errors.argument\n    }\n  }\n\n  change(property : string, value? : SelectionValue) : void {\n    if (Is.populatedObject(this.selectedClip)) {\n      if (Is.populatedObject(this.selectedEffect)) {\n        this.changeEffect(property, value, <Effect> this.selectedEffect)\n      }\n      else this.changeClip(property, value, this.selectedClipOrThrow)\n    } else this.changeMash(property, value)\n  }\n\n  changeClip(property : string, value? : SelectionValue, clip? : Clip) : void {\n    // console.log(this.constructor.name, \"changeClip\", property)\n    if (!Is.populatedString(property)) throw Errors.property + \"changeClip \" + property\n\n    const [transform, transformProperty] = property.split(\".\")\n    if (transformProperty) {\n      this.changeTransformer(transform, transformProperty, value)\n      return\n    }\n    const target = clip || this.selectedClipOrThrow\n    const redoValue = typeof value === \"undefined\" ? target.value(property) : value\n\n    if (this.currentActionReusable(target, property)) {\n      const changeAction = <ChangeAction> this.actions.currentAction\n      changeAction.updateAction(<ScalarValue> redoValue)\n      this.handleAction(changeAction)\n      return\n    }\n    const undoValue = typeof value === \"undefined\" ? this.pristineOrThrow[property] : target.value(property)\n    const options : UnknownObject = { property, target, redoValue, undoValue }\n\n    switch (options.property) {\n      case 'frames': {\n        options.type = ActionType.ChangeFrames\n        break\n      }\n      case 'trim': {\n        options.type = ActionType.ChangeTrim\n        // TODO: make sure there's a test for this\n        // not sure where this was derived from - using original clip??\n        options.frames = target.frames + <number> options.undoValue\n        break\n      }\n      default: options.type = ActionType.Change\n    }\n    this.actionCreate(options)\n  }\n\n  changeEffect(property : string, value? : SelectionValue, effect? : Effect) : void {\n    // console.log(this.constructor.name, \"changeEffect\", property)\n    if (!Is.populatedString(property)) throw Errors.property\n\n    const target = effect || this.selectedEffectOrThrow\n\n    const redoValue = typeof value === \"undefined\" ? target.value(property) : value\n\n    if (this.currentActionReusable(target, property)) {\n      const changeAction = <ChangeAction> this.actions.currentAction\n      changeAction.updateAction(redoValue)\n      this.handleAction(changeAction)\n      return\n    }\n    const undoValue = typeof value === \"undefined\" ? this.pristineEffectOrThrow[property] : target.value(property)\n    const options = {\n      type: ActionType.Change, target, property, redoValue, undoValue\n    }\n    this.actionCreate(options)\n  }\n\n  changeMash(property : string, value?: SelectionValue) : void {\n    if (!this.mash.propertyNames.includes(property)) throw Errors.unknownMash\n    if (!this._pristine) throw Errors.internal\n\n    const target = this.mash\n    const redoValue = typeof value === \"undefined\" ? target.value(property) : value\n    if (this.currentActionReusable(target, property)) {\n      const changeAction = <ChangeAction> this.actions.currentAction\n      changeAction.updateAction(redoValue)\n      this.handleAction(changeAction)\n      return\n    }\n\n    const undoValue = typeof value === \"undefined\" ? this._pristine[property] : target.value(property)\n    const options = {\n      target,\n      property,\n      redoValue,\n      undoValue,\n      type: ActionType.Change,\n    }\n    this.actionCreate(options)\n  }\n\n  changeTransformer(type : string, property : string, value?: SelectionValue) : void {\n    // console.log(this.constructor.name, \"changeTransformer\", type, property)\n    if (!Is.populatedString(type)) throw Errors.type + \"changeTransformer \" + type\n    if (!Is.populatedString(property)) throw Errors.property + \"changeTransformer \" + property\n    if (!this._pristine) throw Errors.internal + \"changeTransformer _pristine\"\n\n    const target = this.selectedClipOrThrow\n\n    const transformType = <TransformType> type\n\n    const transformable = <Transformable> target\n\n    // make sure first component is merger or scaler\n    if (!TransformTypes.includes(transformType)) throw Errors.property + \"type \" + type\n    const transformTarget = transformable[transformType]\n    const redoValue = typeof value === \"undefined\" ? transformTarget.value(property)  : value\n    const pristineTarget = this._pristine[transformType]\n    if (typeof pristineTarget !== \"object\") throw Errors.internal + JSON.stringify(this._pristine)\n\n    const undoValue = pristineTarget[property]\n    if (typeof undoValue === \"undefined\") throw Errors.property + 'pristine ' + property + JSON.stringify(pristineTarget)\n\n    const options : UnknownObject = { property, target: transformTarget, redoValue, undoValue, type: ActionType.Change }\n\n\n    if (this.currentActionReusable(transformTarget, property)) {\n      const changeAction = <ChangeAction> this.actions.currentAction\n      changeAction.updateAction(redoValue)\n      this.handleAction(changeAction)\n      return\n    }\n    this.actionCreate(options)\n  }\n\n  get clip(): Clip | undefined {\n    return Is.populatedObject(this.selectedClip) ? <Clip> this.selectedClip : undefined\n  }\n\n  set clip(value: Clip | undefined) { this.selectedClips = value ? [value] : [] }\n\n  private clipCanBeSplit(clip : Clip, time : Time, quantize : number) : boolean {\n    if (!Is.object(clip)) return false\n\n    // true if now intersects clip time, but is not start or end frame\n    const range = TimeRange.fromTime(time)\n    const clipRange = clip.timeRange(quantize)\n\n    // ranges must intersect\n    if (!clipRange.intersects(range)) return false\n\n    const scaled = range.scale(clipRange.fps)\n    if (scaled.frame === clipRange.frame) return false\n    if (scaled.end === clipRange.end) return false\n\n    return true\n  }\n\n  get clips(): Clip[] { return this.mash.clips }\n\n  private currentActionReusable(target : unknown, property : string) : boolean {\n    if (!this.actions.currentActionLast) return false\n\n    const action = this.actions.currentAction\n    if (!(action instanceof ChangeAction)) return false\n\n    return action.target === target && action.property === property\n  }\n\n  get currentTime() : number { return this.mash.drawnTime ? this.mash.drawnTime.seconds : 0 }\n\n  get definitions() : Definition[] { return this.mash.media }\n\n  // call when player removed from DOM\n  destroy() : void { Factory.masher.destroy(this) }\n\n  get duration() : number { return this.mash.duration }\n\n  get effect(): Effect | undefined {\n    return Is.populatedObject(this.selectedEffect) ? <Effect> this.selectedEffect : undefined\n  }\n\n  set effect(value: Effect | undefined) { this.selectedEffects = value ? [value] : [] }\n\n  private get endTime() : Time { return this.mash.endTime.scale(this.fps, 'floor') }\n\n  get eventTarget(): EventTarget { return Cache.audibleContext.context }\n\n  private filterClipSelection(value : Clip | Clip[]) : Clip[] {\n    const clips : Clip[] = Array.isArray(value) ? value : [value]\n\n    const [firstClip] = clips\n    if (!firstClip) return []\n\n    const { trackType, track } = firstClip\n\n    //  must all be on same track\n    const trackClips = clips.filter(clip => (\n      clip.track === track && clip.trackType === trackType\n    )).sort(byFrame)\n\n    if (track || trackType === TrackType.Audio) return trackClips\n\n    // must be abutting each other on main track\n    let abutting = true\n    return trackClips.filter((clip : Clip, index : number) => {\n      if (!abutting) return false\n\n      if (index === trackClips.length - 1) return true\n\n      abutting = clip.frame + clip.frames === trackClips[index + 1].frame\n      return true\n    })\n  }\n\n  private _fps = Default.masher.fps\n\n  get fps() : number { return this._fps || this.mash.quantize }\n\n  set fps(value: number) {\n    const number = Number(value)\n    // setting to zero means fallback to mash rate\n    if (this._fps !== number) {\n      this._fps = number\n      Cache.audibleContext.emit(EventType.Fps)\n      this.time = this.time.scale(this.fps)\n    }\n  }\n  get frame() : number { return this.time.frame }\n\n  set frame(value : number) { this.goToTime(Time.fromArgs(Number(value), this.fps)) }\n\n  get frames() : number { return this.endTime.frame }\n\n  freeze() : void {\n    const clip = this.selectedClipOrThrow\n    if (!this.clipCanBeSplit(clip, this.time, this.mash.quantize)) {\n      throw Errors.invalid.action\n    }\n    if (DefinitionType.Video !== clip.type) {\n      throw Errors.invalid.action\n    }\n    const freezeClip = <Video> clip\n    const scaled = this.time.scale(this.mash.quantize)\n    const trackClips = this.mash.clipTrack(freezeClip).clips\n    const insertClip = freezeClip.copy\n    const frozenClip = freezeClip.copy\n\n    const options = {\n      frames: freezeClip.frames - (scaled.frame - freezeClip.frame),\n      freezeClip,\n      frozenClip,\n      insertClip,\n      trackClips,\n      redoSelectedClips: [frozenClip],\n      index: 1 + trackClips.indexOf(freezeClip),\n      type: ActionType.Freeze,\n    }\n\n    frozenClip.frame = scaled.frame\n    frozenClip.frames = 1\n    frozenClip.trim = freezeClip.trim + (scaled.frame - freezeClip.frame)\n    insertClip.frame = scaled.frame + 1\n    insertClip.frames = options.frames - 1\n    insertClip.trim = frozenClip.trim + 1\n\n    this.actionCreate(options)\n  }\n\n  private get gain() : number { return this.muted ? 0.0 : this.volume }\n\n  goToTime(value?: Time): LoadPromise {\n    const { fps } = this\n    const time = value ? value.scaleToFps(fps) : Time.fromArgs(0, fps)\n    const min = time.min(this.endTime)\n    if (value && min.equalsTime(this.time)) return Promise.resolve()\n\n    const promise = this.mash.seekToTime(min)\n    if (promise) return promise\n\n    return Promise.resolve()\n  }\n\n  private handleAction(action : Action) : void {\n    this.mash.handleAction(action)\n    this.selectedClips = action.selectedClips\n    this.selectedEffects = action.selectedEffects\n  }\n\n  get imageData() : ContextData { return Cache.visibleContext.imageData }\n\n  get imageSize() : Size { return Cache.visibleContext.size }\n\n  set imageSize(value : Size) {\n    const { width, height } = value\n    if (!(Is.aboveZero(width) && Is.aboveZero(height))) throw Errors.invalid.size\n\n    Cache.visibleContext.size = value\n    this.loadMashAndDraw()\n  }\n\n  isSelected(object : ClipOrEffect) : boolean {\n    if (object instanceof EffectClass) return this.selectedEffects.includes(object)\n\n    return this.selectedClips.includes(<Clip> object)\n  }\n\n  private loadMashAndDraw(): LoadPromise {\n    const promise = this.mash.loadPromise\n    if (promise) return promise.then(() => {\n      this.mash.compositeVisible()\n    })\n\n    this.mash.compositeVisible()\n    return Promise.resolve()\n  }\n\n  get loadedDefinitions() : DefinitionTimes { return this.mash.loadedDefinitions }\n\n  private _loop = Default.masher.loop\n\n  get loop() : boolean { return this._loop }\n\n  set loop(value: boolean) {\n    const boolean = !!value\n    this._loop = boolean\n    if (this._mash) this.mash.loop = boolean\n  }\n\n  private _mash? : Mash\n\n  get mash() : Mash {\n    if (!this._mash) {\n      // console.trace(\"get mash\")\n      this._mash = Factory.mash.instance(this.mashOptions())\n    }\n    return this._mash\n  }\n\n  set mash(object: Mash) {\n    if (this._mash === object) return\n    console.log(this.constructor.name, \"mash=\", object.identifier)\n    this.paused = true\n    if (this._mash) this._mash.destroy()\n\n    this._selectedEffects = []\n    this._mash = object\n    this._mash.buffer = this.buffer\n    this._mash.gain = this.gain\n    this._mash.loop = this.loop\n    if (this._actions) {\n      this._actions.destroy()\n      this._actions.mash = this._mash\n    }\n\n    this.selectedClips = [] // so mash gets copied into _pristine\n\n    Cache.audibleContext.emit(EventType.Mash)\n    Cache.audibleContext.emit(EventType.Track)\n    Cache.audibleContext.emit(EventType.Duration)\n    Cache.audibleContext.emit(EventType.Action)\n\n    this.goToTime()\n    if (this.autoplay) this.paused = false\n  }\n\n  private mashOptions(mashObject : MashObject = {}) : MashOptions {\n    return {\n      ...mashObject,\n      buffer: this.buffer,\n      gain: this.gain,\n      loop: this.loop,\n    }\n  }\n\n  move(objectOrArray : ClipOrEffect | ClipOrEffect[], moveType : MoveType, frameOrIndex = 0, trackIndex = 0) : void {\n    if (!Is.object(objectOrArray)) throw Errors.argument + 'move'\n\n    if (moveType === MoveType.Effect) {\n      this.moveEffects(<Effect | Effect[]> objectOrArray, frameOrIndex)\n      return\n    }\n\n    this.moveClips(<Clip | Clip[]>objectOrArray, frameOrIndex, trackIndex)\n  }\n\n  moveClips(clipOrArray : Clip | Clip[], frameOrIndex = 0, trackIndex = 0) : void {\n    // console.log(\"moveClips\", \"frameOrIndex\", frameOrIndex, \"trackIndex\", trackIndex)\n    if (!Is.positive(frameOrIndex)) throw Errors.argument + 'moveClips frameOrIndex'\n    if (!Is.positive(trackIndex)) throw Errors.argument + 'moviClips trackIndex'\n\n    const clips = this.filterClipSelection(clipOrArray)\n    if (!Is.populatedArray(clips)) throw Errors.argument + 'moveClips clips'\n\n    const [firstClip] = clips\n    const { trackType, track: undoTrackIndex } = firstClip\n    const options : Any = {\n      clips,\n      trackType,\n      trackIndex,\n      undoTrackIndex,\n      type: ActionType.MoveClips\n    }\n\n    const redoTrack = this.mash.trackOfTypeAtIndex(trackType, trackIndex)\n    const undoTrack = this.mash.trackOfTypeAtIndex(trackType, undoTrackIndex)\n    const currentIndex = redoTrack.clips.indexOf(firstClip)\n\n    if (redoTrack.isMainVideo) options.insertIndex = frameOrIndex\n    if (undoTrack.isMainVideo) {\n      options.undoInsertIndex = currentIndex\n      if (frameOrIndex < currentIndex) options.undoInsertIndex += clips.length\n    }\n\n    if (!(redoTrack.isMainVideo && undoTrack.isMainVideo)) {\n      const frames = clips.map(clip => clip.frame)\n      const insertFrame = redoTrack.frameForClipsNearFrame(clips, frameOrIndex)\n      const offset = insertFrame - firstClip.frame\n      if (!offset) return // because there would be no change\n\n      options.undoFrames = frames\n      options.redoFrames = frames.map(frame => frame + offset)\n    }\n    this.actionCreate(options)\n  }\n\n  moveEffects(effectOrArray : Effect | Effect[], index = 0) : void {\n    // console.log(this.constructor.name, \"moveEffects\", effectOrArray, index)\n    if (!Is.positive(index)) throw Errors.argument\n\n    const array = Array.isArray(effectOrArray) ? effectOrArray : [effectOrArray]\n    const moveEffects = array.filter(effect => effect instanceof EffectClass)\n    if (!Is.populatedArray(moveEffects)) throw Errors.argument\n\n    const { effects } = <Transformable> this.selectedClipOrThrow\n    const undoEffects = [...effects]\n\n    const redoEffects : Effect[] = []\n    undoEffects.forEach((effect, i) => {\n      if (i === index) redoEffects.push(...moveEffects)\n      if (moveEffects.includes(effect)) return\n\n      redoEffects.push(effect)\n    })\n\n    const options = {\n      effects, undoEffects, redoEffects, type: ActionType.MoveEffects\n    }\n    // console.log(this.constructor.name, \"moveEffects\", options)\n    this.actionCreate(options)\n  }\n\n  private _muted = false\n\n  get muted() : boolean { return this._muted }\n\n  set muted(value: boolean) {\n    const boolean = !!value\n    if (this._muted !== boolean) {\n      this._muted = boolean\n      this.mash.gain = this.gain\n    }\n  }\n\n  pause() : void { this.paused = true }\n\n  private _paused = true\n\n  get paused() : boolean { return this.mash.paused }\n\n  set paused(value : boolean) { if (this._mash) this.mash.paused = !!value }\n\n  play() : void { this.paused = false }\n\n  get position() : number {\n    let per = 0\n    if (this.time.frame) {\n      per = this.time.seconds / this.duration\n      if (per !== 1) per = parseFloat(per.toFixed(this.precision))\n    }\n    return per\n  }\n\n  set position(value : number) {\n    this.goToTime(Time.fromSeconds(this.duration * Number(value), this.fps))\n  }\n\n  get positionStep() : number {\n    return parseFloat(`0.${\"0\".repeat(this.precision - 1)}1`)\n  }\n\n  precision = Default.masher.precision\n\n  private _pristine? : SelectionObject\n\n  private get pristineOrThrow() {\n    if (!this._pristine) throw Errors.internal\n    return this._pristine\n  }\n\n  private _pristineEffect? : SelectionObject\n\n  private get pristineEffectOrThrow() {\n    if (!this._pristineEffect) throw Errors.internal\n    return this._pristineEffect\n  }\n\n  redo() : void { if (this.actions.canRedo) this.handleAction(this.actions.redo()) }\n\n  remove(objectOrArray : ClipOrEffect | ClipOrEffect[], moveType : MoveType) : void {\n    if (!Is.object(objectOrArray)) throw Errors.argument\n\n    if (moveType === MoveType.Effect) {\n      this.removeEffects(<Effect[]> objectOrArray)\n      return\n    }\n\n    this.removeClips(<Clip[]> objectOrArray)\n  }\n\n  removeClips(clipOrArray : Clip | Clip[]) : void {\n    const clips = this.filterClipSelection(clipOrArray)\n    if (!Is.populatedArray(clips)) throw Errors.argument\n\n    const [firstClip] = clips\n    const track = this.mash.clipTrack(firstClip)\n    const options = {\n      redoSelectedClips: [],\n      clips,\n      track,\n      index: track.clips.indexOf(firstClip),\n      type: ActionType.RemoveClips\n    }\n    this.actionCreate(options)\n  }\n\n  removeEffects(effectOrArray : Effect | Effect[]) : void {\n    const array = Array.isArray(effectOrArray) ? effectOrArray : [effectOrArray]\n    const removeEffects = array.filter(effect => effect instanceof EffectClass)\n    if (!Is.populatedArray(removeEffects)) throw Errors.argument\n\n    const { effects } = <Transformable> this.selectedClipOrThrow\n    const undoEffects = [...effects]\n    const redoEffects = effects.filter(effect => !removeEffects.includes(effect))\n\n    const options = {\n      redoSelectedEffects: [],\n      effects,\n      undoEffects,\n      redoEffects,\n      type: ActionType.MoveEffects\n    }\n    this.actionCreate(options)\n  }\n\n  save() : void { this.actions.save() }\n\n  select(object : ClipOrEffect | undefined, toggleSelected? : boolean) : void {\n    if (!object) {\n      this.selectedClips = []\n      return\n    }\n\n    if (object instanceof EffectClass) {\n      this.selectEffect(object, toggleSelected)\n      return\n    }\n\n    const { type } = object\n\n    if (type === DefinitionType.Mash) {\n      this.selectMash()\n      return\n    }\n\n    this.selectClip(<Clip> object, toggleSelected)\n  }\n\n  get selectedClipsOrEffects() : Clip[] | Effect[] {\n    return this.selectedEffects.length ? this.selectedEffects : this.selectedClips\n  }\n\n  selectClip(clip : Clip | undefined, toggleSelected? : boolean) : void {\n    const array : Clip[] = []\n    if (clip) {\n      if (toggleSelected) {\n        array.push(...this.selectedClips)\n        const index = this.selectedClips.indexOf(clip)\n        if (index > -1) array.splice(index, 1)\n        else array.push(clip)\n      } else if (this.selectedClips.includes(clip)) array.push(...this.selectedClips)\n      else array.push(clip)\n    }\n    this.selectedClips = array\n  }\n\n  selectEffect(effect : Effect | undefined, toggleSelected? : boolean) : void {\n    const array : Effect[] = []\n    if (effect) {\n      if (toggleSelected) {\n        array.push(...this.selectedEffects)\n        const index = this.selectedEffects.indexOf(effect)\n        if (index > -1) array.splice(index, 1)\n        else array.push(effect)\n      } else array.push(effect)\n    }\n    this.selectedEffects = array\n  }\n\n  selectMash() : void {\n    this.selectedClips = []\n  }\n\n  get selected(): Clip | Effect | Mash {\n    const effect = this.selectedEffect\n    if (Is.populatedObject(effect)) return <Effect> effect\n\n    return this.selectedClipOrMash\n  }\n\n  get selectedClip() : Clip | UnknownObject {\n    if (this._selectedClips.length === 1) return this.selectedClipOrThrow\n\n    return this.selectedClipObject\n  }\n\n  set selectedClip(value : Clip | UnknownObject) {\n    if (value && Is.populatedObject(value)) {\n      const clip = <Clip> value\n      const { type } = clip\n      const clipType = <ClipType> String(type)\n\n      if (!ClipTypes.includes(clipType)) {\n        // console.warn(this.constructor.name, \"set selectedClip invalid type\", value)\n        return\n      }\n      this.selectedClips = [clip]\n    } else this.selectedClips = []\n  }\n\n  private selectedClipObject = {}\n\n  get selectedClipOrMash() : Clip | Mash {\n    const value = this.selectedClip\n    if (Is.populatedObject(value)) return this.selectedClipOrThrow\n\n    return this.mash\n  }\n\n  private get selectedClipOrThrow() : Clip {\n    const clip = this._selectedClips[0]\n    if (!clip) throw Errors.selection\n\n    return clip\n  }\n\n  private _selectedClips : Clip[] = []\n\n  get selectedClips() : Clip[] { return this._selectedClips }\n\n  set selectedClips(value: Clip[]) {\n    const newSelectedClips = this.filterClipSelection(value)\n    const newPristine = this.selectedClipOrMash.propertyValues\n\n    const changed = this._selectedClips !== newSelectedClips\n    if (changed) {\n      this._selectedClips = newSelectedClips\n      this._pristine = newPristine\n      if (this.selectedEffects.length) {\n        this.selectedEffects = []\n      } else {\n        Cache.audibleContext.emit(EventType.Selection)\n      }\n    }\n  }\n\n  get selectedEffect() : Effect | UnknownObject {\n    if (this._selectedEffects.length !== 1) return {}\n\n    return this._selectedEffects[0]\n  }\n\n  set selectedEffect(value: Effect | UnknownObject) {\n    if (value && Is.populatedObject(value)) {\n      const effect = <Effect>value\n      const { type } = effect\n      if (type !== DefinitionType.Effect) return\n\n      this.selectedEffects = [effect]\n    }\n    else this.selectedEffects = []\n  }\n\n  get selectedEffectOrThrow() : Effect {\n    const effect = this.selectedEffect\n    if (!Is.populatedObject(effect)) throw Errors.selection\n    return <Effect> effect\n  }\n\n  private _selectedEffects : Effect[] = []\n\n  get selectedEffects() : Effect[] { return this._selectedEffects }\n\n  set selectedEffects(value : Effect[]) {\n    const newSelectedEffects = []\n    const newPristineEffect = {}\n    if (value.length) {\n      const { effects } = this.selectedClipOrMash\n      if (effects) {\n        const array = <Effect[]>effects\n        // make sure all selected effects are in the effects of the clip or mash\n        newSelectedEffects.push(...value.filter(effect => array.includes(effect)))\n        if (newSelectedEffects.length === 1) {\n          Object.assign(newPristineEffect, newSelectedEffects[0].propertyValues)\n        }\n      }\n    }\n    const changed = this._selectedEffects !== newSelectedEffects\n    if (changed) {\n      this._selectedEffects = newSelectedEffects\n      this._pristineEffect = newPristineEffect\n      Cache.audibleContext.emit(EventType.Selection)\n    }\n  }\n\n  get selectionObjects() : SelectionObject[] {\n    const selectedObjects = this.selectedClipsOrEffects\n    const object = selectedObjects.map((object : ClipOrEffect) => object.propertyValues)\n    return object\n  }\n\n  split() : void {\n    const splitClip = this.selectedClipOrThrow\n\n    if (!this.clipCanBeSplit(splitClip, this.time, this.mash.quantize)) {\n      throw Errors.invalid.action\n    }\n\n    const scaled = this.time.scale(this.mash.quantize)\n    const undoFrames = splitClip.frames\n    const redoFrames = scaled.frame - splitClip.frame\n    const insertClip = splitClip.copy\n    insertClip.frames = undoFrames - redoFrames\n    insertClip.frame = scaled.frame\n    if (splitClip.propertyNames.includes(\"trim\")) {\n      (<AudibleFile> insertClip).trim += redoFrames\n    }\n    const trackClips = this.mash.clipTrack(splitClip).clips\n    const options = {\n      type: ActionType.Split,\n      splitClip,\n      insertClip,\n      trackClips,\n      redoFrames,\n      undoFrames,\n      index: 1 + trackClips.indexOf(splitClip),\n      redoSelectedClips: [insertClip],\n      undoSelectedClips: [splitClip],\n    }\n    this.actionCreate(options)\n  }\n\n  get time() : Time { return this.mash.time }\n\n  set time(value: Time) { this.goToTime(value) }\n\n  get timeRange() : TimeRange { return this.mash.timeRange }\n\n  undo() : void { if (this.actions.canUndo) this.handleAction(this.actions.undo()) }\n\n  private _volume = Default.masher.volume\n\n  get volume() : number { return this._volume }\n\n  set volume(value: number) {\n    const number = Number(value)\n    if (this._volume !== number) {\n      if (!Is.positive(number)) throw Errors.invalid.volume\n      this._volume = number\n      if (Is.aboveZero(number)) this.muted = false\n\n      this.mash.gain = this.gain\n    }\n  }\n}\nexport { MasherClass }\n","import { DefinitionBase } from \"../Definition/Definition\"\nimport { Masher, MasherObject } from \"./Masher\"\nimport { MasherClass } from \"./MasherInstance\"\nimport { Any } from \"../../declarations\"\nimport { DataType, DefinitionType } from \"../../Setup/Enums\"\nimport { Property } from \"../../Setup/Property\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Default } from \"../../Setup/Default\"\n\nclass MasherDefinitionClass extends DefinitionBase {\n  constructor(...args : Any[]) {\n    super(...args)\n    this.properties.push(new Property({ name: \"autoplay\", type: DataType.Boolean, value: Default.masher.autoplay }))\n    this.properties.push(new Property({ name: \"precision\", type: DataType.Number, value: Default.masher.precision }))\n    this.properties.push(new Property({ name: \"loop\", type: DataType.Boolean, value: Default.masher.loop }))\n    this.properties.push(new Property({ name: \"fps\", type: DataType.Number, value: Default.masher.fps }))\n    this.properties.push(new Property({ name: \"volume\", type: DataType.Number, value: Default.masher.volume }))\n    this.properties.push(new Property({ name: \"buffer\", type: DataType.Number, value: Default.masher.buffer}))\n    Definitions.install(this)\n  }\n\n  id = \"com.moviemasher.masher.default\"\n\n  get instance() : Masher {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : MasherObject) : Masher {\n    const instance = new MasherClass({ ...this.instanceObject, ...object })\n    return instance\n  }\n\n  retain = true\n\n  type = DefinitionType.Masher\n}\n\nexport { MasherDefinitionClass }\n","import { Masher, MasherDefinition, MasherDefinitionObject, MasherObject } from \"./Masher\"\nimport { Interval } from \"../../declarations\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Factories } from \"../Factories/Factories\"\nimport { Is } from \"../../Utilities/Is\"\nimport { MasherDefinitionClass } from \"./MasherDefinition\"\nimport { Cache } from \"../../Loading/Cache\"\nimport { DefinitionType } from \"../../Setup/Enums\"\n\nconst MasherIntervalTics = 10 * 1000\nconst MasherDefaultId = \"com.moviemasher.masher.default\"\n\nlet MasherInterval : Interval | undefined\n\nconst MasherFactoryMashers : Masher[] = []\n\nconst addMasher = (masher : Masher) => {\n  if (!MasherFactoryMashers.length) masherStart()\n  MasherFactoryMashers.push(masher)\n}\n\nconst masherDestroy = (masher : Masher) : void => {\n  const index = MasherFactoryMashers.indexOf(masher)\n  if (index < 0) return\n\n  MasherFactoryMashers.splice(index, 1)\n  if (!MasherFactoryMashers.length) masherStop()\n}\n\nconst handleInterval = () => {\n  const urls = MasherFactoryMashers.flatMap(masher => masher.mash.loadUrls)\n  Cache.flush(urls)\n\n  const definitions = MasherFactoryMashers.flatMap(masher => masher.mash.media)\n\n  Definitions.map.forEach(definition => {\n    if (definitions.includes(definition) || definition.retain) return\n\n    Definitions.uninstall(definition.id)\n  })\n}\n\nconst masherStart = () => {\n  if (MasherInterval) return\n\n  MasherInterval = setInterval(() => handleInterval(), MasherIntervalTics)\n}\n\nconst masherStop = () => {\n  if (!MasherInterval) return\n\n  clearInterval(MasherInterval)\n  MasherInterval = undefined\n}\n\nconst masherDefinition = (object : MasherDefinitionObject) : MasherDefinition => {\n  const { id } = object\n  const idString = id && Is.populatedString(id) && Definitions.installed(id) ? id : MasherDefaultId\n\n  return <MasherDefinition> Definitions.fromId(idString)\n}\n\nconst masherDefinitionFromId = (id : string) : MasherDefinition => {\n  return masherDefinition({ id })\n}\n\nconst masherInstance = (object: MasherObject = {}): Masher => {\n  // console.log(\"masherInstance\", object)\n  const definition = masherDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  addMasher(instance)\n  return instance\n}\n\nconst masherFromId = (id : string) : Masher => {\n  return masherInstance({ id })\n}\n\nconst masherInitialize = () : void => {\n  new MasherDefinitionClass({ id: MasherDefaultId })\n}\n\nconst masherDefine = (object : MasherDefinitionObject) : MasherDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.invalid.definition.id + 'masherDefine'\n\n  Definitions.uninstall(id)\n  return masherDefinition(object)\n}\n\nconst MasherFactoryImplementation = {\n  define: masherDefine,\n  install: masherDefine,\n  definition: masherDefinition,\n  definitionFromId: masherDefinitionFromId,\n  destroy: masherDestroy,\n  fromId: masherFromId,\n  initialize: masherInitialize,\n  instance: masherInstance,\n}\n\nFactories[DefinitionType.Masher] = MasherFactoryImplementation\n\nexport {\n  masherDefine as masherInstall,\n  masherDefine,\n  masherDefinition,\n  masherDefinitionFromId,\n  masherDestroy,\n  MasherFactoryImplementation,\n  masherFromId,\n  masherInitialize,\n  masherInstance,\n}\n","import { Size } from \"../../declarations\"\nimport { Time } from \"../../Utilities/Time\"\nimport { ContextFactory, VisibleContext } from \"../../Playing\"\nimport { ThemeDefinition } from \"./Theme\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ModularMixin } from \"../Mixin/Modular/ModularMixin\"\nimport { ClipMixin } from \"../Mixin/Clip/ClipMixin\"\nimport { VisibleMixin } from \"../Mixin/Visible/VisibleMixin\"\nimport { TransformableMixin } from \"../Mixin/Transformable/TransformableMixin\"\nimport { LoadPromise } from \"../..\"\n\n\nconst ThemeWithModular = ModularMixin(InstanceBase)\nconst ThemeWithClip = ClipMixin(ThemeWithModular)\nconst ThemeWithVisible = VisibleMixin(ThemeWithClip)\nconst ThemeWithTransformable = TransformableMixin(ThemeWithVisible)\nclass ThemeClass extends ThemeWithTransformable {\n  contextAtTimeToSize(mashTime : Time, quantize: number, dimensions : Size) : VisibleContext | undefined {\n    const context = ContextFactory.toSize(dimensions)\n    const clipTimeRange = this.timeRangeRelative(mashTime, quantize)\n    return this.definition.drawFilters(this, clipTimeRange, context, dimensions)\n  }\n\n  clipUrls(quantize: number, start: Time): string[] {\n    const urls = super.clipUrls(quantize, start) // urls from my effects, etc.\n    urls.push(...this.modularUrls(quantize, start)) // urls from my modular properties\n    return urls\n  }\n\n  declare definition: ThemeDefinition\n\n  loadClip(quantize: number, start: Time, end?: Time): LoadPromise | void {\n    const promises: LoadPromise[] = []\n    const transformablePromise = super.loadClip(quantize, start, end) // my effects, etc.\n    if (transformablePromise) promises.push(transformablePromise)\n    const modularPromise = this.loadModular(quantize, start, end) // my modular properties\n    if (modularPromise) promises.push(modularPromise)\n    switch (promises.length) {\n      case 0: return\n      case 1: return promises[0]\n      default: return Promise.all(promises).then()\n    }\n  }\n}\n\nexport { ThemeClass }\n","import { Theme, ThemeObject } from \"./Theme\"\nimport { ThemeClass } from \"./ThemeInstance\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { ModularDefinitionMixin } from \"../Mixin/Modular/ModularDefinitionMixin\"\nimport { ClipDefinitionMixin } from \"../Mixin/Clip/ClipDefinitionMixin\"\nimport { Any } from \"../../declarations\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { VisibleDefinitionMixin } from \"../Mixin/Visible/VisibleDefinitionMixin\"\nimport { DefinitionType } from \"../../Setup/Enums\"\n\n\nconst ThemeDefinitionWithModular = ModularDefinitionMixin(DefinitionBase)\nconst ThemeDefinitionWithClip = ClipDefinitionMixin(ThemeDefinitionWithModular)\nconst ThemeDefinitionWithVisible = VisibleDefinitionMixin(ThemeDefinitionWithClip)\n\nclass ThemeDefinitionClass extends ThemeDefinitionWithVisible {\n  constructor(...args : Any[]) {\n    super(...args)\n    Definitions.install(this)\n  }\n\n  get instance() : Theme {\n    return this.instanceFromObject(this.instanceObject)\n  }\n\n  instanceFromObject(object : ThemeObject) : Theme {\n    const options = { ...this.instanceObject, ...object }\n    // console.log(\"instanceFromObject\", options)\n    const instance = new ThemeClass(options)\n    return instance\n  }\n\n  type = DefinitionType.Theme\n}\n\nexport { ThemeDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Factories } from \"../Factories\"\nimport { ThemeDefinitionClass } from \"./ThemeDefinition\"\nimport { Theme, ThemeDefinition, ThemeDefinitionObject, ThemeObject } from \"./Theme\"\n\nimport themeColorJson from \"../../DefinitionObjects/theme/color.json\"\nimport themeTextJson from \"../../DefinitionObjects/theme/text.json\"\n\nconst themeDefinition = (object : ThemeDefinitionObject) : ThemeDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  if (Definitions.installed(id)) return <ThemeDefinition> Definitions.fromId(id)\n\n  return new ThemeDefinitionClass({...object, type: DefinitionType.Theme })\n}\n\nconst themeDefinitionFromId = (id : string) : ThemeDefinition => {\n  return themeDefinition({ id })\n}\n\nconst themeInstance = (object : ThemeObject) : Theme => {\n  const definition = themeDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst themeFromId = (id : string) : Theme => {\n  return themeInstance({ id })\n}\n\nconst themeInitialize = () : void => {\n  new ThemeDefinitionClass(themeColorJson)\n  new ThemeDefinitionClass(themeTextJson)\n}\n\nconst themeDefine = (object : ThemeDefinitionObject) : ThemeDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return themeDefinition(object)\n}\n\nconst ThemeFactoryImplementation = {\n  define: themeDefine,\n  install: themeDefine,\n  definition: themeDefinition,\n  definitionFromId: themeDefinitionFromId,\n  fromId: themeFromId,\n  initialize: themeInitialize,\n  instance: themeInstance,\n}\n\nFactories[DefinitionType.Theme] = ThemeFactoryImplementation\n\nexport {\n  themeDefine,\n  themeDefine as themeInstall,\n  themeDefinition,\n  themeDefinitionFromId,\n  ThemeFactoryImplementation,\n  themeFromId,\n  themeInitialize,\n  themeInstance,\n}\n","import { TrackType } from \"../../Setup/Enums\"\nimport { Is, Time } from \"../../Utilities\"\nimport { VisibleContext } from \"../../Playing\"\nimport { TransitionDefinition } from \"./Transition\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ModularMixin } from \"../Mixin/Modular/ModularMixin\"\nimport { Visible } from \"../Mixin/Visible\"\nimport { VisibleMixin } from \"../Mixin/Visible/VisibleMixin\"\nimport { ClipMixin } from \"../Mixin/Clip/ClipMixin\"\nimport { Size } from \"../../declarations\"\n\nconst TransitionWithModular = ModularMixin(InstanceBase)\nconst TransitionWithClip = ClipMixin(TransitionWithModular)\nconst TransitionWithVisible = VisibleMixin(TransitionWithClip)\n\nclass TransitionClass extends TransitionWithVisible {\n  contextAtTimeToSize(_time : Time, _quantize: number, _dimensions : Size) : VisibleContext | undefined {\n    return\n  }\n\n  declare definition : TransitionDefinition\n\n  mergeClipsIntoContextAtTime(clips : Visible[], context : VisibleContext, time : Time, quantize : number, color? : string) : void {\n    // console.log(this.constructor.name, \"mergeClipsIntoContextAtTime\", clips.length, time, quantize, color)\n    if (!Is.aboveZero(clips.length)) return\n\n    this.definition.drawVisibleFilters(clips, this, time, quantize, context, color)\n  }\n\n  trackType = TrackType.Video\n}\n\nexport { TransitionClass }\n","import { Any, JsonObject } from \"../../declarations\"\nimport { DefinitionType } from \"../../Setup/Enums\"\nimport { Time } from \"../../Utilities/Time\"\nimport { byFrame } from \"../../Utilities/Sort\"\nimport { ContextFactory, VisibleContext } from \"../../Playing\"\nimport { TransitionClass } from \"./TransitionInstance\"\nimport { Transition, TransitionObject } from \"./Transition\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { Filter } from \"../Filter/Filter\"\nimport { Visible } from \"../Mixin/Visible/Visible\"\nimport { ModularDefinitionMixin } from \"../Mixin/Modular/ModularDefinitionMixin\"\nimport { ClipDefinitionMixin } from \"../Mixin/Clip/ClipDefinitionMixin\"\nimport { VisibleDefinitionMixin } from \"../Mixin/Visible/VisibleDefinitionMixin\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { TransitionDefinitionObject } from \"./Transition\"\nimport { filterInstance } from \"../Filter\"\nimport { mergerInstance } from \"../Merger/MergerFactory\"\nimport { scalerInstance } from \"../Scaler/ScalerFactory\"\n\nconst TransitionDefinitionWithModular = ModularDefinitionMixin(DefinitionBase)\nconst TransitionDefinitionWithClip = ClipDefinitionMixin(TransitionDefinitionWithModular)\nconst TransitionDefinitionWithVisible = VisibleDefinitionMixin(TransitionDefinitionWithClip)\nclass TransitionDefinitionClass extends TransitionDefinitionWithVisible {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n\n    const { to, from } = <TransitionDefinitionObject> object\n\n    if (to) {\n      const { filters, merger, scaler } = to\n      if (filters) {\n        this.toFilters.push(...filters.map(filter => filterInstance(filter)))\n      }\n      if (merger) this.toMerger = mergerInstance(merger)\n      if (scaler) this.toScaler = scalerInstance(scaler)\n    }\n\n    if (from) {\n      const { filters, merger, scaler } = from\n      if (filters) {\n        this.fromFilters.push(...filters.map(filter => filterInstance(filter)))\n      }\n      if (merger) this.fromMerger = mergerInstance(merger)\n      if (scaler) this.fromScaler = scalerInstance(scaler)\n    }\n\n    Definitions.install(this)\n  }\n\n  drawVisibleFilters(clips : Visible[], transition : Transition, time : Time, quantize: number, context : VisibleContext, color? : string) : void {\n    // console.log(this.constructor.name, \"drawVisibleFilters\", clips.length, transition.id)\n    const { size } = context\n    const sorted = [...clips].sort(byFrame)\n    let fromClip : Visible | undefined = sorted[0]\n    let toClip : Visible | undefined = sorted[1]\n\n    if (!toClip && fromClip.frame >= transition.frame) {\n      toClip = fromClip\n      fromClip = undefined\n    }\n\n    let fromDrawing = ContextFactory.toSize(size)\n    let toDrawing = ContextFactory.toSize(size)\n    if (color) {\n      fromDrawing.drawFill(color)\n      toDrawing.drawFill(color)\n    }\n\n    const range = transition.timeRangeRelative(time, quantize)\n\n    if (fromClip) fromClip.mergeContextAtTime(time, quantize, fromDrawing)\n    this.filters = this.fromFilters\n    fromDrawing = this.drawFilters(transition, range, fromDrawing, size)\n\n    if (toClip) toClip.mergeContextAtTime(time, quantize, toDrawing)\n    this.filters = this.toFilters\n    toDrawing = this.drawFilters(transition, range, toDrawing, size)\n\n    fromDrawing = this.fromScaler.definition.drawFilters(this.fromScaler, range, fromDrawing, size)\n    this.fromMerger.definition.drawFilters(this.fromMerger, range, fromDrawing, size, context)\n    toDrawing = this.toScaler.definition.drawFilters(this.toScaler, range, toDrawing, size)\n    this.toMerger.definition.drawFilters(this.toMerger, range, toDrawing, size, context)\n  }\n\n\n\n  private fromFilters : Filter[] = []\n\n  private fromMerger = mergerInstance({})\n\n  private fromScaler = scalerInstance({})\n\n  get instance() : Transition { return this.instanceFromObject(this.instanceObject) }\n\n  instanceFromObject(object : TransitionObject) : Transition {\n    return new TransitionClass({ ...this.instanceObject, ...object })\n  }\n\n  private toFilters : Filter[] = []\n\n  private toMerger = mergerInstance({})\n\n  private toScaler = scalerInstance({})\n\n  toJSON() : JsonObject {\n    return {\n      ...super.toJSON(),\n      to: { filters: this.toFilters },\n      from: { filters: this.fromFilters },\n    }\n  }\n\n  type = DefinitionType.Transition\n}\n\nexport { TransitionDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { Factories } from \"../Factories/Factories\"\nimport { TransitionDefinitionClass } from \"./TransitionDefinition\"\nimport {\n  Transition, TransitionDefinition, TransitionDefinitionObject, TransitionObject\n} from \"./Transition\"\n\nimport transitionCrossfadeJson from \"../../DefinitionObjects/transition/crossfade.json\"\n\nconst transitionDefinition = (object : TransitionDefinitionObject) : TransitionDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  if (Definitions.installed(id)) return <TransitionDefinition> Definitions.fromId(id)\n\n  return new TransitionDefinitionClass(object)\n}\n\nconst transitionDefinitionFromId = (id : string) : TransitionDefinition => {\n  return transitionDefinition({ id })\n}\n\nconst transitionInstance = (object : TransitionObject) : Transition => {\n  const definition = transitionDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst transitionFromId = (id : string) : Transition => {\n  return transitionInstance({ id })\n}\n\nconst transitionInitialize = () : void => {\n  transitionDefinition(transitionCrossfadeJson)\n}\n\nconst transitionDefine = (object : TransitionDefinitionObject) : TransitionDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return transitionDefinition(object)\n}\n\nconst TransitionFactoryImplementation = {\n  define: transitionDefine,\n  install: transitionDefine,\n  definition: transitionDefinition,\n  definitionFromId: transitionDefinitionFromId,\n  fromId: transitionFromId,\n  initialize: transitionInitialize,\n  instance: transitionInstance,\n}\n\nFactories[DefinitionType.Transition] = TransitionFactoryImplementation\n\nexport {\n  transitionDefine,\n  transitionDefine as transitionInstall,\n  transitionDefinition,\n  transitionDefinitionFromId,\n  TransitionFactoryImplementation,\n  transitionFromId,\n  transitionInitialize,\n  transitionInstance,\n}\n","import { Video, VideoClass, VideoDefinition, VideoObject } from \"./Video\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ClipMixin } from \"../Mixin/Clip/ClipMixin\"\nimport { TransformableMixin } from \"../Mixin/Transformable/TransformableMixin\"\nimport { AudibleMixin } from \"../Mixin/Audible/AudibleMixin\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Default } from \"../../Setup/Default\"\nimport { Any, JsonObject } from \"../../declarations\"\nimport { Time } from \"../../Utilities/Time\"\nimport { AudibleFileMixin } from \"../Mixin/AudibleFile/AudibleFileMixin\"\nimport { VisibleMixin } from \"../Mixin/Visible/VisibleMixin\"\n// import { Errors } from \"../../Setup/Errors\"\n\nconst WithClip = ClipMixin(InstanceBase)\nconst WithAudible = AudibleMixin(WithClip)\nconst WithAudibleFile = AudibleFileMixin(WithAudible)\nconst WithVisible = VisibleMixin(WithAudibleFile)\nconst WithTransformable = TransformableMixin(WithVisible)\n\nconst VideoClassImplementation: VideoClass = class extends WithTransformable {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n    const { speed } = <VideoObject> object\n    if (speed && Is.aboveZero(speed)) this.speed = speed\n  }\n\n  // private loadedAudio? : LoadedAudio\n\n  get copy() : Video { return <Video> super.copy }\n\n  declare definition : VideoDefinition\n\n  definitionTime(quantize : number, time : Time) : Time {\n    const scaledTime = super.definitionTime(quantize, time)\n    if (this.speed === Default.instance.video.speed) return scaledTime\n\n    return scaledTime.divide(this.speed) //, 'ceil')\n  }\n\n  speed = Default.instance.video.speed\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    if (this.speed !== Default.instance.video.speed) object.speed = this.speed\n    return object\n  }\n}\n\nexport { VideoClassImplementation }\n","import { AudibleSource, VisibleSource, Any, JsonObject, LoadPromise, LoadVideoResult } from \"../../declarations\"\nimport { DefinitionType, TrackType, DataType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Default } from \"../../Setup/Default\"\nimport { Property } from \"../../Setup/Property\"\nimport { Time, Times } from \"../../Utilities/Time\"\nimport { TimeRange } from \"../../Utilities/TimeRange\"\nimport { urlAbsolute } from \"../../Utilities/Url\"\nimport { Cache } from \"../../Loading/Cache\"\nimport { LoaderFactory } from \"../../Loading/LoaderFactory\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { VideoClassImplementation } from \"./VideoInstance\"\nimport { Video, VideoDefinitionClass, VideoDefinitionObject, VideoObject } from \"./Video\"\nimport { ClipDefinitionMixin } from \"../Mixin/Clip/ClipDefinitionMixin\"\nimport { VisibleDefinitionMixin } from \"../Mixin/Visible/VisibleDefinitionMixin\"\nimport { AudibleDefinitionMixin } from \"../Mixin/Audible/AudibleDefinitionMixin\"\nimport { AudibleFileDefinitionMixin } from \"../Mixin/AudibleFile/AudibleFileDefinitionMixin\"\nimport { ContextFactory } from \"../../Playing/ContextFactory\"\n\n\nconst WithClip = ClipDefinitionMixin(DefinitionBase)\nconst WithAudible = AudibleDefinitionMixin(WithClip)\nconst WithAudibleFile = AudibleFileDefinitionMixin(WithAudible)\nconst WithVisible = VisibleDefinitionMixin(WithAudibleFile)\n\nconst VideoDefinitionClassImplementation: VideoDefinitionClass = class extends WithVisible {\n  constructor(...args: Any[]) {\n    super(...args)\n    const [object] = args\n    const { url, fps, source } = <VideoDefinitionObject>object\n    if (!url) throw Errors.invalid.definition.url\n\n    this.url = url\n\n    if (source) this.source = source\n    if (fps) this.fps = fps\n\n    this.properties.push(new Property({ name: \"speed\", type: DataType.Number, value: 1.0 }))\n\n    Definitions.install(this)\n  }\n\n  get absoluteUrl(): string { return urlAbsolute(this.url) }\n\n  get cachedOrThrow(): LoadVideoResult {\n    const cached = Cache.get(this.absoluteUrl)\n    if (!cached) throw Errors.internal\n\n    return <LoadVideoResult> cached\n  }\n\n  definitionUrls(_start: Time, _end?: Time): string[] { return [this.absoluteUrl] }\n\n  fps = Default.definition.video.fps\n\n  // private framesArray(start: Time, end?: Time): number[] {\n  //   const frames: number[] = []\n  //   const startFrame = Math.min(this.framesMax, start.scale(this.fps, \"floor\").frame)\n  //   if (end) {\n  //     const endFrame = Math.min(this.framesMax, end.scale(this.fps, \"ceil\").frame)\n  //     for (let frame = startFrame; frame <= endFrame; frame += 1) {\n  //       frames.push(frame)\n  //     }\n  //   } else frames.push(startFrame)\n  //   return frames\n  // }\n\n  // private get framesMax(): number { return Math.floor(this.fps * this.duration) - 2 }\n\n  get instance(): Video { return this.instanceFromObject(this.instanceObject) }\n\n  instanceFromObject(object: VideoObject): Video {\n    return new VideoClassImplementation({ ...this.instanceObject, ...object })\n  }\n\n  framePromise(time: Time, cached: LoadVideoResult): LoadPromise {\n    const { video, sequence } = cached\n    const sourceOrPromise = sequence[time.frame]\n    if (sourceOrPromise instanceof Promise) return sourceOrPromise\n\n    if (sourceOrPromise) return Promise.resolve()\n\n    // console.debug(this.constructor.name, \"framePromise\", time)\n\n    const promise = this.seekPromise(time, video).then(() => {\n      // make sure we don't already have this frame\n      if (sequence[time.frame] && !(sequence[time.frame] instanceof Promise)) {\n        console.debug(this.constructor.name, \"framePromise already captured\", time.toString())\n        return\n      }\n\n      const context = ContextFactory.toSize(video)\n      context.draw(video)\n      sequence[time.frame] = context.canvas\n      console.debug(this.constructor.name, \"framePromise capturing\", time.toString())\n    })\n    sequence[time.frame] = promise\n    return promise\n  }\n\n  needTimes(cached: LoadVideoResult, start: Time, end?: Time): Time[] {\n    const { sequence } = cached\n    const times = end ? TimeRange.fromTimes(start, end).times : [start]\n    return times.filter(time =>\n      !sequence[time.frame] || sequence[time.frame] instanceof Promise\n    )\n  }\n\n  framesPromise(start: Time, end?: Time): LoadPromise {\n    const cached = this.cachedOrThrow\n    const timesNeeded = this.needTimes(cached, start, end)\n    return this.timesPromise(timesNeeded)\n  }\n\n\n  timesPromise(timesNeeded: Time[]): LoadPromise {\n    if (!timesNeeded.length) return Promise.resolve()\n\n    const cached = this.cachedOrThrow\n    // const promises:LoadPromise[] = timesNeeded.map(time => this.framePromise(time, cached))\n\n\n    // return Promise.all(promises).then(() => {})\n    const time = timesNeeded.shift()\n    if (!time) throw Errors.internal\n\n    const first = this.framePromise(time, cached)\n    let framePromise = first\n\n    timesNeeded.forEach(time => {\n      framePromise = framePromise.then(() => this.framePromise(time, cached))\n    })\n    return framePromise\n  }\n\n  loadDefinition(quantize: number, startTime: Time, endTime?: Time): LoadPromise | void {\n    const rate = this.fps || quantize\n    const start = startTime.scale(rate)\n    const end = endTime ? endTime.scale(rate) : endTime\n\n    // console.trace(start)\n    const url = this.absoluteUrl\n    if (Cache.cached(url)) {\n      const cached = this.cachedOrThrow\n      const times = this.needTimes(cached, start, end)\n      if (!times.length) {\n        // console.debug(this.constructor.name, \"loadDefinition cached and no times needed\")\n        return\n      }\n      console.debug(this.constructor.name, \"loadDefinition cached and returning promises\", times.join(', '))\n      return this.timesPromise(times)\n    }\n\n    const promise: LoadPromise = Cache.caching(url) ? Cache.get(url) : LoaderFactory.video().loadUrl(url)\n    if (Cache.caching(url)) console.debug(this.constructor.name, \"loadDefinition caching and returning framesPromise\", start, end)\n    else console.debug(this.constructor.name, \"loadDefinition uncached and returning framesPromise\", start, end)\n\n    return promise.then(() => this.framesPromise(start, end))\n  }\n\n  loadedAudible(): AudibleSource | undefined {\n    const cached: LoadVideoResult | undefined = Cache.get(this.absoluteUrl)\n    if (!cached) return\n\n    const { audio } = cached\n    return Cache.audibleContext.createBufferSource(audio)\n  }\n\n  loadedVisible(quantize: number, startTime: Time): VisibleSource | undefined {\n    const rate = this.fps || quantize\n    const time = startTime.scale(rate)\n\n    console.debug(this.constructor.name, \"loadedVisible\", time.toString(), startTime.toString())\n\n    const cached: LoadVideoResult | undefined = Cache.get(this.absoluteUrl)\n    if (!cached) {\n      console.debug(this.constructor.name, \"loadedVisible no cached\")\n      return\n    }\n\n    const { sequence } = cached\n    const source = sequence[time.frame]\n    if (!source || source instanceof Promise) {\n      console.debug(this.constructor.name, \"loadedVisible source issue\", source)\n      return\n    }\n\n    return source\n  }\n\n  pattern = '%.jpg'\n\n  private seek(definitionTime: Time, video:HTMLVideoElement): void {\n    if (!video) throw Errors.internal\n\n    video.currentTime = definitionTime.seconds\n  }\n\n  private seekNeeded(definitionTime: Time, video:HTMLVideoElement): boolean {\n    const { currentTime } = video\n    const videoTime = Time.fromSeconds(currentTime, definitionTime.fps)\n    return !videoTime.equalsTime(definitionTime)\n  }\n\n  private seekPromise(definitionTime: Time, video:HTMLVideoElement): LoadPromise {\n    const promise:LoadPromise = new Promise(resolve => {\n      if (!this.seekNeeded(definitionTime, video)) return resolve()\n\n      video.onseeked = () => {\n        video.onseeked = null\n        resolve()\n      }\n      this.seek(definitionTime, video)\n    })\n    return promise\n  }\n\n  source = ''\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    object.url = this.url\n    if (this.source) object.source = this.source\n    if (this.fps !== Default.definition.video.fps) object.fps = this.fps\n    return object\n  }\n\n  trackType = TrackType.Video\n\n  type = DefinitionType.Video\n\n  unload(times?: Times[]): void {\n    // const zeroTime = Time.fromArgs(0, this.fps)\n    // const allUrls = this.urls(zeroTime, zeroTime.withFrame(this.framesMax))\n    // const deleting = new Set(allUrls.filter(url => Cache.cached(url)))\n    // if (times) {\n    //   times.forEach(maybePair => {\n    //     const [start, end] = maybePair\n    //     const frames = this.framesArray(start, end)\n    //     const urls = frames.map(frame => this.urlForFrame(frame))\n    //     const needed = urls.filter(url => deleting.has(url))\n    //     needed.forEach(url => { deleting.delete(url) })\n    //   })\n    // }\n    // deleting.forEach(url => { Cache.remove(url) })\n  }\n\n  url : string\n\n  // private urlForFrame(frame : number) : string {\n  //   let s = String((frame * this.increment) + this.begin)\n  //   if (this.padding) s = s.padStart(this.padding, '0')\n  //   return (this.url + this.pattern).replaceAll('%', s)\n  // }\n\n  // private urls(start : Time, end? : Time) : string[] {\n  //   return this.framesArray(start, end).map(frame => this.urlForFrame(frame))\n  // }\n\n}\n\nexport { VideoDefinitionClassImplementation }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions\"\nimport { Factories } from \"../Factories\"\nimport { VideoDefinitionClassImplementation } from \"../Video/VideoDefinition\"\nimport { Video, VideoDefinition, VideoDefinitionObject, VideoObject } from \"./Video\"\n\nconst videoDefinition = (object : VideoDefinitionObject) : VideoDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  if (Definitions.installed(id)) return <VideoDefinition> Definitions.fromId(id)\n\n  return new VideoDefinitionClassImplementation(object)\n}\n\nconst videoDefinitionFromId = (id : string) : VideoDefinition => {\n  return videoDefinition({ id })\n}\n\nconst videoInstance = (object : VideoObject) : Video => {\n  const definition = videoDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst videoFromId = (id : string) : Video => {\n  return videoInstance({ id })\n}\n\nconst videoInitialize = () : void => {}\n\nconst videoDefine = (object : VideoDefinitionObject) : VideoDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return videoDefinition(object)\n}\n\n\n/**\n * @internal\n */\nconst videoInstall = (object: VideoDefinitionObject): VideoDefinition => {\n  const instance = videoDefine(object)\n  instance.retain = true\n  return instance\n}\n\n\n\nconst VideoFactoryImplementation = {\n  define: videoDefine,\n  install: videoInstall,\n  definition: videoDefinition,\n  definitionFromId: videoDefinitionFromId,\n  fromId: videoFromId,\n  initialize: videoInitialize,\n  instance: videoInstance,\n}\n\nFactories[DefinitionType.Video] = VideoFactoryImplementation\n\nexport {\n  videoInstall,\n  videoDefine,\n  videoDefinition,\n  videoDefinitionFromId,\n  VideoFactoryImplementation,\n  videoFromId,\n  videoInitialize,\n  videoInstance,\n}\n","import { Any, JsonObject } from \"../../../declarations\"\nimport { AudibleClass } from \"../Audible/Audible\"\nimport { StreamableClass, StreamableDefinition, StreamableObject } from \"./Streamable\"\n\n\nfunction StreamableMixin<T extends AudibleClass>(Base: T): StreamableClass & T {\n  return class extends Base {\n    constructor(...args: Any[]) {\n      super(...args)\n      const [object] = args\n      const { something } = <StreamableObject>object\n\n      if (something) this.something = something\n    }\n\n    declare definition : StreamableDefinition\n\n\n    something?: string\n\n    maxFrames(_quantize : number, _trim? : number) : number { return 0 }\n\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      if (this.something) object.something = this.something\n      return object\n    }\n  }\n}\nexport { StreamableMixin }\n","import { VideoStream, VideoStreamDefinition, VideoStreamObject } from \"./VideoStream\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ClipMixin } from \"../Mixin/Clip/ClipMixin\"\nimport { TransformableMixin } from \"../Mixin/Transformable/TransformableMixin\"\nimport { AudibleMixin } from \"../Mixin/Audible/AudibleMixin\"\nimport { Any, JsonObject } from \"../../declarations\"\nimport { VisibleMixin } from \"../Mixin/Visible/VisibleMixin\"\nimport { StreamableMixin } from \"../Mixin/Streamable/StreamableMixin\"\n\nconst WithClip = ClipMixin(InstanceBase)\nconst WithAudible = AudibleMixin(WithClip)\nconst WithStreamable = StreamableMixin(WithAudible)\nconst WithVisible = VisibleMixin(WithStreamable)\nconst WithTransformable = TransformableMixin(WithVisible)\n\nclass VideoStreamClass extends WithTransformable {\n  constructor(...args : Any[]) {\n    super(...args)\n    // const [object] = args\n    // const { speed } = <VideoStreamObject> object\n  }\n\n  get copy() : VideoStream { return <VideoStream> super.copy }\n\n  declare definition : VideoStreamDefinition\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    // if (this.speed !== Default.instance.video.speed) object.speed = this.speed\n    return object\n  }\n}\n\nexport { VideoStreamClass }\n","import { Any, JsonObject } from \"../../../declarations\"\nimport { StreamableDefinitionClass, StreamableDefinitionObject } from \"./Streamable\"\nimport { AudibleDefinitionClass } from \"../Audible/Audible\"\n// import { DataType } from \"../../../Setup/Enums\"\n// import { Property } from \"../../../Setup/Property\"\n\nfunction StreamableDefinitionMixin<T extends AudibleDefinitionClass>(Base: T) : StreamableDefinitionClass & T {\n  return class extends Base {\n    constructor(...args : Any[]) {\n      super(...args)\n      const [object] = args\n      const { format } = <StreamableDefinitionObject> object\n      if (format) this.format = format\n\n    //  this.properties.push(new Property({ name: \"something\", type: DataType.String, value: '' }))\n    }\n\n    format = 'hls'\n\n    streamable = true\n\n    toJSON() : JsonObject {\n      const object = super.toJSON()\n      object.format = true\n      return object\n    }\n  }\n}\n\nexport { StreamableDefinitionMixin }\n","import { DefinitionType, TrackType } from \"../../Setup/Enums\"\nimport { Time, Times} from \"../../Utilities/Time\"\nimport { urlAbsolute} from \"../../Utilities/Url\"\nimport { Cache } from \"../../Loading/Cache\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { VideoStreamClass } from \"./VideoStreamInstance\"\nimport { VideoStream, VideoStreamDefinitionObject, VideoStreamObject } from \"./VideoStream\"\nimport { ClipDefinitionMixin } from \"../Mixin/Clip/ClipDefinitionMixin\"\nimport { VisibleDefinitionMixin } from \"../Mixin/Visible/VisibleDefinitionMixin\"\nimport { Any, JsonObject, LoadPromise } from \"../../declarations\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { AudibleDefinitionMixin } from \"../Mixin/Audible/AudibleDefinitionMixin\"\nimport { LoaderFactory } from \"../../Loading/LoaderFactory\"\nimport { StreamableDefinitionMixin } from \"../Mixin/Streamable/StreamableDefinitionMixin\"\nimport { Default } from \"../../Setup/Default\"\n\nconst WithClip = ClipDefinitionMixin(DefinitionBase)\nconst WithAudible = AudibleDefinitionMixin(WithClip)\nconst WithVisible = VisibleDefinitionMixin(WithAudible)\nconst WithStreamable = StreamableDefinitionMixin(WithVisible)\nclass VideoStreamDefinitionClass extends WithStreamable {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n    const { url, source } = <VideoStreamDefinitionObject> object\n    if (!url) throw Errors.invalid.definition.url\n\n    this.url = url\n    if (source) this.source = source\n\n    // this.properties.push(new Property({ name: \"speed\", type: DataType.Number, value: 1.0 }))\n    Definitions.install(this)\n  }\n\n  get absoluteUrl(): string { return urlAbsolute(this.url) }\n\n  frames(quantize: number): number {\n    return Time.fromSeconds(Default.definition.videostream.duration, quantize, 'floor').frame\n  }\n\n  get instance() : VideoStream { return this.instanceFromObject(this.instanceObject) }\n\n  instanceFromObject(object : VideoStreamObject) : VideoStream {\n    return new VideoStreamClass({ ...this.instanceObject, ...object })\n  }\n\n  loadDefinition(): LoadPromise | void {\n    const url = this.absoluteUrl\n    if (Cache.cached(url)) return\n\n    if (Cache.caching(url)) return Cache.get(url)\n\n    return LoaderFactory.video().loadUrl(url)\n  }\n\n  definitionUrls(_start: Time, _end?: Time): string[] { return [this.absoluteUrl] }\n\n  loadedVisible() : HTMLVideoElement | undefined { return Cache.get(this.absoluteUrl) }\n\n  source = ''\n\n  trackType = TrackType.Video\n\n  type = DefinitionType.VideoStream\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    object.url = this.url\n    if (this.source) object.source = this.source\n    return object\n  }\n\n  unload(times?: Times[]): void {\n    if (!times && Cache.cached(this.url)) Cache.remove(this.url)\n  }\n\n  url : string\n}\n\nexport { VideoStreamDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions\"\nimport { Factories } from \"../Factories\"\nimport { VideoStreamDefinitionClass } from \"../VideoStream/VideoStreamDefinition\"\nimport { VideoStream, VideoStreamDefinition, VideoStreamDefinitionObject, VideoStreamObject } from \"./VideoStream\"\n\nconst videoStreamDefinition = (object : VideoStreamDefinitionObject) : VideoStreamDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  if (Definitions.installed(id)) return <VideoStreamDefinition> Definitions.fromId(id)\n\n  return new VideoStreamDefinitionClass(object)\n}\n\nconst videoStreamDefinitionFromId = (id : string) : VideoStreamDefinition => {\n  return videoStreamDefinition({ id })\n}\n\nconst videoStreamInstance = (object : VideoStreamObject) : VideoStream => {\n  const definition = videoStreamDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst videoStreamFromId = (id : string) : VideoStream => {\n  return videoStreamInstance({ id })\n}\n\nconst videoStreamInitialize = (): void => {}\n\nconst videoStreamDefine = (object : VideoStreamDefinitionObject) : VideoStreamDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return videoStreamDefinition(object)\n}\n\n/**\n * @internal\n */\nconst videoStreamInstall = (object: VideoStreamDefinitionObject): VideoStreamDefinition => {\n  const instance = videoStreamDefine(object)\n  instance.retain = true\n  return instance\n}\n\nconst VideoStreamFactoryImplementation = {\n  define: videoStreamDefine,\n  install: videoStreamInstall,\n  definition: videoStreamDefinition,\n  definitionFromId: videoStreamDefinitionFromId,\n  fromId: videoStreamFromId,\n  initialize: videoStreamInitialize,\n  instance: videoStreamInstance,\n}\n\nFactories[DefinitionType.VideoStream] = VideoStreamFactoryImplementation\n\nexport {\n  videoStreamInstall,\n  videoStreamDefine,\n  videoStreamDefinition,\n  videoStreamDefinitionFromId,\n  VideoStreamFactoryImplementation,\n  videoStreamFromId,\n  videoStreamInitialize,\n  videoStreamInstance,\n}\n","import { VideoSequence, VideoSequenceDefinition, VideoSequenceObject } from \"./VideoSequence\"\nimport { InstanceBase } from \"../Instance/Instance\"\nimport { ClipMixin } from \"../Mixin/Clip/ClipMixin\"\nimport { TransformableMixin } from \"../Mixin/Transformable/TransformableMixin\"\nimport { AudibleMixin } from \"../Mixin/Audible/AudibleMixin\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Default } from \"../../Setup/Default\"\nimport { Any, JsonObject } from \"../../declarations\"\nimport { Time } from \"../../Utilities/Time\"\nimport { AudibleFileMixin } from \"../Mixin/AudibleFile/AudibleFileMixin\"\nimport { VisibleMixin } from \"../Mixin/Visible/VisibleMixin\"\n\nconst WithClip = ClipMixin(InstanceBase)\nconst WithAudible = AudibleMixin(WithClip)\nconst WithAudibleFile = AudibleFileMixin(WithAudible)\nconst WithVisible = VisibleMixin(WithAudibleFile)\nconst WithTransformable = TransformableMixin(WithVisible)\n\nclass VideoSequenceClass extends WithTransformable {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n    const { speed } = <VideoSequenceObject> object\n    if (speed && Is.aboveZero(speed)) this.speed = speed\n  }\n\n  get copy() : VideoSequence { return <VideoSequence> super.copy }\n\n  declare definition : VideoSequenceDefinition\n\n  definitionTime(quantize : number, time : Time) : Time {\n    const scaledTime = super.definitionTime(quantize, time)\n    if (this.speed === Default.instance.video.speed) return scaledTime\n\n    return scaledTime.divide(this.speed) //, 'ceil')\n  }\n\n  speed = Default.instance.video.speed\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    if (this.speed !== Default.instance.video.speed) object.speed = this.speed\n    return object\n  }\n}\n\nexport { VideoSequenceClass }\n","import { DefinitionType, TrackType, DataType } from \"../../Setup/Enums\"\nimport { Any, VisibleSource, JsonObject, LoadPromise } from \"../../declarations\"\nimport { Time, Times } from \"../../Utilities/Time\"\nimport { urlAbsolute} from \"../../Utilities/Url\"\nimport { Cache } from \"../../Loading/Cache\"\nimport { DefinitionBase } from \"../Definition/Definition\"\nimport { VideoSequenceClass } from \"./VideoSequenceInstance\"\nimport { VideoSequence, VideoSequenceDefinitionObject, VideoSequenceObject } from \"./VideoSequence\"\nimport { ClipDefinitionMixin } from \"../Mixin/Clip/ClipDefinitionMixin\"\nimport { VisibleDefinitionMixin } from \"../Mixin/Visible/VisibleDefinitionMixin\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Definitions } from \"../Definitions/Definitions\"\nimport { AudibleDefinitionMixin } from \"../Mixin/Audible/AudibleDefinitionMixin\"\nimport { Default } from \"../../Setup/Default\"\nimport { Property } from \"../../Setup/Property\"\nimport { LoaderFactory } from \"../../Loading/LoaderFactory\"\nimport { AudibleFileDefinitionMixin } from \"../Mixin/AudibleFile/AudibleFileDefinitionMixin\"\n\nconst WithClip = ClipDefinitionMixin(DefinitionBase)\nconst WithAudible = AudibleDefinitionMixin(WithClip)\nconst WithAudibleFile = AudibleFileDefinitionMixin(WithAudible)\nconst WithVisible = VisibleDefinitionMixin(WithAudibleFile)\n\nclass VideoSequenceDefinitionClass extends WithVisible {\n  constructor(...args : Any[]) {\n    super(...args)\n    const [object] = args\n    const {\n      padding, url, begin, fps, increment, pattern, source\n    } = <VideoSequenceDefinitionObject>object\n    if (!url) throw Errors.invalid.definition.url\n    this.url = url\n\n    if (source) this.source = source\n    if (typeof begin !== \"undefined\") this.begin = begin\n    if (fps) this.fps = fps\n    if (increment) this.increment = increment\n    if (pattern) this.pattern = pattern\n    if (padding) this.padding = padding\n    else {\n      const lastFrame = this.begin + (this.increment * this.framesMax - this.begin)\n      this.padding = String(lastFrame).length\n    }\n    this.properties.push(new Property({ name: \"speed\", type: DataType.Number, value: 1.0 }))\n    Definitions.install(this)\n  }\n\n  begin = Default.definition.videosequence.begin\n\n  definitionUrls(start: Time, end?: Time): string[] {\n    return this.framesArray(start, end).map(frame => this.urlForFrame(frame))\n  }\n\n  fps = Default.definition.videosequence.fps\n\n  private framesArray(start : Time, end? : Time) : number[] {\n    const frames : number[] = []\n    const startFrame = Math.min(this.framesMax, start.scale(this.fps, \"floor\").frame)\n    if (end) {\n      const endFrame = Math.min(this.framesMax, end.scale(this.fps, \"ceil\").frame)\n      for (let frame = startFrame; frame <= endFrame; frame += 1) {\n        frames.push(frame)\n      }\n    } else frames.push(startFrame)\n    return frames\n  }\n\n  private get framesMax() : number { return Math.floor(this.fps * this.duration) - 2 }\n\n  increment = Default.definition.videosequence.increment\n\n  get instance() : VideoSequence { return this.instanceFromObject(this.instanceObject) }\n\n  instanceFromObject(object : VideoSequenceObject) : VideoSequence {\n    return new VideoSequenceClass({ ...this.instanceObject, ...object })\n  }\n\n  loadDefinition(quantize:number, start: Time, end?: Time): LoadPromise | void {\n    const promises: LoadPromise[] = []\n    const clipDefinitionPromise = end ? super.loadDefinition(quantize, start, end) : null\n    if (clipDefinitionPromise) promises.push(clipDefinitionPromise)\n    const urls = this.definitionUrls(start, end)\n    const uncachedUrls = urls.filter(url => !Cache.cached(url))\n    uncachedUrls.forEach(url => {\n      if (Cache.caching(url)) promises.push(Cache.get(url))\n      else promises.push(LoaderFactory.image().loadUrl(url))\n    })\n    switch (promises.length) {\n      case 0: return\n      case 1: return promises[0]\n      default: return Promise.all(promises).then()\n    }\n  }\n\n  loadedVisible(_quantize: number, time : Time) : VisibleSource | undefined {\n    const [url] = this.urls(time)\n    return Cache.get(url)\n  }\n\n  pattern = '%.jpg'\n\n  source = ''\n\n  toJSON() : JsonObject {\n    const object = super.toJSON()\n    object.url = this.url\n    if (this.source) object.source = this.source\n    if (this.pattern !== Default.definition.videosequence.pattern) object.pattern = this.pattern\n    if (this.increment !== Default.definition.videosequence.increment) object.increment = this.increment\n    if (this.begin !== Default.definition.videosequence.begin) object.begin = this.begin\n    if (this.fps !== Default.definition.videosequence.fps) object.fps = this.fps\n    if (this.padding !== Default.definition.videosequence.padding) object.padding = this.padding\n    return object\n  }\n\n  trackType = TrackType.Video\n\n  type = DefinitionType.VideoSequence\n\n  unload(times?: Times[]): void {\n    const zeroTime = Time.fromArgs(0, this.fps)\n    const allUrls = this.urls(zeroTime, zeroTime.withFrame(this.framesMax))\n    const deleting = new Set(allUrls.filter(url => Cache.cached(url)))\n    if (times) {\n      times.forEach(maybePair => {\n        const [start, end] = maybePair\n        const frames = this.framesArray(start, end)\n        const urls = frames.map(frame => this.urlForFrame(frame))\n        const needed = urls.filter(url => deleting.has(url))\n        needed.forEach(url => { deleting.delete(url) })\n      })\n    }\n    deleting.forEach(url => { Cache.remove(url) })\n  }\n\n  url : string\n\n  private urlForFrame(frame : number) : string {\n    let s = String((frame * this.increment) + this.begin)\n    if (this.padding) s = s.padStart(this.padding, '0')\n    return urlAbsolute((this.url + this.pattern).replaceAll('%', s))\n  }\n\n  private urls(start : Time, end? : Time) : string[] {\n    return this.framesArray(start, end).map(frame => this.urlForFrame(frame))\n  }\n\n  padding : number\n}\n\nexport { VideoSequenceDefinitionClass }\n","import { DefinitionType } from \"../../Setup/Enums\"\nimport { Errors } from \"../../Setup/Errors\"\nimport { Is } from \"../../Utilities/Is\"\nimport { Definitions } from \"../Definitions\"\nimport { Factories } from \"../Factories\"\nimport { VideoSequenceDefinitionClass } from \"../VideoSequence/VideoSequenceDefinition\"\nimport { VideoSequence, VideoSequenceDefinition, VideoSequenceDefinitionObject, VideoSequenceObject } from \"./VideoSequence\"\n\nconst videoSequenceDefinition = (object : VideoSequenceDefinitionObject) : VideoSequenceDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  if (Definitions.installed(id)) return <VideoSequenceDefinition> Definitions.fromId(id)\n\n  return new VideoSequenceDefinitionClass(object)\n}\n\nconst videoSequenceDefinitionFromId = (id : string) : VideoSequenceDefinition => {\n  return videoSequenceDefinition({ id })\n}\n\nconst videoSequenceInstance = (object : VideoSequenceObject) : VideoSequence => {\n  const definition = videoSequenceDefinition(object)\n  const instance = definition.instanceFromObject(object)\n  return instance\n}\n\nconst videoSequenceFromId = (id : string) : VideoSequence => {\n  return videoSequenceInstance({ id })\n}\n\nconst videoSequenceInitialize = () : void => {}\n\nconst videoSequenceDefine = (object : VideoSequenceDefinitionObject) : VideoSequenceDefinition => {\n  const { id } = object\n  if (!(id && Is.populatedString(id))) throw Errors.id\n\n  Definitions.uninstall(id)\n  return videoSequenceDefinition(object)\n}\n\n\n/**\n * @internal\n */\nconst videoSequenceInstall = (object: VideoSequenceDefinitionObject): VideoSequenceDefinition => {\n  const instance = videoSequenceDefine(object)\n  instance.retain = true\n  return instance\n}\n\nconst VideoSequenceFactoryImplementation = {\n  define: videoSequenceDefine,\n  install: videoSequenceInstall,\n  definition: videoSequenceDefinition,\n  definitionFromId: videoSequenceDefinitionFromId,\n  fromId: videoSequenceFromId,\n  initialize: videoSequenceInitialize,\n  instance: videoSequenceInstance,\n}\n\nFactories[DefinitionType.VideoSequence] = VideoSequenceFactoryImplementation\n\nexport {\n  videoSequenceInstall,\n  videoSequenceDefine,\n  videoSequenceDefinition,\n  videoSequenceDefinitionFromId,\n  VideoSequenceFactoryImplementation,\n  videoSequenceFromId,\n  videoSequenceInitialize,\n  videoSequenceInstance,\n}\n","import { Factory } from \"../Factory\"\nimport { DefinitionTypes } from \"../Setup/Enums\"\n\nDefinitionTypes.forEach(type => { Factory[type].initialize() })\n"],"names":["ActionType","TrackType","ClipType","DefinitionType","EventType","MashType","ModuleType","LoadType","MoveType","DataType","TransformType","CommandType","Types","ContextFactory","classes","WithClip","WithAudible","WithAudibleFile","WithVisible","WithTransformable","WithStreamable"],"mappings":"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"}