{"version":3,"file":"moviemasher.min.js","sources":["../src/Is/Is.js","../src/Errors/Errors.js","../src/Base/Base.js","../src/Types/Types.js","../src/Action/Action.js","../src/Action/AddTrackAction.js","../src/Action/ChangeAction.js","../src/Action/FreezeAction.js","../src/Action/ChangeFramesAction.js","../src/Action/ChangeTrimAction.js","../src/Utilities/Utilities.js","../src/Time/Time.js","../src/Factory/Factory.js","../src/Factory/TimeFactory.js","../src/TimeRange/TimeRange.js","../src/Utilities/Evaluator.js","../src/Cache/Cache.js","../src/Loader/Loader.js","../src/Processor/AudioProcessor.js","../src/Processor/FontProcessor.js","../src/Processor/ImageProcessor.js","../src/Processor/ModuleProcessor.js","../src/Factory/ProcessorFactory.js","../src/Loader/AudioLoader.js","../src/Loader/FontLoader.js","../src/Loader/ImageLoader.js","../src/Loader/ModuleLoader.js","../src/Factory/LoaderFactory.js","../src/Utilities/UrlsByType.js","../src/Utilities/Pixel.js","../src/Utilities/Property.js","../src/Utilities/Colors.js","../src/Utilities/Context.js","../src/Action/AddEffectAction.js","../src/Action/AddClipToTrackAction.js","../src/Action/MoveClipsAction.js","../src/Clip/with/track.js","../src/Action/RemoveClipsAction.js","../src/Action/SplitAction.js","../src/Action/MoveEffectsAction.js","../src/Actions/Actions.js","../src/Sort/Sort.js","../src/Module/Module.js","../src/Utilities/Id.js","../src/Base/with/id.js","../src/Media/with/label.js","../src/Base/with/object.js","../src/Base/with/toJSONFromObject.js","../src/Media/with/sharedMedia.js","../src/Media/with/inaudible.js","../src/Media/with/visible.js","../src/Media/with/propertiesModular.js","../src/Media/with/modular.js","../src/Media/with/parameters.js","../src/CoreFilter/CoreFilter.js","../src/CoreFilter/BlendFilter.js","../src/CoreFilter/ChromaKeyFilter.js","../src/CoreFilter/ColorFilter.js","../src/CoreFilter/ColorChannelMixerFilter.js","../src/CoreFilter/ConvolutionFilter.js","../src/CoreFilter/CropFilter.js","../src/CoreFilter/DrawBoxFilter.js","../src/CoreFilter/DrawTextFilter.js","../src/CoreFilter/FadeFilter.js","../src/CoreFilter/OverlayFilter.js","../src/CoreFilter/ScaleFilter.js","../src/CoreFilter/SetSarFilter.js","../src/Factory/FilterFactory.js","../src/Media/with/drawFilters.js","../src/Media/FilterMedia.js","../src/Media/with/filters.js","../src/Media/with/html.js","../src/Media/with/urlsFromFilters.js","../src/Media/with/transform.js","../src/Media/EffectMedia.js","../src/Media/ScalerMedia.js","../src/Media/MergerMedia.js","../src/Media/with/modularFalse.js","../src/Media/with/invisible.js","../src/Default/index.js","../src/Media/with/duration.js","../src/Media/with/urlAudible.js","../src/Media/with/propertiesTiming.js","../src/Media/with/propertiesAudible.js","../src/Media/with/urlsAudible.js","../src/Media/with/audible.js","../src/Media/AudioMedia.js","../src/Media/FontMedia.js","../src/Media/with/urlAudibleMute.js","../src/Media/with/urlsVisibleFrames.js","../src/Media/VideoMedia.js","../src/Media/with/urlVisible.js","../src/Media/with/urlsVisible.js","../src/Media/ImageMedia.js","../src/Media/ThemeMedia.js","../src/Media/with/urlsNone.js","../src/Media/TransitionMedia.js","../src/Factory/MediaFactory.js","../src/Factory/TimeRangeFactory.js","../src/Clip/with/toJSON.js","../src/Clip/with/id.js","../src/Clip/with/labelFromObjectOrMedia.js","../src/Clip/with/media.js","../src/Clip/with/propertyValues.js","../src/Clip/with/propertiesFromMedia.js","../src/Clip/with/copy.js","../src/Clip/with/load.js","../src/Base/with/editable.js","../src/Clip/with/sharedClip.js","../src/Clip/with/inaudible.js","../src/Clip/with/visible.js","../src/Clip/with/urls.js","../src/Base/with/idMutable.js","../src/Transform/with/drawMerger.js","../src/Base/with/copy.js","../src/Clip/with/urlsFromMedia.js","../src/Transform/with/media.js","../src/Clip/with/evaluator.js","../src/Transform/with/toJSONTransform.js","../src/Transform/with/sharedTransform.js","../src/Transform/Transform.js","../src/Transform/Merger.js","../src/Clip/with/drawMediaFilters.js","../src/Transform/Scaler.js","../src/Transform/Effect.js","../src/Clip/with/transform.js","../src/Clip/with/drawImage.js","../src/Clip/Clip.js","../src/Clip/with/mediaTime.js","../src/Clip/ImageClip.js","../src/Clip/with/invisible.js","../src/Clip/with/audible.js","../src/Clip/with/mediaTimeFromTrim.js","../src/Clip/AudioClip.js","../src/Clip/VideoClip.js","../src/Clip/with/speedOne.js","../src/Clip/ThemeClip.js","../src/Clip/TransitionClip.js","../src/Clip/FrameClip.js","../src/Factory/ClipFactory.js","../src/Track/Track.js","../src/Factory/TrackFactory.js","../src/Mash/Mash.js","../src/Events/Events.js","../src/Factory/ActionFactory.js","../src/Masher/with/deprecated.js","../src/Base/with/contexts.js","../src/Composition/Composition.js","../src/Masher/Masher.js","../src/Cache/CacheCleaner.js","../src/MovieMasher/MovieMasher.js"],"sourcesContent":["const array = value => {\n  if (defined(Array.isArray)) return Array.isArray(value)\n\n  return instance(value, Array) \n}\nconst method = value => typeof value === 'function'\n\nconst object = value => typeof value === 'object'\nconst string = value => typeof value === 'string'\nconst undefined = value => typeof value === 'undefined'\nconst number = value => typeof value === 'number'\nconst boolean = value => typeof value === 'boolean'\nconst integer = value => Number.isInteger(value)\nconst length = value => !!value.length\nconst nil = value => value === null\nconst not = value => undefined(value) || nil(value)\n\nconst empty = value => {\n  if (not(value)) return true\n  if (array(value)) return emptyarray(value)\n  if (string(value)) return emptystring(value)\n  \n  return emptyobject(value)\n}\nconst emptystring = value => {\n  return not(value) || !string(value) || !length(value)\n}\nconst emptyarray = value => not(value) || !array(value) || !length(value)\n\nconst emptyobject = value => {\n  return not(value) || !object(value) || !length(Object.keys(value))\n}\nconst nonobject = value => value.constructor.name !== \"Object\"\n\nconst instance = (value, klass) => Is.object(value) && value instanceof klass\nconst defined = value => !Is.undefined(value)\n\nconst objectStrict = value => object(value) && !(not(value) || array(value))\n\nconst float = value => number(value) && !integer(value)\nconst nan = value => number(value) && isNaN(value)\n\nconst positive = value => integer(value) && value >= 0\n\nconst Is = {\n  nonobject,\n  empty,\n  emptyarray,\n  emptyobject,\n  emptystring,\n  float,\n  object, \n  undefined,\n  boolean,\n  number,\n  integer,\n  string,\n  array,\n  instance,\n  defined,\n  method,\n  nan,\n  nil,\n  not, \n  objectStrict,\n  positive,\n}\n\nexport { Is }","import { Is } from \"../Is\"\n\nconst invalid = \"Invalid\"\nconst unknown = \"Unknown\"\nconst expected = \"Expected\"\nconst invalid_argument = `${invalid} argument`\nconst invalid_property = `${invalid} property`\nconst deprecated = \"deprecated in 4.1\"\nconst internal = \"Internal Error \"\nconst Errors = {\n  throwUnlessInstance: (object, klass) => {\n    if (!Is.instance(object, klass)) throw Errors.wrongClass + klass.name\n  },\n  mash: `${expected} mash`,\n  action: `${expected} Action`,\n  actions: `${expected} Actions`,\n  internal,\n  argument: `${invalid_argument} `,\n  type: `${invalid} type `,\n  selection: `${invalid} selection `,\n  unknown: {\n    type: `${unknown} type `,\n    merger: `${unknown} merger `,\n    effect: `${unknown} effect `,\n    filter: `${unknown} filter `,\n    font: `${unknown} font `,\n    scaler: `${unknown} scalar `,\n  },\n  uncached: \"Uncached URL \",\n  object: `${invalid_argument} object `,\n  array: `${invalid_argument} array `,\n  media: `${invalid_argument} media `,\n  id: `${invalid_argument} id `,\n  frame: `${invalid_argument} frame `,\n  frames: `${invalid_property} frames `,\n  fps: `${invalid_argument} fps `,\n  seconds: `${invalid_argument} seconds `,\n  url: `${invalid_argument} url `,\n  time: `${invalid_argument} Time`,\n  timeRange: `${invalid_argument} TimeRange`,\n  mainTrackOverlap: `${internal}: main track clips overlap without transition`,\n  unknownMash: `${unknown} Mash property `,\n  property: `${invalid_argument} property `,\n  deprecation: {\n    property_types: `property_types ${deprecated} - please get MovieMasher.Property.types instead`,\n    addModulesOfType: `addModulesOfType ${deprecated} for unsupported type `,\n    configure: {\n      get: `configure ${deprecated} - please get MovieMasher.defaults instead`,\n      set: `configure ${deprecated} - please supply mash.quantize and media.duration instead`,\n    },\n    canvas_context: {\n      get: `canvas_context ${deprecated} - please get videoContext instead`,\n      set: `canvas_context ${deprecated} - please set videoContext instead`,\n    }\n  },\n  wrongClass: `${expected} instance of class `,\n}\nexport { Errors }","import { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\n\nclass Base {\n  constructor(object = {}) {\n    if (!Is.objectStrict(object)) throw(Errors.object)\n  \n    this.object = object\n  }\n  toJSON() { return this.object }\n\n  toString() { return `[${this.constructor.name}]` }\n\n}\n\nexport { Base }\n","const action = \"action\"\nconst add = \"add\"\nconst audio = \"audio\"\nconst frame = \"frame\"\nconst duration = \"duration\"\nconst effect = \"effect\"\nconst filter = \"filter\"\nconst font = \"font\"\nconst image = \"image\"\nconst load = \"load\"\nconst merger = \"merger\"\nconst module = \"module\"\nconst redo = \"redo\"\nconst scaler = \"scaler\"\nconst theme = \"theme\"\nconst transition = \"transition\"\nconst truncate = \"truncate\"\nconst undo = \"undo\"\nconst video = \"video\"\n\nconst ActionTypes = [\n  'addTrack',\n  'addClipsToTrack',\n  'moveClips',\n  'addEffect',\n  'change',\n  'changeFrames',\n  'changeTrim',\n  'changeGain',\n  'moveEffects',\n  'split',\n  'freeze',\n  'removeClips',\n]\nconst ActionType = Object.fromEntries(ActionTypes.map(type => [type, type]))\n\nconst ClipTypes = [audio, video, image, theme, transition, frame]\nconst ClipType = Object.fromEntries(ClipTypes.map(type => [type, type]))\n\nconst CompositionType = { audio, video }\nconst CompositionTypes = Object.values(CompositionType)\n\nconst DoType = { undo, redo }\nconst DoTypes = Object.values(DoType)\n\nconst EventType = { action, load, duration, truncate, add, ...DoTypes }\nconst EventTypes = Object.values(EventType)\n\nconst FilterTypes = [\n  \"blend\",\n  \"chromakey\",\n  \"colorchannelmixer\",\n  \"color\",\n  \"convolution\",\n  \"crop\",\n  \"drawbox\",\n  \"drawtext\",\n  \"fade\",\n  \"overlay\",\n  \"scale\",\n  \"setsar\",\n]\nconst FilterType = Object.fromEntries(FilterTypes.map(type => [type, type]))\n\nconst MediaType = {\n  audio, image, video, theme, scaler, merger, effect, font, transition, filter\n}\nconst MediaTypes = Object.values(MediaType)\n\nconst ModuleType = {\n  font, effect, scaler, merger, theme, transition,\n}\nconst ModuleTypes = Object.values(ModuleType)\n\nconst LoadType = { font, image, audio, module }\nconst LoadTypes = Object.values(LoadType)\n\nconst TrackType = { audio, video }\nconst TrackTypes = Object.values(TrackType)\n\nconst MoveType = { effect, ...TrackType }\nconst MoveTypes = Object.values(MoveType)\n\nconst TransformType = { merger, scaler }\nconst TransformTypes = Object.values(TransformType)\n\nexport {\n  ActionType, ActionTypes,\n  ClipType, ClipTypes,\n  CompositionType, CompositionTypes,\n  DoType, DoTypes,\n  EventType, EventTypes,\n  FilterType, FilterTypes,\n  LoadType, LoadTypes,\n  MediaType, MediaTypes,\n  ModuleType, ModuleTypes,\n  MoveType, MoveTypes,\n  TrackType, TrackTypes,\n  TransformType, TransformTypes,\n}\n","import { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\nimport { EventType } from \"../Types\"\n\nclass Action {\n  constructor(object) {\n    if (!Is.objectStrict(object)) throw Errors.argument + object\n\n    const keys = Object.keys(object)\n    const entries = keys.map(key => [key, { value: object[key] }])\n    Object.defineProperties(this, Object.fromEntries(entries))\n  }\n\n  get events() { return this.mash.events }\n\n  get selectedClips() { \n    if (this.done) return this.redoSelectedClips\n\n    return this.undoSelectedClips\n  }\n\n  get selectedEffects() { \n    if (this.done) return this.redoSelectedEffects\n    \n    return this.undoSelectedEffects\n  }\n  \n  redo() {\n    this.redoAction()\n    this.done = true\n    this.events && this.events.emit(EventType.action, { action: this } )\n  }\n\n  redoAction() {} \n\n  undo() {\n    this.undoAction()\n    this.done = false\n    this.events && this.events.emit(EventType.action, { action: this } )\n  }\n\n  undoAction() {}\n}\n\nexport { Action }\n","import { Action } from \"./Action\";\n\nclass AddTrackAction extends Action {\n  redoAction(){\n    this.mash.addTrack(this.trackType)\n  }\n\n  undoAction() {\n    this.mash.removeTrack(this.trackType)\n  }\n}\n\nexport { AddTrackAction }\n","import { Action } from \"./Action\";\n\nclass ChangeAction extends Action {\n  constructor(object) {\n    const redoValue = object.redoValue\n    delete object.redoValue\n    super(object)\n    this.__redoValue = redoValue\n  }\n\n  get redoValue() { return this.__redoValue }\n\n  redoAction() {\n    this.target[this.property] = this.redoValue\n  }\n\n  undoAction() {\n    this.target[this.property] = this.undoValue\n  }\n\n  updateAction(redoValue) {\n    this.__redoValue = redoValue\n    this.redo()\n  }\n}\n\nexport { ChangeAction }\n","import { Action } from \"./Action\";\n\nclass FreezeAction extends Action {\n  redoAction() {\n    this.trackClips.splice(this.index, 0, this.insertClip, this.frozenClip)\n    this.freezeClip.frames -= this.frames\n  }\n\n  undoAction() {\n    this.freezeClip.frames += this.frames\n    this.trackClips.splice(this.index, 2)\n  }\n}\n\nexport { FreezeAction }\n","import { ChangeAction } from \"./ChangeAction\";\n\nclass ChangeFramesAction extends ChangeAction {\n  redoAction() {\n    this.mash.changeClipFrames(this.target, this.redoValue)\n  }\n\n  undoAction() {\n    this.mash.changeClipFrames(this.target, this.undoValue)\n  }\n}\n\nexport { ChangeFramesAction }\n","import { ChangeAction } from \"./ChangeAction\";\n\nclass ChangeTrimAction extends ChangeAction {\n  redoAction() {\n    this.mash.changeClipTrim(this.target, this.redoValue, this.frames + this.undoValue)\n  }\n\n  undoAction() {\n    this.mash.changeClipTrim(this.target, this.undoValue, this.frames + this.undoValue)\n  }\n}\n\nexport { ChangeTrimAction }\n","import { Errors } from \"../Errors\"\nimport { Is } from '../Is'\n\nconst findBy = (array, object, key = 'id') => {\n  if (! Is.array(array)) throw(Errors.array)\n  if (Is.undefined(key)) throw(Errors.argument)\n\n  const value = Is.object(object) ? object[key] : object\n  if (Is.undefined(value)) throw(Errors.argument)\n  return array.find(item => item[key] === value)\n}\n\nconst deleteFromArray = (array, value) => {\n  const is_array = Is.array(array)\n  const include = is_array && array.includes(value)\n  if (include) array.splice(array.indexOf(value), 1)\n}\n\n\nconst keyShouldBeCopied = (key) => {\n  return key.substr(0,1) !== '$'\n}\nconst deepCopy = (ob1, ob2) => {\n  if (Is.object(ob1)){\n    if (Is.undefined(ob2)) ob2 = {}\n    for (var key in ob1) {\n      if (keyShouldBeCopied(key)){\n        const value1 = ob1[key]\n        if (Is.object(value1)) {\n          if (Is.array(value1)) ob2[key] = [...value1]\n          else ob2[key] = deepCopy(value1, ob2[key])\n        } else ob2[key] = value1\n      }\n    }\n  }\n  return ob2\n}\n\nconst capitalize = value => {\n  const string = Is.string(value) ? value : String(value)\n  if (Is.emptystring(string)) return string\n\n  return `${string[0].toUpperCase()}${string.substr(1)}`\n}\n\nconst Utilities = {\n  findBy,\n  deleteFromArray,\n  keyShouldBeCopied,\n  deepCopy,\n  capitalize,\n}\n\nexport { Utilities }\n","import { Errors } from \"../Errors\"\nimport { Is } from '../Is'\n\nconst greatestCommonDenominator = (a, b) => {\n    var t\n    while (b !== 0) {\n      t = b\n      b = a % b\n      a = t\n    }\n    return a\n}\n  \nconst lowestCommonMultiplier = (a, b) => { return (a * b / greatestCommonDenominator(a, b)) }\n\nclass Time {\n  static get zero() { return new Time }\n\n  static scaleTimes(time1, time2, rounding = \"round\") {\n    if (time1.fps === time2.fps) return [time1, time2]\n\n    var gcf = lowestCommonMultiplier(time1.fps, time2.fps)\n    return [\n      time1.scale(gcf, rounding),\n      time2.scale(gcf, rounding)\n    ]\n  }\n  \n  constructor(frame = 0, fps = 1) {\n    if (!Is.integer(frame) || frame < 0) throw(Errors.frame)\n    if (!Is.integer(fps) || fps < 1) throw(Errors.fps)\n    \n    this.frame = frame\n    this.fps = fps\n  }\n\n  add(time) {\n    const [time1, time2] = Time.scaleTimes(this, time)\n    return new Time(time1.frame + time2.frame, time1.fps)\n  }\n\n  addFrames(frames) {\n    const time = this.copy\n    time.frame += frames\n    return time \n  }\n\n  get copy() { return new Time(this.frame, this.fps) }\n\n  get description() { return `${this.frame}@${this.fps}` }\n\n  divide(number, rounding = \"round\") {\n    if (!Is.number(number)) throw(Errors.argument)\n    return new Time(Math[rounding](Number(this.frame) / number), this.fps)\n  }\n  \n  equalsTime(time) {\n    if (!(time instanceof Time)) throw(Errors.time)\n\n    const [time1, time2] = Time.scaleTimes(this, time)\n    return time1.frame === time2.frame\n  }\n\n  min(time) {\n    if (! time instanceof Time) throw(Errors.time)\n    \n    const [time1, time2] = Time.scaleTimes(this, time)\n    return new Time(Math.min(time1.frame, time2.frame), time1.fps)\n  } \n\n  scale(fps = 1, rounding = \"round\") {\n    if (this.fps === fps) return this\n    //const scale = Number(this.fps) / Number(fps)\n    const frame = Number(this.frame / this.fps) * Number(fps)\n    return new Time(Math[rounding](frame), fps)\n  }\n\n  get seconds() { return Number(this.frame) / Number(this.fps) }\n  \n  subtract(time) {\n    if (! time instanceof Time) throw(Errors.argument)\n    const [time1, time2] = Time.scaleTimes(this, time)\n  \n    var subtracted = time2.frame\n    if (subtracted > time1.frame) {\n      subtracted -= subtracted - time1.frame\n    }\n    return new Time(time1.frame - subtracted, time1.fps)\n  }\n\n  subtractFrames(frames) {\n    const time = this.copy\n    time.frame -= frames\n    return time \n  }\n\n  toString() { return `[${this.description}]` }\n\n  withFrame(frame) { \n    const time = this.copy\n    time.frame = frame\n    return time \n  }\n}\n\nexport { Time }","\nimport { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\n\nclass Factory {\n  constructor() { this.classesByType = {} }\n\n  typeClass(type) {\n    const klass = Is.string(type) ? this.classesByType[type] : this.baseClass\n    if (!klass) throw(Errors.unknown.type + type)\n    return klass\n  }\n\n  create(type) { \n    if (!Is.string(type)) return this.createFromObject(type)\n    \n    const klass = this.typeClass(type)\n    return new klass() \n  }\n\n  createFromObject(object) {\n    if (!Is.object(object)) throw(Errors.object)\n    const klass = this.typeClass(object.type)\n    if (Is.instance(object, klass)) return object\n    \n    return new klass(object)\n  }\n\n  install(type, klass) { this.classesByType[type] = klass }\n}\n\nexport { Factory }\n","import { Factory } from \"./Factory\";\nimport { Errors } from \"../Errors\";\nimport { Is } from '../Is'\nimport { Time } from \"../Time\";\n\nclass TimeFactoryClass extends Factory {\n  create(frame, fps) { return new Time(frame, fps) }\n  createFromSeconds(seconds = 0, fps = 1, rounding = 'round') {\n    if (!Is.number(seconds) || seconds < 0) throw(Errors.seconds + seconds + seconds.constructor.name)\n    if (!Is.integer(fps) || fps < 1) throw(Errors.fps)\n    \n    return this.create(Math[rounding](seconds * fps), fps)\n  }\n}\nconst TimeFactory = new TimeFactoryClass\nexport { TimeFactory }\n","import { Is } from '../Is'\nimport { Time } from \"../Time\"\nimport { Errors } from '../Errors'\nimport { TimeFactory } from '../Factory/TimeFactory'\n\nclass TimeRange extends Time {\n  constructor(frame = 0, fps = 1, frames = 1) {\n    if (!(Is.integer(frames) && frames >= 0)) {\n      throw(Errors.argument, frames)\n    }\n    super(frame, fps)\n    this.frames = frames\n  }\n  \n  get description() { return `${this.frame}-${this.frames}@${this.fps}` }\n  get end() { return this.frame + this.frames }\n  get endTime() { return TimeFactory.create(this.end, this.fps) }\n  get lengthSeconds() { return Number(this.frames) / Number(this.fps) } \n  get position() { return  Number(this.frame) / Number(this.frames) }\n  get startTime() { return TimeFactory.create(this.frame, this.fps) } \n  get copy() {\n    return new TimeRange(this.frame, this.fps, this.frames)\n  }\n  \n  scale(fps = 1, rounding = \"round\") {\n    if (this.fps === fps) return this.copy\n\n    const value = Number(this.frames) / (Number(this.fps) / Number(fps))\n    const time = super.scale(fps, rounding)\n    return new TimeRange(time.frame, time.fps, Math.max(1, Math[rounding](value)))\n  }\n \n  intersects(timeRange) {\n    const [range1, range2] = Time.scaleTimes(this, timeRange)\n\n    if (range1.frame >= range2.end) return false\n    \n    return range1.end > range2.frame\n  }\n  \n  minEndTime(endTime) {\n    const [range, time] = Time.scaleTimes(this, endTime)\n    range.frames = Math.min(range.frames, time.frame)\n    return range\n  }\n\n  withFrame(frame) { \n    const range = this.copy\n    range.frame = frame\n    return range \n  }\n\n  withFrames(frames) { \n    const range = this.copy\n    range.frames = frames\n    return range \n  }\n\n}\n\nexport { TimeRange }","import { Errors } from \"../Errors\";\nimport { Is } from \"../Is\";\nimport { TimeRange } from \"../TimeRange\";\n\n\nconst KEYS_SIZED = ['mm_width', 'mm_height']\nconst KEYS_GETTERS = [\n  \"mm_dimensions\",\n  \"mm_duration\",\n  \"mm_fps\",\n  \"mm_height\",\n  \"mm_t\",\n  \"mm_width\",\n  \"t\",\n]\nconst KEYS = [\n  \"ceil\",\n  \"floor\",\n  \"mm_cmp\",\n  \"mm_horz\",\n  \"mm_max\",\n  \"mm_min\",\n  \"mm_vert\",\n  ...KEYS_GETTERS,\n  ...KEYS_SIZED\n] \n\nconst THIS = \"evaluator\"\n\nfunction Evaluator(timeRange, context, dimensions) { \n  if (!Is.instance(timeRange, TimeRange)) throw Errors.argument + timeRange\n  if (!Is.object(timeRange)) throw Errors.argument + context\n  if (!Is.object(dimensions)) throw Errors.argument + dimensions\n\n  // console.log(\"Evaluator\", timeRange, context.constructor.name, dimensions)\n  this.timeRange = timeRange\n  this.context = context\n  this.dimensions = dimensions \n  this.map = new Map\n}\n\nconst conditionalExpression = (conditional) => {\n  const condition = conditional.condition\n\n  // not strict equality, since we may have strings and numbers\n  if (Is.defined(conditional.is)) return `${condition}==${conditional.is}`\n  \n  const elements = conditional.in\n  if (Is.undefined(elements)) return condition\n\n  // support supplying values as array or comma-delimited string\n  const array = Is.string(elements) ? elements.split(',') : elements\n  const strings =Is.string(array[0])\n  const values = array.map(element => strings ? `\"${element}\"` : element)\n  const type = strings ? 'String' : 'Number'\n  const expression = `([${values.join(',')}].includes(${type}(${condition})))`\n  return expression\n}\n\nconst replaceOperators = (string) => { \n  return string.replaceAll(' or ', ' || ').replaceAll(' and ', ' && ')\n}\n\nObject.defineProperties(Evaluator.prototype, {\n  canvas: { get: function() { return this.context.canvas } },\n\n  ceil: { value: Math.ceil },\n\n  replaceKeys: {\n    value: function(expression) { \n      if (!Is.string(expression)) return expression\n\n      const expressions = Object.fromEntries(this.keys.map(key => ([\n        key, new RegExp(`\\\\b${key}\\\\b`, 'g')\n      ])))\n      Object.entries(expressions).forEach(([key, reg_exp]) => {\n        expression = expression.replaceAll(reg_exp, `${THIS}.get(\"${key}\")`) \n      })\n      return expression\n    }\n  },\n\n  conditionalValue: { \n    value: function(conditionals) {\n      if (!Is.array(conditionals)) return conditionals\n\n      let test_bool = false\n      for (let conditional of conditionals) {\n        const expression = replaceOperators(conditionalExpression(conditional))\n\n        test_bool = this.evaluateExpression(expression)\n        if (test_bool) return conditional.value\n      }\n      throw Errors.internal + 'no conditions were true'\n    }\n  },\n\n  evaluate: {\n    value: function(expressionOrConditions) {\n      const expression = this.conditionalValue(expressionOrConditions)\n      return this.evaluateExpression(expression)\n    }\n  },\n\n  evaluateExpression: {\n    value: function(expression) {\n      const script = `return ${this.replaceKeys(expression)}`\n      // console.log(\"evaluateScope\", script)\n      try {\n        const method = new Function(THIS, script)\n        return method(this) \n      } catch (exception) {\n        // console.warn(`Evaluation failed`, script, this, exception)\n        return expression\n      }\n    }\n  },\n\n  floor: { value: Math.floor },\n\n  get: { value: function(key) { \n    if (this.map.has(key)) return this.map.get(key)\n    const value = this[key]\n    if (KEYS_GETTERS.includes(key)) return value\n\n    if (Is.method(value)) return value.bind(this)\n\n    console.log(\"Evaluator.get\", key, value)\n    return value\n  } },\n  \n  keys: { \n    get: function() { return [...new Set([...this.map.keys(), ...KEYS])] } \n  },\n\n  mm_cmp: { value: function(a, b, x, y) { return ((a > b) ? x : y) } },\n  \n  mm_dimensions: { \n    get: function() { return `${this.mm_width}x${this.mm_height}` } \n  },\n\n  mm_duration: { get: function() { return this.timeRange.lengthSeconds } },\n\n  mm_fps: { get: function() { return this.timeRange.fps } },\n\n  mm_height: { get: function() { return this.dimensions.height } },\n\n  mm_horz: { \n    value: function(size, proud) { return this.sized(0, size, proud) } \n  },\n\n  mm_max: { value: Math.max },\n\n  mm_min: { value: Math.min },\n\n  mm_t: { get: function() { return this.timeRange.position } },\n\n  mm_vert: { \n    value: function(size, proud) { return this.sized(1, size, proud) } \n  },\n\n  mm_width: { get: function() { return this.dimensions.width } },\n\n  set: { value: function(key, value) { this.map.set(key, value) } },\n\n  sized: { value: function(vertical, size, proud) {\n    const scale = Is.float(size) ? size : parseFloat(size)\n    const value = parseFloat(this[KEYS_SIZED[vertical]])\n    const scaled = value * scale\n    if (! proud) return scaled\n\n    const other = parseFloat(this[KEYS_SIZED[Math.abs(vertical - 1)]])\n    if (other <= value) return scaled\n    \n    return value + (scale - 1.0) * other\n  }},\n\n  t: { get: function() { return this.mm_duration } },\n})\n\nexport { Evaluator }\n","import { Errors } from \"../Errors\";\nimport { Is } from \"../Is\";\n\n//import { MD5 } from \"../Utilities\"\n\nclass Cache {\n  constructor() {\n    this.__cached_urls = {}\n    this.__urls_by_md5 = {}\n  }\n\n  add(url, value){\n    const key = this.key(url)\n    // console.log(\"Cache.add\", url, key)\n    this.__cached_urls[key] = value\n    this.__urls_by_md5[key] = url\n  }\n\n  cached(url) { return !!this.get(url) }\n\n  get(url) { \n    const key = this.key(url)\n    // console.log(\"Cache.get\", url, key)\n    return this.__cached_urls[key] \n  }\n\n  key(url) {\n    if(!(Is.string(url) && !Is.empty(url))) throw Errors.url + url\n    return url\n  }\n\n  remove(url) {\n    const key = this.key(url)\n    // console.log(\"Cache.get\", url, key)\n    delete this.__cached_urls[key]\n    delete this.__urls_by_md5[key]\n  }\n  urls() { return Object.values(this.__urls_by_md5) }\n}\n\nconst CacheInstance = new Cache\nexport { CacheInstance as Cache }","\n\nimport { Base } from \"../Base\"\nimport { Cache } from \"../Cache\"\n//import { EventType } from \"../Types\"\n\nclass Loader extends Base {\n  constructor(object) {\n    super(object)\n    // console.log(\"Loader\", this.object)\n    this.promises = {}\n  }\n\n  get type() { return this.object.type }\n  \n  loadedUrl(url) { return Cache.cached(url) }\n  \n  loadedUrls(urls) { return urls.every(url => this.loadedUrl(url)) }\n\n  loadUrl(url) {\n    if (this.promises[url]) return this.promises[url]\n    if (Cache.cached(url)) return Promise.resolve(Cache.get(url))\n\n    const promise = this.requestUrl(url)\n    this.promises[url] = promise\n    return promise.then(processed => {\n      // console.log(this.constructor.name, \"loadUrl\", processed.constructor.name)\n      Cache.add(url, processed)\n      delete this.promises[url]\n      return processed\n    })\n  }\n\n  loadUrls(urls) { \n    return Promise.all(urls.map(url => this.loadUrl(url)))\n  }\n}\n\nexport { Loader }\n","import { Base } from \"../Base\"\n\nclass AudioProcessor extends Base {\n  get audioContext() { return this.object.audioContext }\n  \n  process(url, buffer) {\n    return new Promise((resolve, reject) => {\n      return this.audioContext.decodeAudioData(\n        buffer, \n        audioData => resolve(audioData), \n        error => reject(error)\n      ) \n    })\n  }\n}\n\nexport { AudioProcessor }","import { Cache } from \"../Cache\"\n\nclass FontProcessor {\n  process(url, buffer) {\n    const family = Cache.key(url)\n    const font_face = new FontFace(family, buffer)\n    const promise = font_face.load()\n    promise.then(() => {\n      document.fonts.add(font_face)\n      return { family }\n    })\n    return promise\n  }\n}\n\nexport { FontProcessor }","\nclass ImageProcessor {\n  process(url, buffer) {\n    console.log(\"ImageProcessor.process\", url)\n  }\n}\n\nexport { ImageProcessor }","\nclass ModuleProcessor {\n  process(url, buffer) {\n    \n  }\n}\n\nexport { ModuleProcessor }","import { Factory } from \"./Factory\"\nimport { LoadType } from \"../Types\"\nimport { AudioProcessor, FontProcessor, ImageProcessor, ModuleProcessor } from \"../Processor\"\n\nclass ProcessorFactory extends Factory {\n  constructor() {\n    super()\n    this.install(LoadType.audio, AudioProcessor)\n    this.install(LoadType.font, FontProcessor)\n    this.install(LoadType.image, ImageProcessor)\n    this.install(LoadType.module, ModuleProcessor)\n  }\n}\n\nconst ProcessorFactoryInstance = new ProcessorFactory\nexport { ProcessorFactoryInstance as ProcessorFactory }\n\n","\nimport { ProcessorFactory } from \"../Factory/ProcessorFactory\";\nimport { LoadType } from \"../Types\";\nimport { Loader } from \"./Loader\";\n\nclass AudioLoader extends Loader {\n  constructor(object) {\n    super(object)\n    this.object.type ||= LoadType.audio\n  }\n\n  get audioContext() { return this.object.audioContext }\n  set audioContext(value) { this.object.audioContext = value }\n\n  async requestUrl(url) {\n    return fetch(url).then(response => {\n      console.log(\"AudioLoader.requestUrl fetch\", url, response.constructor.name)\n      return response.arrayBuffer()\n    }).then(loaded => {\n      console.log(\"AudioLoader.requestUrl arrayBuffer\", url, loaded.constructor.name)\n      const options = { type: this.type, audioContext: this.audioContext }\n      const processor = ProcessorFactory.createFromObject(options)\n      return processor.process(url, loaded)\n    })\n  }\n}\n\nexport { AudioLoader }","import { LoadType } from \"../Types\"\nimport { ProcessorFactory } from \"../Factory/ProcessorFactory\"\nimport { Loader } from \"./Loader\"\n\nclass FontLoader extends Loader {\n  constructor(object) {\n    super(object)\n    this.object.type ||= LoadType.font\n  }\n\n  async requestUrl(url) {\n    // console.log(\"FontLoader.requestUrl\", url)\n    \n    return fetch(url).then(response => {\n      // console.log(\"FontLoader.requestUrl fetch\", url, response.constructor.name)\n      return response.arrayBuffer()\n    }).then(loaded => {\n      // console.log(\"FontLoader.requestUrl arrayBuffer\", url, loaded.constructor.name)\n      const processor = ProcessorFactory.create(this.type)\n      return processor.process(url, loaded)\n    })\n  }\n}\n\nexport { FontLoader }","import { LoadType } from \"../Types\"\nimport { Loader } from \"./Loader\"\n\nclass ImageLoader extends Loader {\n  constructor(object) {\n    super(object)\n    this.object.type ||= LoadType.image\n  }\n  \n  requestUrl(url) {\n    // console.log(\"ImageLoader.requestUrl\", url)\n    return new Promise((resolve, reject) => {\n      const image = new Image()\n      image.onload = event => resolve(event.target)\n      image.onerror = event => reject(event)\n      image.crossOrigin = \"Anonymous\"\n      image.src = url  \n      return image\n    })\n  }\n}\n\nexport { ImageLoader }","import { LoadType } from \"../Types\"\nimport { Loader } from \"./Loader\"\n\nclass ModuleLoader extends Loader {\n  constructor(object) {\n    super(object)\n    this.object.type ||= LoadType.module\n  }\n  requestUrl(url) { return import(url) }\n}\n\nexport { ModuleLoader }","import { Factory } from \"./Factory\"\nimport { LoadType } from \"../Types\"\nimport { AudioLoader, FontLoader, ImageLoader, ModuleLoader } from \"../Loader\"\n\nclass LoaderFactory extends Factory {\n  constructor() {\n    super()\n    this.install(LoadType.audio, AudioLoader)\n    this.install(LoadType.font, FontLoader)\n    this.install(LoadType.image, ImageLoader)\n    this.install(LoadType.module, ModuleLoader)\n  }\n}\n\nconst LoaderFactoryInstance = new LoaderFactory\nexport { LoaderFactoryInstance as LoaderFactory }\n\n","import { LoadTypes } from \"../Types\"\nimport { LoaderFactory } from \"../Factory/LoaderFactory\"\nimport { Is } from \"../Is\"\nimport { Cache } from \"../Cache\"\n\nclass UrlsByType {\n  static get none() { return UrlsByTypeNone }\n\n  constructor() { this.loaders = {} }\n\n  get loaded() { return this.urls.every(url => Cache.cached(url)) }\n\n  get urls() { return LoadTypes.flatMap(type => this[type]) }\n\n  get urlsUnloaded() { return this.urls.filter(url => !Cache.cached(url)) }\n\n  concat(object) {\n    LoadTypes.forEach(type => {\n      const urls = this[type]\n      urls.splice(0, urls.length, ...new Set([...urls, ...object[type]]))\n    })\n  }\n\n  load(audioContext) {\n    const promises = LoadTypes.flatMap(type => {\n      const urls = this[type]\n      if (urls.length === 0) return []\n\n      if (Is.undefined(this.loaders[type])) {\n        const options = { type: type, audioContext: audioContext }\n        this.loaders[type] = LoaderFactory.createFromObject(options)\n      }\n      return this.loaders[type].loadUrls(urls)\n    })\n    return Promise.all(promises)\n  }\n\n}\n\nconst definition = Object.fromEntries(LoadTypes.map(type => [type, {\n  get: function() { \n    const key = `__${type}`\n    if (Is.undefined(this[key])) this[key] = [] \n    return this[key]\n  }\n}]))\nObject.defineProperties(UrlsByType.prototype, definition)\nconst UrlsByTypeNone = new UrlsByType\nexport { UrlsByType }","const fromPoint = (pt, width) => pt.y * width + pt.x\n\nconst toPoint = (index, width) => {\n  return { x: index % width, y: Math.floor(index / width) }\n}\n\nconst toIndex = pixel => pixel * 4\n\nconst rgbAtIndex = (index, pixels) => {\n  if (index < 0) return\n  if (index > pixels.length - 4) return\n\n  return {\n    r: pixels[index], g: pixels[index + 1],\n    b: pixels[index + 2], a: pixels[index + 3],\n  }\n}\n\nconst rgb = (pixel, data) => rgbAtIndex(toIndex(pixel), data)\n\nconst safePixel = (pixel, x_dif, y_dif, width, height) => {\n  const pt = toPoint(pixel, width)\n  pt.x = Math.max(0, Math.min(width - 1, pt.x + x_dif));\n  pt.y = Math.max(0, Math.min(height - 1, pt.y + y_dif));\n  return fromPoint(pt, width)\n}\n\nconst safePixels = (pixel, width, height, size = 3) => {\n  const pixels = []\n  const half_size = Math.floor(size / 2)\n  for (let y = 0; y < size; y++) {\n    for (let x = 0; x < size; x++) {\n      pixels.push(safePixel(pixel, x - half_size, y - half_size, width, height))\n    }\n  }\n  return pixels\n}\n\nconst rgbs = (pixel, data, width, height, size) => {\n  return safePixels(pixel, width, height, size).map(pixel => rgb(pixel, data))\n}\n\nconst color = (value) => {\n  const string = String(value)\n  if (string.slice(0, 2) === \"0x\") return \"#\" + string.slice(2)\n\n  return string\n}\n\nexport const Pixel = {\n  color,\n  rgbAtIndex,\n  rgbs,\n}\n","import { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\n\nclass Property {\n\n}\n\nObject.defineProperties(Property.prototype, {\n  modularPropertyTypeIds: { \n    get: function() { \n      if (Is.undefined(this.__modularPropertyTypeIds)) {\n        const ids = Object.keys(this.propertyTypes)\n        this.__modularPropertyTypeIds = ids.filter(id => \n          this.propertyTypes[id].modular\n        )\n      }\n      return this.__modularPropertyTypeIds \n    }\n  },\n  orDefault: { value: function(property) {\n    const { value, type } = property\n    return Is.defined(value) ? value : this.propertyTypeDefault(value, type)\n  }},\n  property_types: { // deprecated \n    get: function() {\n      console.warn(Errors.deprecation.property_types)\n      return this.propertyTypes\n    }\n  },\n  propertyType: { value: function(type) { return this.propertyTypes[type] } },\n  propertyTypeDefault: {\n    value: function(type) {\n      if (!Is.string(type) || Is.empty(type)) return\n      \n      const property_type = this.propertyType(type)\n      if (!Is.object(property_type)) return\n      \n      if (Is.defined(property_type.value)) return property_type.value\n      if (property_type.type) return new property_type.type()\n    }\n  },\n  propertyTypes: { \n    value: {\n      number: {\n        type: Number,\n        value: 0,\n      },\n      integer: {\n        type: Number,\n        value: 0,\n      },\n      rgba: {\n        type: String,\n        value: '#000000FF',\n      },\n      rgb: {\n        type: String,\n        value: '#000000',\n      },\n      font: {\n        type: String,\n        value: 'com.moviemasher.font.default',\n        modular: true,\n      },\n      fontsize: {\n        type: Number,\n        value: 13,\n      },\n      direction4:{\n        type: Number,\n        values: [\n          { id: 0, identifier: 'top', label: 'Top'},\n          { id: 1, identifier: 'right', label: 'Right'},\n          { id: 2, identifier: 'bottom', label: 'Bottom'},\n          { id: 3, identifier: 'left', label: 'Left'},\n        ],\n        value: 0,\n      },\n      direction8:{\n        type: Number,\n        values: [\n          { id: 0, identifier: \"top\", label: \"Top\"},\n          { id: 1, identifier: \"right\", label: \"Right\"},\n          { id: 2, identifier: \"bottom\", label: \"Bottom\"},\n          { id: 3, identifier: \"left\", label: \"Left\"},\n          { id: 4, identifier: \"top_right\", label: \"Top Right\"},\n          { id: 5, identifier: \"bottom_right\", label: \"Bottom Right\"},\n          { id: 6, identifier: \"bottom_left\", label: \"Bottom Left\"},\n          { id: 7, identifier: \"top_left\", label: \"Top Left\"},\n        ],\n        value: 0,\n      },\n      string: {\n        type: String,\n        value: '',\n      },\n      pixel: {\n        type: Number,\n        value: 0.0,\n      },\n      mode: {\n        type: String,\n        value: 'normal',\n        values: [\n          {id: \"burn\", composite: \"color-burn\", label: \"Color Burn\"},\n          {id: \"dodge\", composite: \"color-dodge\", label: \"Color Dodge\"},\n          {id: \"darken\", composite: \"darken\", label: \"Darken\"},\n          {id: \"difference\", composite: \"difference\", label: \"Difference\"},\n          {id: \"exclusion\", composite: \"exclusion\", label: \"Exclusion\"},\n          {id: \"hardlight\", composite: \"hard-light\", label: \"Hard Light\"},\n          {id: \"lighten\", composite: \"lighter\", label: \"Lighten\"},\n          {id: \"multiply\", composite: \"multiply\", label: \"Multiply\"},\n          {id: \"normal\", composite: \"normal\", label: \"Normal\"},\n          {id: \"overlay\", composite: \"overlay\", label: \"Overlay\"},\n          {id: \"screen\", composite: \"screen\", label: \"Screen\"},\n          {id: \"softlight\", composite: \"soft-light\", label: \"Soft Light\"},\n          {id: \"xor\", composite: \"xor\", label: \"Xor\"},\n        ]\n      },\n      text: {\n        type: String,\n        value: '',\n      },\n    },\n  }\n})\n\nconst PropertyInstance = new Property\nexport { PropertyInstance as Property }","\n\nconst Colors = {\n  yuv2rgb: function(yuv) {\n    var k, rgb = {};\n    for(k in yuv) yuv[k] = parseInt(yuv[k]);\n    rgb.r = yuv.y + 1.4075 * (yuv.v - 128);\n    rgb.g = yuv.y - 0.3455 * (yuv.u - 128) - (0.7169 * (yuv.v - 128));\n    rgb.b = yuv.y + 1.7790 * (yuv.u - 128);\n    for (k in rgb) rgb[k] = Math.min(255, Math.max(0, Math.floor(rgb[k])));\n    return rgb;\n  },\n  rgb2hex: function(rgb){\n    var r, g, b;\n    r = rgb.r.toString(16);\n    g = rgb.g.toString(16);\n    b = rgb.b.toString(16);\n    if (r.length < 2) r = \"0\" + r;\n    if (g.length < 2) g = \"0\" + g;\n    if (b.length < 2) b = \"0\" + b;\n    return \"#\" + r + g + b;\n  },\n  yuv_blend: function(yuvs, yuv2, similarity, blend){\n    var du, dv, diff = 0.0, i, z = yuvs.length;\n    for (i = 0; i < z; i++){\n      du = (yuvs[i].u - yuv2.u);\n      dv = (yuvs[i].v - yuv2.v);\n      diff += Math.sqrt((du * du + dv * dv) / (255.0 * 255.0));\n    }\n    diff = (diff / Number(z));\n    if (blend > 0.0001) {\n      return Math.min(1.0, Math.max(0.0, (diff - similarity) / blend)) * 255.0;\n    }\n    return (diff > similarity) ? 255 : 0;\n  },\n  rgb2yuv: function(rgb) {\n    var k, yuv = {};\n    for(k in rgb) rgb[k] = parseInt(rgb[k]);\n    yuv.y = rgb.r * 0.299000 + rgb.g * 0.587000 + rgb.b * 0.114000;\n    yuv.u = rgb.r * -0.168736 + rgb.g * -0.331264 + rgb.b * 0.500000 + 128;\n    yuv.v = rgb.r * 0.500000 + rgb.g * -0.418688 + rgb.b * -0.081312 + 128;\n    for(k in yuv) yuv[k] = Math.floor(yuv[k]);\n    return yuv;\n  },\n}\nexport { Colors }","\nclass Context {\n  createDrawing(width, height) {\n    const context = this.createVideo()\n    if (1 <= width) context.canvas.width = width\n    if (1 <= height) context.canvas.height = height\n    return context\n  }\n\n  createDrawingLike(drawing) {\n    return this.createDrawing(drawing.canvas.width, drawing.canvas.height)\n  }\n\n  createAudio() { \n    const klass = window.AudioContext || window.webkitAudioContext\n    if (!klass) return\n    \n    return new klass\n  } \n\n  createCanvas() { \n    return document && document.createElement(\"canvas\") \n  }\n  \n  createVideo(canvas) { \n    const element = canvas || this.createCanvas()\n    return element && element.getContext(\"2d\") \n  }\n}\n\nconst ContextFactoryInstance = new Context\nexport { ContextFactoryInstance as Context }","\nimport { Action } from \"./Action\";\nimport { Utilities } from \"../Utilities\";\n\nclass AddEffectAction extends Action {\n  redoAction() { this.effects.splice(this.index, 0, this.effect) }\n  \n  undoAction() { Utilities.deleteFromArray(this.effects, this.effect) }\n}\n\nexport { AddEffectAction }","import { AddTrackAction } from \"./AddTrackAction\";\n\nclass AddClipToTrackAction extends AddTrackAction {\n  get clips() { return this.track.clips }\n\n  get track() { return this.mash[this.trackType][this.trackIndex] }\n\n  redoAction() {\n    // create track if needed\n    for (let i = 0; i < this.createTracks; i++) { super.redoAction() } \n    this.mash.addClipsToTrack([this.clip], this.trackIndex, this.insertIndex)\n  }\n\n  undoAction() {\n    this.mash.removeClipsFromTrack([this.clip])\n    for (let i = 0; i < this.createTracks; i++) { super.undoAction() } \n  }\n}\n\nexport { AddClipToTrackAction }\n ","import { Action } from \"./Action\";\n\nclass MoveClipsAction extends Action {\n  addClips(trackIndex, insertIndex) {\n    this.mash.addClipsToTrack(this.clips, trackIndex, insertIndex)\n  }\n\n  redoAction() {\n    if (this.redoFrames) {\n      this.clips.forEach((clip, index) => clip.frame = this.redoFrames[index])\n    }\n    this.addClips(this.trackIndex, this.insertIndex)\n  }\n\n  undoAction() {\n    if (this.undoFrames) {\n      this.clips.forEach((clip, index) => clip.frame = this.undoFrames[index])\n    }\n    this.addClips(this.undoTrackIndex, this.undoInsertIndex)\n  }\n}\nexport { MoveClipsAction }\n","import { Is } from \"../../Is\"\n\nexport const track = { \n  track: { \n    get: function() { \n      if (Is.undefined(this.__track)) {\n        const track = this.object.track \n        this.__track = Is.defined(track) ? track : -1\n      }\n      return this.__track \n    },\n    set: function(value) { this.__track = value }\n  }, \n}\n","import { track } from \"../Clip/with/track\";\nimport { Action } from \"./Action\";\n\nclass RemoveClipsAction extends Action {\n  get trackIndex() { return track.index }\n\n  redoAction() {\n    this.mash.removeClipsFromTrack(this.clips)\n  }\n\n  undoAction() {\n    this.mash.addClipsToTrack(this.clips, this.trackIndex, this.index)\n  }\n}\n\nexport { RemoveClipsAction }\n ","import { Action } from \"./Action\";\n\nclass SplitAction extends Action {\n  redoAction() {\n    this.trackClips.splice(this.index, 0, this.insertClip)\n    this.splitClip.frames = this.redoFrames\n  }\n\n  undoAction() {\n    this.splitClip.frames = this.undoFrames\n    this.trackClips.splice(this.index, 1)\n  }\n}\n\nexport { SplitAction }","import { Action } from \"./Action\";\n\nclass MoveEffectsAction extends Action {\n  redoAction() {\n    this.effects.splice(0, this.effects.length, ...this.redoEffects)\n  }\n\n  undoAction() {\n    this.effects.splice(0, this.effects.length, ...this.undoEffects)\n  }\n}\n\nexport { MoveEffectsAction }","import { Action } from \"../Action\"\nimport { Base } from \"../Base\"\nimport { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\n\nclass Actions extends Base {\n  constructor(object) {\n    super(object)\n    \n    this.actions = []\n    this.index = -1\n  }\n\n  get canRedo() { return this.index < this.actions.length - 1 }\n\n  get canUndo() { return this.index > -1 }\n\n  get currentAction() { return this.actions[this.index] }\n\n  get currentActionLast() { return this.canUndo && !this.canRedo }\n\n  get mash() { return this.object.mash }\n\n  // TODO: remove\n  get masher() { return this.object.masher }\n\n  do(action) {\n    if (!Is.instance(action, Action)) throw(Errors.action)\n\n    action.actions = this\n    const remove = this.actions.length - (this.index + 1)\n    const removed = remove ? this.actions.splice(this.index + 1, remove) : []\n    \n    this.actions.push(action)\n    this.redo()\n    return removed\n  }\n\n  redo() {\n    this.index ++\n    const action = this.currentAction\n    action.redo()\n    return action\n  }\n\n  undo(){\n    const action = this.currentAction\n    this.index--\n    action.undo()\n    return action\n  }\n}\n\nexport { Actions }","\n\nconst byFrame = (a, b) => a.frame - b.frame\nconst byTrack = (a, b) => a.track - b.track\nconst byLabel = (a, b) => {\n  if (a.label < b.label) return -1\n  if (a.label > b.label) return 1\n  return 0\n}\n\nconst Sort = {\n  byFrame,\n  byLabel,\n  byTrack,\n}\n\nexport { Sort }","import { Sort } from \"../Sort\"\nimport { Utilities } from \"../Utilities\"\nimport fontDefaultJson from \"./json/font/default.json\"\nimport effectBlurJson from \"./json/effect/blur.json\"\nimport effectChromaKeyJson from \"./json/effect/chromakey.json\"\nimport effectEmbossJson from \"./json/effect/emboss.json\"\nimport effectGrayscaleJson from \"./json/effect/grayscale.json\"\nimport effectSepiaJson from \"./json/effect/sepia.json\"\nimport effectSharpenJson from \"./json/effect/sharpen.json\"\nimport effectTextJson from \"./json/effect/text.json\"\nimport mergerBlendJson from \"./json/merger/blend.json\"\nimport mergerCenterJson from \"./json/merger/center.json\"\nimport mergerConstrainedJson from \"./json/merger/constrained.json\"\nimport mergerDefaultJson from \"./json/merger/default.json\"\nimport mergerOverlayJson from \"./json/merger/overlay.json\"\nimport scalerDefaultJson from \"./json/scaler/default.json\"\nimport scalerPanJson from \"./json/scaler/pan.json\"\nimport scalerScaleJson from \"./json/scaler/scale.json\"\nimport themeColorJson from \"./json/theme/color.json\"\nimport themeTextJson from \"./json/theme/text.json\"\nimport { ModuleType, ModuleTypes } from \"../Types\"\nimport { Errors } from \"../Errors\"\n\n\nclass Module {\n  constructor() {\n    this.defaults = {\n      font: fontDefaultJson,\n      merger: mergerDefaultJson,\n      scaler: scalerDefaultJson,\n    }\n    this[ModuleType.theme] = [\n      themeColorJson, \n      themeTextJson,\n    ]\n    this[ModuleType.effect] = [\n      effectBlurJson,\n      effectChromaKeyJson,\n      effectEmbossJson,\n      effectGrayscaleJson,\n      effectSepiaJson,\n      effectSharpenJson,\n      effectTextJson\n    ]\n    this[ModuleType.font] = [this.defaults.font]\n    this[[ModuleType.merger]] = [\n      mergerBlendJson,\n      mergerCenterJson,\n      mergerConstrainedJson,\n      mergerOverlayJson,\n      this.defaults.merger,\n    ]\n    this[ModuleType.scaler] = [\n      scalerPanJson,\n      scalerScaleJson,\n      this.defaults.scaler,\n    ]\n  }\n\n  addModulesOfType(objects, type) {\n    if (! ModuleTypes.includes(type)) {\n      console.warn(Errors.deprecation.addModulesOfType + type)\n      return \n    }\n    const array = this[type]\n    let changed = false\n    objects.forEach(object => {\n      const { id } = object\n      const is_default = id === 'com.moviemasher.' + type + '.default'\n      const existing = this[type].find(object => object.id === id)\n      if (existing) Utilities.deleteFromArray(array, existing)\n      array.push(object)\n      if (is_default) this.defaults[type] = object \n      changed = true\n    })\n    if (changed) array.sort(Sort.byLabel)\n    return changed\n  }\n\n  fontById(id) { return this.ofType(id, ModuleType.font) }\n\n  scalerById(id) { return this.ofType(id, ModuleType.scaler) }\n\n  mergerById(id) { return this.ofType(id, ModuleType.merger) }\n\n\n  effectById(id) { return this.ofType(id, ModuleType.effect) }\n\n  \n  themeById(id) { return this.ofType(id, ModuleType.theme) }\n\n  defaultOfType(type) { return { ...this.defaults[type], type } }\n\n  objectWithDefaultId(type) {\n    const module = this.defaultOfType(type)\n    if (module) return { id: module.id, type }\n  }\n\n  ofType(id, type) { \n    if (! ModuleTypes.includes(type)) {\n      console.warn(\"Module.ofType unsupported type\", type)\n      return \n    }\n    const module = this[type].find(object => object.id === id)\n    if (module) return { ...module, type }\n  }\n}\n\nconst ModuleInstance = new Module\nexport { ModuleInstance as Module }\n","function Id() {\n  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c => {\n    const array = new Uint8Array(1)\n    return  (c ^ crypto.getRandomValues(array)[0] & 15 >> c / 4).toString(16)\n  })\n}\n\nexport { Id }","import { Id } from \"../../Utilities/Id\"\n\nexport const id = { \n  id: { get: function() { return this.__id ||= this.initializeId } },\n  initializeId: { get: function() { return this.object.id || Id() } },\n}\n","export const label = { label: { get: function() { return this.object.label } } }\n","export const object = { \n  property: { value: function(key) { return this[key] || this.object[key] } },\n  \n}\n","export const toJSONFromObject = {\n  toJSON: { value: function() { return this.object } },\n}","import { Is } from \"../../Is\"\nimport { id } from \"../../Base/with/id\";\nimport { label } from \"./label\"\nimport { object } from \"../../Base/with/object\"\nimport { Property } from \"../../Utilities\";\nimport { toJSONFromObject } from \"../../Base/with/toJSONFromObject\";\n\nexport const sharedMedia = {\n  ...object,\n  ...toJSONFromObject,\n  ...id,\n  ...label,\n  properties: { \n    get: function() { \n      if (Is.undefined(this.__properties)) this.__properties = this.propertiesInitialize \n      return this.__properties \n    }\n  },\n  propertyNames: { get: function() { return Object.keys(this.properties) } },\n  propertiesInitialize: { \n    get: function() {\n      const object = { label: { type: 'string' } }\n      if (this.propertiesTiming) Object.assign(object, this.propertiesTiming)\n      if (this.propertiesAudible) Object.assign(object, this.propertiesAudible)\n      if (this.propertiesModular) Object.assign(object, this.propertiesModular)\n      return object\n    }\n  },\n  source: { get: function() { return this.object.source } },\n  initializeInstance: { value: function(clip, object) {\n    const properties = this.properties \n    if (!Is.object(properties) || Is.empty(properties)) return\n\n    const names = this.propertyNames.filter(name => !Reflect.has(clip, name))\n    if (!Is.emptyarray(names)) {\n      const entries = names.map(name => [name, { \n        get: function() { \n          const key = `__${name}`\n          if (Is.undefined(this[key])) {\n            const property = properties[name]\n            this[key] = Property.orDefault(property)\n            //console.log(\"initialized\", key, this[key])\n          }\n          return this[key]\n        },\n        set: function(value) { this[`__${name}`] = value }\n      }])\n      Object.defineProperties(clip, Object.fromEntries(entries))\n      this.propertyNames.forEach(name => {\n        if (Is.defined(object[name])) clip[name] = object[name]\n      })\n    }\n    \n    \n  }},\n}","import { UrlsByType } from \"../../Utilities\";\n\nexport const inaudible = { \n  audible: { value: false },\n  urlsAudibleInTimeRangeForClipByType: { \n    value: function() { return UrlsByType.none } \n  },\n}","import { TrackType } from \"../../Types\";\n\nexport const visible = { \n  visible: { value: true },\n  trackType: { value: TrackType.video },\n}","import { Is } from \"../../Is\"\nimport { Property } from \"../../Utilities\"\n\nexport const propertiesModular = { \n  propertiesModular: { \n    get: function() { \n      if (Is.undefined(this.__propertiesModular)) {\n        this.__propertiesModular = this.object.properties || {}\n      }\n      return this.__propertiesModular \n    }\n  }, \n  modularPropertiesByType: {\n    get: function() {\n      if (Is.undefined(this.__modularPropertiesByType)) {\n        this.__modularPropertiesByType = this.initializeModularPropertiesByType\n      }\n      return this.__modularPropertiesByType\n    }\n  },\n  initializeModularPropertiesByType: {\n    get: function() {\n      const object = {}\n      Property.modularPropertyTypeIds.forEach(type => {\n        Object.keys(this.propertiesModular).forEach(property => {\n          if (type === this.propertiesModular[property].type) {\n            object[type] ||= []\n            object[type].push(property)\n          }\n        })\n      })\n      return object\n    }\n  },\n} \n","import { propertiesModular } from \"./propertiesModular\";\n\nexport const modular = { \n  modular: { value: true },\n  ...propertiesModular,\n}\n","\nexport const parameters = {\n  parameters: { get: function() { return this.object.parameters } },\n}","function CoreFilter() {}\n\nObject.defineProperties(CoreFilter.prototype, {\n  scopeSet: { value: function() {}},\n  draw: { value: function(evaluator) { return evaluator.context } },\n})\n\nexport { CoreFilter }\n","import { CoreFilter } from \"./CoreFilter\"\nimport { Property, Utilities } from \"../Utilities\"\n\nconst array_key = (array, value, key, id_key) => {\n  return Utilities.findBy(array, value, id_key)[key];\n}\n\nclass BlendFilter extends CoreFilter {\n  draw(evaluator, evaluated, outputContext) {\n    const context = evaluator.context\n    \n    const mode = array_key(Property.propertyTypes.mode.values, evaluated.all_mode, 'composite')\n    outputContext.globalCompositeOperation = mode\n    outputContext.drawImage(context.canvas, 0, 0)\n    outputContext.globalCompositeOperation = 'normal'\n    return outputContext\n  }\n}\nconst BlendFilterInstance = new BlendFilter\nexport { BlendFilterInstance as BlendFilter } \n","import { CoreFilter } from \"./CoreFilter\"\nimport { Colors, Pixel } from \"../Utilities\"\n\nclass ChromaKeyFilter extends CoreFilter {\n  get parameters() { \n    return [\n      { name: \"color\", value: \"color\" },\n      { name: \"similarity\", value: \"similarity\" },\n      { name: \"blend\", value: \"blend\" }\n    ]\n  }\n\n  draw(evaluator, evaluated) {\n    const context = evaluator.context\n    const canvas = context.canvas\n    const { width, height } = canvas\n    const { blend, color, similarity, accurate } = evaluated\n    const components = color.substr(4, color.length - 5).split(',')\n    const colors = components.map(f => Number(f))\n    const rgb = { r: colors[0], g: colors[1], b: colors[2] }\n    const yuv = Colors.rgb2yuv(rgb)\n    const frame = context.getImageData(0, 0, width, height)\n    const pixels = frame.data\n    const yuvs = accurate ? (\n      this.yuvsFromPixelsAccurate(pixels, width, height)\n    ) : this.yuvsFromPixels(pixels)\n    \n    let offset = 0\n    yuvs.forEach(matrix => {\n      pixels[offset + 3] = Colors.yuv_blend(matrix, yuv, similarity, blend)\n      offset += 4\n    })\n    context.putImageData(frame, 0, 0)\n    return context\n  }\n\n  yuvsFromPixelsAccurate(pixels, width, height) {\n    let index = pixels.length / 4\n    const array = []\n    while(index--) {\n      const offset = index * 4\n      const rgbs = Pixel.rgbs(offset, pixels, width, height)\n      array.push(rgbs.map(rgb => Colors.rgb2yuv(rgb)))\n    }\n    return array\n  }\n\n  yuvsFromPixels(pixels) {\n    let index = pixels.length / 4\n    const array = []\n    while(index--) {\n      const offset = index * 4\n      array.push([Colors.rgb2yuv(Pixel.rgbAtIndex(offset, pixels))])\n    }\n    return array\n  }\n}\nconst ChromaKeyFilterInstance = new ChromaKeyFilter\nexport { ChromaKeyFilterInstance as ChromaKeyFilter } ","import { Is } from \"../Is\";\nimport { Pixel } from \"../Utilities\";\nimport { CoreFilter } from \"./CoreFilter\"\n\nclass ColorFilter extends CoreFilter {\n  draw(evaluator, evaluated) {\n    const { context } = evaluator\n    const { color } = evaluated\n    if (! Is.string(color)) return context\n\n    const { canvas } = context\n    const { width, height } = canvas\n\n    context.fillStyle = Pixel.color(color)\n    context.fillRect(0, 0, width, height)\n    return context\n  }\n\n  get parameters() { \n    return [\n      { name: \"color\", value: \"color\" },\n      { name: \"size\", value: \"mm_dimensions\" },\n      { name: \"duration\", value: \"mm_duration\" },\n      { name: \"rate\", value: \"mm_fps\" },\n    ]\n  }\n}\nconst ColorFilterInstance = new ColorFilter\nexport { ColorFilterInstance as ColorFilter }","\nimport { CoreFilter } from \"./CoreFilter\"\n\nclass ColorChannelMixerFilter extends CoreFilter {\n  draw(evaluator, evaluated) {\n    const context = evaluator.context\n    const rgbas = 'rgba'.split('');\n    var key, first, second, j, i, z = rgbas.length;\n    for (i = 0; i < z; i++) {\n      first = rgbas[i];\n      for (j = 0; j < z; j++) {\n        second = rgbas[j];\n        key = first + second;\n        if (null === evaluated[key]) evaluated[key] = ( first === second ? 1 : 0);\n      }\n    }\n    var red, green, blue, alpha, width, height, image_data, data;\n    width = context.canvas.width;\n    height = context.canvas.height;\n    image_data = context.getImageData(0, 0, width, height);\n    data = image_data.data;\n    z = data.length;\n    for (i = 0; i < z; i += 4) {\n      red = data[i];\n      green = data[i + 1];\n      blue = data[i + 2];\n      alpha = data[i + 3];\n      data[i] = red*evaluated.rr + green*evaluated.rg + blue*evaluated.rb + alpha*evaluated.ra;\n      data[i + 1] = red*evaluated.gr + green*evaluated.gg + blue*evaluated.gb + alpha*evaluated.ga;\n      data[i + 2] = red*evaluated.br + green*evaluated.bg + blue*evaluated.bb + alpha*evaluated.ba;\n      data[i + 3] = red*evaluated.ar + green*evaluated.ag + blue*evaluated.ab + alpha*evaluated.aa;\n    }\n    context.putImageData(image_data, 0, 0);\n    return context\n  }\n}\nconst ColorChannelMixerFilterInstance = new ColorChannelMixerFilter\nexport { ColorChannelMixerFilterInstance as ColorChannelMixerFilter } \n","import { Pixel } from \"../Utilities\";\nimport { CoreFilter } from \"./CoreFilter\"\n\nconst RBGA = 'rgba'\n\nconst parse = (evaluated) => {\n  const result = { bias: {}, rdiv: {}, matrix: {} }\n  RBGA.split('').forEach((channel, index) => {\n    const matrix = evaluated[`${index}m`].split(' ').map(i => parseInt(i))\n    result.matrix[channel] = matrix\n    result.rdiv[channel] = evaluated[`${index}rdiv`] || 1\n    if (String(result.rdiv[channel]).includes('/')) {\n      const array = result.rdiv[channel].split('/')\n      result.rdiv[channel] = parseFloat(array[0]) / parseFloat(array[1])\n    } else result.rdiv[channel] = parseFloat(result.rdiv[channel])\n    result.bias[channel] = evaluated[`${index}bias`] || 0\n  })\n  // console.log(ConvolutionFilter.name, \"parse\", evaluated, result)\n  return result\n  \n}\n\nconst matrix3 = (options, inputData, outputDdata, width, height) => {\n  const area = width * height;\n  for (let pixel = 0; pixel < area; pixel++) {\n    const rgbs = Pixel.rgbs(pixel, inputData, width, height)\n    RBGA.split('').forEach((channel, index) => {\n      const rdiv = options.rdiv[channel]\n      const matrix = options.matrix[channel]\n      const bias = options.bias[channel]\n      let sum = 0\n      for (let y = 0; y < 9; y++) sum += rgbs[y][channel] * matrix[y]\n      \n      sum = Math.floor(sum * rdiv + bias + 0.5)\n      outputDdata[pixel * 4 + index] = sum\n    })\n  }\n}\n\nclass ConvolutionFilter extends CoreFilter {\n draw(evaluator, evaluated) {\n    const options = parse(evaluated)\n    const context = evaluator.context\n    const canvas = context.canvas\n    const { width, height } = canvas\n    const input = context.getImageData(0, 0, width, height)\n    const output = context.createImageData(width, height)\n    matrix3(options, input.data, output.data, width, height)\n    context.putImageData(output, 0, 0)\n    return context\n  }\n}\n\nconst ConvolutionFilterInstance = new ConvolutionFilter\nexport { ConvolutionFilterInstance as ConvolutionFilter }","import { Is } from \"../Is\"\nimport { Context } from \"../Utilities\"\nimport { CoreFilter } from \"./CoreFilter\"\n\nclass CropFilter extends CoreFilter {\n  draw(evaluator, evaluated) {\n    const context = evaluator.context\n    const x = evaluated.x || 0\n    const y = evaluated.y || 0\n    const in_width = evaluator.get(\"mm_input_width\")\n    const in_height = evaluator.get(\"mm_input_height\")\n    let width = evaluated.w || evaluated.out_w\n    let height = evaluated.h || evaluated.out_h\n    if (2 > width + height) throw 'crop.draw invalid output dimensions'\n    if (!(in_width && in_height)) throw 'crop.draw invalid input dimensions'\n    \n    if (-1 === width) width = in_width * (height / in_height)\n    if (-1 === height) height = in_height * (width / in_width)\n\n    const drawing = Context.createDrawing(width, height)\n    drawing.drawImage(context.canvas, x, y, width, height, 0, 0, width, height)\n    return [drawing]\n  }\n  scopeSet(evaluator) {\n    const { width, height } = evaluator.context.canvas\n    evaluator.set(\"in_h\", height)\n    evaluator.set(\"mm_input_height\", height)\n    evaluator.set(\"in_w\", width)\n    evaluator.set(\"mm_input_width\", width)\n    if (Is.not(evaluator.get(\"x\"))) evaluator.set(\"x\", '((in_w - out_w) / 2)')\n    if (Is.not(evaluator.get(\"y\"))) evaluator.set(\"y\", '((in_h - out_h) / 2)')\n  }\n}\n\nconst CropFilterInstance = new CropFilter\nexport { CropFilterInstance as CropFilter }\n","import { CoreFilter } from \"./CoreFilter\"\nimport { Is } from '../Is'\nimport { Pixel } from \"../Utilities\"\n\nclass DrawBoxFilter extends CoreFilter {\n  draw(evaluator, evaluated) {\n    var context = evaluator.context\n    const color = (Is.undefined(evaluated.color) ? 'black' : evaluated.color)\n    const x = evaluated.x || 0\n    const y = evaluated.y || 0\n    const width = evaluated.width || context.canvas.width\n    const height = evaluated.height || context.canvas.height\n\n    context.fillStyle = Pixel.color(color)\n    context.fillRect(x, y, width, height)\n    return context\n  }\n}\n\nconst DrawBoxFilterInstance = new DrawBoxFilter\n\nexport { DrawBoxFilterInstance as DrawBoxFilter }","import { CoreFilter } from \"./CoreFilter\"\nimport { Cache } from \"../Cache\"\nimport { Module } from \"../Module\";\nimport { Pixel } from \"../Utilities\";\n\nconst mm_fontfile = font_id => Module.fontById(font_id).source\nconst mm_textfile = text => text\nconst mm_fontfamily = font_id => Cache.key(mm_fontfile(font_id))\n\nclass DrawTextFilter extends CoreFilter {\n  get parameters() {\n    return [\n      {\n        \"name\": \"fontcolor\",\n        \"value\":\"#000000\"\n      },{\n        \"name\": \"shadowcolor\",\n        \"value\":\"#FFFFFF\"\n      },{\n        \"name\": \"fontsize\",\n        \"value\":\"mm_vert(20)\"\n      },{\n        \"name\": \"x\",\n        \"value\":\"0\"\n      },{\n        \"name\": \"y\",\n        \"value\":\"0\"\n      },{\n        \"name\": \"shadowx\",\n        \"value\":\"mm_horz(5)\"\n      },{\n        \"name\": \"shadowy\",\n        \"value\":\"mm_vert(5)\"\n      },{\n        \"name\": \"fontfile\",\n        \"value\":\"mm_fontfile('com.moviemasher.font.default')\"\n      },{\n        \"name\": \"textfile\",\n        \"value\":\"Hello World\"\n      }\n    ]\n  }\n\n  draw(evaluator, evaluated) {\n    // console.log(this.constructor.name, \"draw\", evaluator, evaluated)\n    const context = evaluator.context\n    const family = mm_fontfamily(evaluator.get(\"fontface\"))\n    const { x, y, fontsize, fontcolor, text, textfile, shadowcolor } = evaluated\n\n    if (shadowcolor) {\n      context.shadowColor = shadowcolor\n      const { shadowx, shadowy/*, shadowblur */ } = evaluated\n      // shadowblur not supported in ffmpeg \n      // context.shadowBlur = shadowblur \n      context.shadowOffsetX = shadowx || 0 \n      context.shadowOffsetY = shadowy || 0 \n    }\n    \n    context.font = `${fontsize}px \"${family}\"`\n    context.fillStyle = Pixel.color(fontcolor)\n    context.fillText(text || textfile, x, Number(y) + Number(fontsize))\n  \n    if (shadowcolor) {\n      context.shadowColor = null\n      context.shadowOffsetX = 0 \n      context.shadowOffsetY = 0 \n      // context.shadowBlur = 0 \n    }\n    return context\n  }\n  scopeSet(evaluator) {\n    evaluator.set(\"text_w\", 0) // width of the text to draw\n    evaluator.set(\"text_h\", 0) // height of the text to draw\n    evaluator.set(\"mm_fontfamily\", mm_fontfamily)\n    evaluator.set(\"mm_textfile\", mm_textfile)\n    evaluator.set(\"mm_fontfile\", mm_fontfile)\n  }\n}\n\nconst DrawTextFilterInstance = new DrawTextFilter\nexport { DrawTextFilterInstance as DrawTextFilter }\n","import { Context } from \"../Utilities\"\nimport { CoreFilter } from \"./CoreFilter\"\n\nclass FadeFilter extends CoreFilter{\n  draw(evaluator) {\n    const context = evaluator.context\n    const drawing = Context.createDrawingLike(context)\n    drawing.globalAlpha = evaluator.get(\"mm_t\")\n    drawing.drawImage(context.canvas, 0, 0)\n    drawing.globalAlpha = 1\n    return drawing\n  }\n}\nconst FadeFilterInstance = new FadeFilter\nexport { FadeFilterInstance as FadeFilter }","import { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\nimport { CoreFilter } from \"./CoreFilter\"\n\nclass OverlayFilter extends CoreFilter {\n  draw(evaluator, evaluated, outputContext) {\n    if (Is.undefined(outputContext)) return\n\n    const { context } = evaluator    \n    const { canvas } = context\n    const { x, y } = evaluated\n    outputContext.drawImage(canvas, x, y)\n    return outputContext\n  }\n  scopeSet(evaluator) {\n    const { context } = evaluator\n    if (Is.undefined(context)) throw Errors.internal + evaluator.constructor.name\n    const { width, height } = context.canvas\n    evaluator.set(\"overlay_w\", width)\n    evaluator.set(\"overlay_h\", height)\n    \n  }\n}\nconst OverlayFilterInstance = new OverlayFilter\nexport { OverlayFilterInstance as OverlayFilter }","import { Context } from \"../Utilities\";\nimport { CoreFilter } from \"./CoreFilter\";\n\nclass ScaleFilter extends CoreFilter {\n  draw(evaluator, evaluated) {\n    const context = evaluator.context\n    let width = evaluated.w || evaluated.width\n    let height = evaluated.h || evaluated.height\n\n    if (2 > width + height) return context\n    \n    const in_width = evaluator.get(\"mm_input_width\")\n    const in_height = evaluator.get(\"mm_input_height\")\n    if (-1 === width) width = in_width * (height / in_height)\n    else if (-1 === height) height = in_height * (width / in_width)\n\n    const drawing = Context.createDrawing(width, height)\n    \n    drawing.drawImage(context.canvas, 0, 0, in_width, in_height, 0, 0, width, height)\n  \n    return drawing\n  }\n\n  scopeSet(evaluator) {\n    const { context } = evaluator\n    if (!context) throw 'context'\n    const { canvas } = context\n\n    if (!canvas) throw 'canvas'\n\n    const { width, height } = canvas\n    evaluator.set(\"in_h\", height)\n    evaluator.set(\"mm_input_height\", height)\n    evaluator.set(\"in_w\", width)\n    evaluator.set(\"mm_input_width\", width)\n  }\n}\nconst ScaleFilterInstance = new ScaleFilter\nexport { ScaleFilterInstance as ScaleFilter }\n","\nimport { CoreFilter } from \"./CoreFilter\"\n\nclass SetSarFilter extends CoreFilter {}\nconst SetSarFilterInstance = new SetSarFilter\nexport { SetSarFilterInstance as SetSarFilter }\n","import { Factory } from \"./Factory\";\nimport { FilterType } from \"../Types\"\nimport { BlendFilter } from \"../CoreFilter/BlendFilter\"\nimport { ChromaKeyFilter } from \"../CoreFilter/ChromaKeyFilter\"\nimport { ColorFilter } from \"../CoreFilter/ColorFilter\"\nimport { ColorChannelMixerFilter } from \"../CoreFilter/ColorChannelMixerFilter\"\nimport { ConvolutionFilter } from \"../CoreFilter/ConvolutionFilter\"\nimport { CropFilter } from \"../CoreFilter/CropFilter\"\nimport { DrawBoxFilter } from \"../CoreFilter/DrawBoxFilter\"\nimport { DrawTextFilter } from \"../CoreFilter/DrawTextFilter\"\nimport { FadeFilter } from \"../CoreFilter/FadeFilter\"\nimport { OverlayFilter } from \"../CoreFilter/OverlayFilter\"\nimport { ScaleFilter } from \"../CoreFilter/ScaleFilter\"\nimport { SetSarFilter } from \"../CoreFilter/SetSarFilter\"\n\nclass FilterFactory extends Factory {\n  constructor() {\n    super()\n    this.install(FilterType.blend, BlendFilter)\n    this.install(FilterType.chromakey, ChromaKeyFilter)\n    this.install(FilterType.colorchannelmixer, ColorChannelMixerFilter)\n    this.install(FilterType.color, ColorFilter)\n    this.install(FilterType.convolution, ConvolutionFilter)\n    this.install(FilterType.crop, CropFilter)\n    this.install(FilterType.drawbox, DrawBoxFilter)\n    this.install(FilterType.drawtext, DrawTextFilter)\n    this.install(FilterType.fade, FadeFilter)\n    this.install(FilterType.overlay, OverlayFilter)\n    this.install(FilterType.scale, ScaleFilter)\n    this.install(FilterType.setsar, SetSarFilter)\n  }\n\n  create(type) { return this.typeClass(type) }\n\n  createFromObject(object) { return this.create(object.id) }\n}\nconst FilterFactoryInstance = new FilterFactory\nexport { FilterFactoryInstance as FilterFactory }\n\n","export const drawFilters = {\n  drawFilters: { value: function(evaluator, context) {\n    // console.log(this.constructor.name, this.id, \"draw\", evaluator)\n    this.coreFilter.scopeSet(evaluator)\n    return this.coreFilter.draw(evaluator, this.evaluateScope(evaluator), context)\n  }}\n}","\nimport { MediaType } from \"../Types\"\nimport { sharedMedia } from \"./with/sharedMedia\";\nimport { modular } from \"./with/modular\"\nimport { parameters } from \"./with/parameters\";\nimport { Is } from \"../Is\";\nimport { FilterFactory } from \"../Factory/FilterFactory\";\nimport { Errors } from \"../Errors\";\nimport { CoreFilter } from \"../CoreFilter\";\nimport { drawFilters } from \"./with/drawFilters\";\n \nfunction FilterMedia(object) { this.object = object }\n\nObject.defineProperties(FilterMedia.prototype, {\n  type: { value: MediaType.filter },\n  ...sharedMedia,\n  ...modular,\n  ...parameters,\n  \n  coreFilter: { \n    get: function() { \n      if (Is.undefined(this.__coreFilter)) {\n        this.__coreFilter = FilterFactory.create(this.id)\n        Errors.throwUnlessInstance(this.__coreFilter, CoreFilter)\n      }\n      return this.__coreFilter \n    }\n  },\n  evaluateScope: { \n    value: function(evaluator) {\n      const evaluated = {}\n      const parameters = this.parameters || this.coreFilter.parameters\n      if (Is.not(parameters)) return evaluated\n     \n      parameters.forEach(parameter => {\n        const name = parameter.name\n        if (Is.not(name)) return\n        \n        evaluated[name] = evaluator.evaluate(parameter.value)\n        evaluator.set(name, evaluated[name])\n      })\n      return evaluated\n    }\n  },\n  ...drawFilters,\n})\n\nexport { FilterMedia }\n","\nimport { FilterMedia } from \"../FilterMedia\"\n\nexport const filters = { \n  filters: { \n    get: function() { return this.__filters ||= this.filtersInitialize } \n  }, \n  filtersInitialize: { \n    get: function() { \n      const array = this.object.filters || []\n      return array.map(object => new FilterMedia(object))\n    }\n  }\n} \n","\n  export const html = { \n    html: { get: function() { return this.object.html } },\n    inspector: { get: function() { return this.object.inspector } },\n  }","\nimport { Errors } from \"../../Errors\"\nimport { Is } from \"../../Is\"\nimport { Module } from \"../../Module\"\nimport { UrlsByType } from \"../../Utilities\"\n\nexport const urlsFromFilters = { \n  urlsVisibleInTimeRangeForClipByType: { \n    value: function(timeRange, clip) { \n      const urls = new UrlsByType\n      const properties_by_type = this.modularPropertiesByType\n      Object.keys(properties_by_type).forEach(type => {\n        const modular_properties = properties_by_type[type]\n        modular_properties.forEach(property => {\n          const value = clip.property(property)\n          // console.log(clip)\n          if (Is.defined(value)) {\n            const module = Module.ofType(value, type)\n            if (Is.defined(module)) {\n              urls[type].push(module.source)\n            }\n          } else throw(Errors.unknown.type + type)\n        }) \n      })\n     \n      return urls\n    } \n  },\n}\n\n// we no longer load filters - they must be registered or defined in full\n// urlsVisibleInTimeRange(timeRange) { \n//   const urls = super.urlsVisibleInTimeRange(timeRange)\n//   if (Is.array(this.filters)) {\n//     this.filters.forEach(filter => {\n//       const filter_id = filter.id\n//       if (!FilterFactory.created(filter_id)) {\n//         // console.log(`!FilterFactory.created(${filter_id})`, filter)\n//         const source = filter_config.source\n//         if (source) urls.push(source)\n//       }\n//     })\n//   }\n//   return urls\n// }\n\n","import { filters } from \"./filters\";\nimport { html } from \"./html\";\nimport { modular } from \"./modular\";\nimport { urlsFromFilters } from \"./urlsFromFilters\";\n\nexport const transform = {\n  ...filters,\n  ...urlsFromFilters,\n  ...html,\n  ...modular,\n}","import { MediaType } from \"../Types\";\nimport { sharedMedia } from \"./with/sharedMedia\"\nimport { inaudible } from \"./with/inaudible\"\nimport { visible } from \"./with/visible\"\nimport { transform } from \"./with/transform\";\n\nfunction EffectMedia(object) { this.object = object }\n\nObject.defineProperties(EffectMedia.prototype, {\n  type: { value: MediaType.effect },\n  ...sharedMedia,\n  ...transform,\n  ...inaudible,\n  ...visible,\n})\n\nexport { EffectMedia }\n","import { MediaType } from \"../Types\";\nimport { drawFilters } from \"./with/drawFilters\";\nimport { inaudible } from \"./with/inaudible\"\nimport { sharedMedia } from \"./with/sharedMedia\"\nimport { transform } from \"./with/transform\";\n\nfunction ScalerMedia(object) { this.object = object }\n\nObject.defineProperties(ScalerMedia.prototype, {\n  type: { value: MediaType.scaler },\n  ...sharedMedia,\n  ...transform,\n  ...inaudible,\n  ...drawFilters,\n})\n\nexport { ScalerMedia }\n","\nimport { MediaType } from \"../Types\";\nimport { sharedMedia } from \"./with/sharedMedia\"\nimport { inaudible } from \"./with/inaudible\"\nimport { transform } from \"./with/transform\";\nimport { drawFilters } from \"./with/drawFilters\";\n\nfunction MergerMedia(object) { this.object = object }\n\nObject.defineProperties(MergerMedia.prototype, {\n  type: { value: MediaType.merger },\n  ...sharedMedia,\n  ...transform,\n  ...inaudible,\n  ...drawFilters,\n})\n\nexport { MergerMedia }\n","export const modularFalse = { modular: { value: false } }\n","import { UrlsByType } from \"../../Utilities\";\n\nexport const invisible = { \n  visible: { value: false },\n  urlsVisibleInTimeRangeForClipByType: { \n    value: function() { return UrlsByType.none } \n  },\n}","\nconst Default = {\n  buffer: 10,\n  fps: 30,\n  loop: true,\n  volume: 0.75,\n  precision: 3,\n  autoplay: false,\n  mash: {\n    label: \"Untitled Mash\",\n    quantize: 10,\n    backcolor: \"rgb(0,0,0)\",\n  },\n  media: {\n    frame: { duration: 2 },\n    image: { duration: 2 },\n    theme: { duration: 3 },\n    transition: { duration: 1 },\n  }\n}\n\nexport { Default }\n","import { Default } from \"../../Default\"\nimport { Is } from \"../../Is\"\n\nexport const duration = { \n  duration: { \n    get: function() { \n      if (Is.undefined(this.__duration)) {\n        this.__duration = Number(this.object.duration)\n        this.__duration ||= Default.media[this.type].duration \n      }\n      return this.__duration \n    }\n  }, \n} \n","export const urlAudible = { \n  urlAudible: { \n    get: function() { \n      return this.object.audio || this.object.url || this.object.source \n    } \n  },\n}\n","export const propertiesTiming = {\n  propertiesTiming: { value: {\n    frame: { type: \"number\", value: 0 },\n    frames: { type: \"number\", value: 0 },\n  }}\n}\n","export const propertiesAudible = {\n  propertiesAudible: { \n    value: {\n      gain: {\n        type: \"number\", value: 1.0,\n      },\n      trim: {\n        type: \"integer\", value: 0,\n      },\n    } \n  }\n}","import { LoadType } from \"../../Types\"\nimport { UrlsByType } from \"../../Utilities\"\n\nexport const urlsAudible = { \n  urlsAudibleInTimeRangeForClipByType: { \n    value: function() { \n      const urls = new UrlsByType\n      const url = this.urlAudible\n      if (url) urls.audio.push(url)\n      return urls\n    }\n  },\n}\n","import { propertiesAudible } from \"./propertiesAudible\"\nimport { urlsAudible } from \"./urlsAudible\"\n\nexport const audible = { \n  audible: { value: true },\n  ...propertiesAudible,\n  ...urlsAudible,\n}","import { MediaType, TrackType } from \"../Types\"\nimport { modularFalse } from \"./with/modularFalse\"\nimport { invisible } from \"./with/invisible\"\nimport { duration } from \"./with/duration\"\nimport { urlAudible } from \"./with/urlAudible\"\nimport { sharedMedia } from \"./with/sharedMedia\"\nimport { propertiesTiming } from \"./with/propertiesTiming\"\nimport { audible } from \"./with/audible\"\n\nfunction AudioMedia(object) { this.object = object }\n\nObject.defineProperties(AudioMedia.prototype, {\n  type: { value: MediaType.audio },\n  trackType: { value: TrackType.audio },\n  ...sharedMedia,\n  ...modularFalse,\n  ...invisible,\n  ...duration,\n  ...urlAudible,\n  ...audible,\n  ...propertiesTiming,\n})\n\nexport { AudioMedia }","import { MediaType } from \"../Types\";\nimport { filters } from \"./with/filters\";\nimport { urlsFromFilters } from \"./with/urlsFromFilters\";\nimport { inaudible } from \"./with/inaudible\";\nimport { sharedMedia } from \"./with/sharedMedia\";\n\nfunction FontMedia(object) { this.object = object }\n\nObject.defineProperties(FontMedia.prototype, {\n  type: { value: MediaType.font },\n  ...sharedMedia,\n  ...filters,\n  ...urlsFromFilters,\n  ...inaudible,\n})\n\nexport { FontMedia }\n","export const urlAudibleMute = { \n  urlAudible: { \n    get: function() { \n      switch (this.object.audio) {\n        case undefined: return this.object.source\n        case 0: return\n      }\n      return this.object.audio\n    } \n  },\n}\n","import { LoadType } from \"../../Types\"\nimport { TimeFactory } from \"../../Factory/TimeFactory\"\nimport { Is } from \"../../Is\"\nimport { UrlsByType } from \"../../Utilities\"\n\nexport const urlsVisibleFrames = { \n  fps: { get: function() { return this.__fps ||= this.object.fps || 10 } },\n\n  framesMax: { \n    get: function() { return Math.floor(this.fps * this.duration) } \n  },\n\n  begin: { get: function() { return this.__begin ||= this.object.begin || 1 } },\n\n  pattern: { \n    get: function() { return this.__pattern ||= this.object.pattern || '%.jpg' } \n  },\n\n  increment: { \n    get: function() { return this.__increment ||= this.object.increment || 1 } \n  },\n\n  zeropadding: { \n    get: function() { \n      return this.__zeropadding ||= this.zeropaddingInitialize \n    } \n  },\n\n  zeropaddingInitialize: {\n    get: function() { \n      const value = this.object.zeropadding\n      if (Is.defined(value)) return value\n\n      const last_frame = this.begin + (this.increment * this.framesMax)\n      return String(last_frame).length\n    }\n  },\n\n  url: { get: function() { return this.__url ||= this.object.url || \"\" } },\n  \n  limitedTimeRange: { value: function(timeRange) {\n    return timeRange.minEndTime(TimeFactory.create(this.framesMax, this.fps))\n  } },\n\n  urlsVisibleInTimeRangeForClipByType: { \n    value: function(timeRange, clip) { \n      const urls = new UrlsByType\n      const max_frames = this.framesMax\n      const range = this.limitedTimeRange(timeRange)//.scale(this.fps)\n      //console.log(\"range\", range)\n        \n      let last_frame\n      for (let frame = range.frame; frame < range.end; frame++) {\n\n        const time = TimeFactory.create(frame, range.fps)\n        const media_time = time.scale(this.fps)\n        \n        //console.log(time, media_time)\n        if ((frame !== range.frame) && (last_frame === media_time.frame)) { \n          continue \n        }\n        last_frame = media_time.frame;\n        last_frame = Math.min(last_frame, max_frames - 1)\n        let s = String((Math.min(last_frame, max_frames) * this.increment) + this.begin)\n        if (this.zeropadding) s = s.padStart(this.zeropadding, '0')\n        const url = (this.url + this.pattern).replaceAll('%', s)\n        urls[LoadType.image].push(url)\n      }\n      return urls\n    } \n  }\n}\n","import { MediaType } from \"../Types\"\nimport { duration } from \"./with/duration\"\nimport { modularFalse } from \"./with/modularFalse\"\nimport { sharedMedia } from \"./with/sharedMedia\"\nimport { visible } from \"./with/visible\"\nimport { urlAudibleMute } from \"./with/urlAudibleMute\"\nimport { urlsVisibleFrames } from \"./with/urlsVisibleFrames\"\nimport { propertiesTiming } from \"./with/propertiesTiming\"\nimport { audible } from \"./with/audible\"\n\nfunction VideoMedia(object) { this.object = object }\n\nObject.defineProperties(VideoMedia.prototype, {\n  type: { value: MediaType.video },\n  ...sharedMedia,\n  ...modularFalse,\n  ...visible,\n  ...duration,\n  ...urlAudibleMute,\n  ...urlsVisibleFrames,\n  ...audible,\n  ...propertiesTiming,  \n})\n\nexport { VideoMedia }","export const urlVisible = { \n  urlVisible: { \n    get: function() { \n      return this.object.url\n    } \n  },\n}\n","import { LoadType } from \"../../Types\"\nimport { UrlsByType } from \"../../Utilities\"\n\nexport const urlsVisible = { \n  urlsVisibleInTimeRange: { value: function() { return [this.urlVisible] } },\n  urlsVisibleInTimeRangeForClipByType: { value: function(timeRange, clip) {\n    const urls = new UrlsByType\n    const url = this.urlVisible\n    if (url) urls[LoadType.image].push(url)\n    return urls\n  }},\n}\n","import { MediaType } from \"../Types\"\nimport { modularFalse } from \"./with/modularFalse\";\nimport { inaudible } from \"./with/inaudible\";\nimport { visible } from \"./with/visible\";\nimport { duration } from \"./with/duration\";\nimport { urlVisible } from \"./with/urlVisible\";\nimport { urlsVisible } from \"./with/urlsVisible\";\nimport { sharedMedia } from \"./with/sharedMedia\";\nimport { propertiesTiming } from \"./with/propertiesTiming\";\n\nfunction ImageMedia(object = {}) { this.object = object }\n\nObject.defineProperties(ImageMedia.prototype, {\n  type: { value: MediaType.image },\n  ...sharedMedia,\n  ...modularFalse,\n  ...inaudible,\n  ...visible,\n  ...duration,\n  ...propertiesTiming,\n  ...urlVisible,\n  ...urlsVisible,\n})\n      \nexport { ImageMedia }","import { MediaType } from \"../Types\"\nimport { duration } from \"./with/duration\"\nimport { filters } from \"./with/filters\"\nimport { html } from \"./with/html\"\nimport { inaudible } from \"./with/inaudible\"\nimport { modular } from \"./with/modular\"\nimport { propertiesModular } from \"./with/propertiesModular\"\nimport { propertiesTiming } from \"./with/propertiesTiming\"\nimport { sharedMedia } from \"./with/sharedMedia\"\nimport { urlsFromFilters } from \"./with/urlsFromFilters\"\nimport { visible } from \"./with/visible\"\n\nfunction ThemeMedia(object = {}) { \n  this.object = object \n  \n}\n\nObject.defineProperties(ThemeMedia.prototype, {\n  type: { value: MediaType.theme },\n  ...sharedMedia,\n  ...modular,\n  ...inaudible,\n  ...visible,\n  ...duration,\n  ...filters,\n  ...propertiesModular,\n  ...propertiesTiming,\n  ...html,\n  ...urlsFromFilters,\n})\n\nexport { ThemeMedia }\n","import { UrlsByType } from \"../../Utilities\"\n\nexport const urlsNone = { \n  urlsVisibleInTimeRangeForClipByType: { \n    value: function() { return UrlsByType.none } \n  },\n  urlsVisibleInTimeRangeForClipByType: { \n    value: function() { return UrlsByType.none } \n  },\n}\n","import { MediaType } from \"../Types\";\nimport { duration } from \"./with/duration\";\nimport { inaudible } from \"./with/inaudible\";\nimport { modular } from \"./with/modular\";\nimport { propertiesTiming } from \"./with/propertiesTiming\";\nimport { sharedMedia } from \"./with/sharedMedia\";\nimport { urlsNone } from \"./with/urlsNone\";\nimport { visible } from \"./with/visible\";\n\nfunction TransitionMedia(object) { this.object = object }\n\nObject.defineProperties(TransitionMedia.prototype, {\n  type: { value: MediaType.transition },\n  ...sharedMedia,\n  ...modular,\n  ...inaudible,\n  ...visible,\n  ...propertiesTiming,\n  ...duration,\n  ...urlsNone,\n})\n\nexport { TransitionMedia }\n\n","\n\nimport { Factory } from \"./Factory\"\nimport { MediaType } from \"../Types\"\nimport { EffectMedia } from \"../Media/EffectMedia\"\nimport { ScalerMedia } from \"../Media/ScalerMedia\"\nimport { MergerMedia } from \"../Media/MergerMedia\"\nimport { AudioMedia } from \"../Media/AudioMedia\"\nimport { FontMedia } from \"../Media/FontMedia\"\nimport { VideoMedia } from \"../Media/VideoMedia\"\nimport { ImageMedia } from \"../Media/ImageMedia\"\nimport { ThemeMedia } from \"../Media/ThemeMedia\"\nimport { TransitionMedia } from \"../Media/TransitionMedia\"\n\nclass MediaFactory extends Factory {\n  constructor() {\n    super()\n    this.install(MediaType.audio, AudioMedia)\n    this.install(MediaType.video, VideoMedia)\n    this.install(MediaType.image, ImageMedia)\n    this.install(MediaType.theme, ThemeMedia)\n    this.install(MediaType.effect, EffectMedia)\n    this.install(MediaType.scaler, ScalerMedia)\n    this.install(MediaType.merger, MergerMedia)\n    this.install(MediaType.font, FontMedia)\n    this.install(MediaType.transition, TransitionMedia)\n  }\n}\nconst MediaFactoryInstance = new MediaFactory\nexport { MediaFactoryInstance as MediaFactory }","import { Errors } from '../Errors';\nimport { Is } from '../Is'\nimport { TimeRange } from \"../TimeRange\";\nimport { Time } from '../Time';\n\nconst createFromArgs = (frame, fps, frames) => new TimeRange(frame, fps, frames)\n\nconst createFromSeconds = (start, duration) => createFromArgs(start, 1, duration)\n\nconst createFromTime = (time, frames) => (\n  createFromArgs(time.frame, time.fps, frames)\n)\n\nconst createFromTimes = (startTime, endTime) => {\n  const [time1, time2] = Time.scaleTimes(startTime, endTime)\n  if (time2.frame <= time1.frame) throw Errors.argument\n\n  return createFromArgs(time1.frame, time1.fps, time2.frame - time1.frame)\n}\n\nconst create = (object = {}) => { \n  if (Is.instance(object, TimeRange)) return object\n  if (Is.instance(object, Time)) return createFromTime(object)\n\n  const { frame, fps, frames } = object\n  return createFromArgs(frame, fps, frames) \n}\n\nconst TimeRangeFactory = {\n  create, createFromSeconds, createFromTime, createFromTimes\n}\n\nexport { TimeRangeFactory }\n","import { Is } from \"../../Is\"\n\nexport const toJSON = {\n  toJSON: { value: function() {\n    const object = { id: this.id, type: this.type, frame: this.frame  }\n    if (Is.array(this.effects)) object.effects = this.effects\n    return { ...this.propertyValues, ...object } \n  } }\n}\n","export const id = { \n  id: {  get: function() { return this.object.id || this.media.id } }\n}\n","export const labelFromObjectOrMedia = { \n  label: { \n    get: function() { return this.__label ||= this.labelInitialize },\n    set: function(value) { this.__label = value }\n  },\n  labelInitialize: { \n    get: function() { return this.object.label || this.media.label }\n  },\n}\n","import { MediaFactory } from \"../../Factory/MediaFactory\"\nimport { Is } from \"../../Is\"\n\nexport const media = { \n  media: { \n    get: function() { \n      if (Is.undefined(this.__media)) {\n        this.__media = MediaFactory.create(this.object.media)\n      }\n      return this.__media \n    }\n  }, \n}\n","import { TransformTypes } from \"../../Types\"\n\nexport const propertyValues = {\n  propertyValues: { get: function() {\n    // console.log(this.constructor.name, \"propertyValues\", this.properties)\n    return Object.fromEntries(Object.keys(this.properties).map(property => {\n      const valueOrTransform = this[property]\n      const transform = TransformTypes.includes(property)\n      const value = transform ? valueOrTransform.id : valueOrTransform\n      \n      return [property, value]\n    }))\n  }}\n}","export const propertiesFromMedia = { \n  properties: { get: function() { return this.media.properties } } \n}","export const copy = {\n  copy: {\n    get: function() {\n      return new this.constructor({...this.toJSON(), media: this.media })\n    }\n  }\n}","export const load = {\n  load: { value: function(mashTimeRange) {\n    const urls = this.urlsVisibleInTimeRangeByType(mashTimeRange)\n    return urls.load()\n  }}\n}","import { object } from \"./object\";\n\n// clips and transforms\nexport const editable = {\n  ...object,\n  propertyNames: { get: function() { return Object.keys(this.properties)} },\n  properties: {\n    get: function() { return this.__properties ||= this.propertiesInitialize }\n  },\n  propertiesInitialize: {\n    get: function() { \n      const object = { ...this.media.properties }\n      if (this.propertiesTransform) Object.assign(object, this.propertiesTransform)\n      return object\n    }\n  },\n}","import { toJSON } from \"./toJSON\"\nimport { track } from \"./track\"\nimport { id } from \"./id\"\nimport { labelFromObjectOrMedia } from \"./labelFromObjectOrMedia\"\nimport { media } from \"./media\"\nimport { propertyValues } from \"./propertyValues\"\nimport { propertiesFromMedia } from \"./propertiesFromMedia\"\nimport { copy } from \"./copy\"\nimport { load } from \"./load\"\nimport { editable } from \"../../Base/with/editable\"\nimport { TimeFactory } from \"../../Factory/TimeFactory\"\nimport { TimeRangeFactory } from \"../../Factory/TimeRangeFactory\"\n\nexport const sharedClip = {\n  ...editable,\n  ...copy,\n  ...toJSON,\n  ...id,\n  ...labelFromObjectOrMedia,\n  ...track,\n  time: {\n    value: function(quantize) { \n      return TimeFactory.create(this.frame, quantize) \n    }\n  },\n  timeRange: { \n    value: function(quantize) { \n      const options = { frame: this.frame, quantize, frames: this.frames }\n      return TimeRangeFactory.create(options)\n    }\n  },\n  timeRangeRelative: {\n    value: function(mashTime) {\n      const range = this.timeRange(mashTime.fps)\n      const frame = mashTime.frame - this.frame\n      if (frame < 0) {\n        console.log(this.constructor.name, \"timeRangeRelative\", mashTime, range)\n        return\n      }\n      return range.withFrame(frame)\n    }\n  },\n  ...media,\n  ...propertyValues,\n  ...propertiesFromMedia,\n  ...load,\n}\n\n\n\n\n","import { UrlsByType } from \"../../Utilities\";\n\nexport const inaudible = { \n  audible: { value: false },\n  urlsAudibleInTimeRangeByType: { \n    value: function() { return UrlsByType.none } \n  },\n}","import { Is } from \"../../Is\"\nimport { TrackType } from \"../../Types\"\n\nexport const visible = { \n  visible: { value: true },\n\n  trackType: { value: TrackType.video },\n\n  scaledContextAtTimeForDimensions: {\n    value: function(mashTime, dimensions, ...rest) {\n      const context = this.contextAtTimeForDimensions(mashTime, dimensions, ...rest)\n      // console.log(\"scaledContextAtTimeForDimensions\", context)\n      if (!this.scaler) return context\n\n      const clipTimeRange = this.timeRangeRelative(mashTime)\n      if (Is.undefined(clipTimeRange)) return\n      \n      return this.scaler.drawMediaFilters(clipTimeRange, context, dimensions)\n    }\n  },\n\n  effectedContextAtTimeForDimensions: {\n    value: function(mashTime, dimensions, ...rest) {\n      let context = this.scaledContextAtTimeForDimensions(mashTime, dimensions)\n      if (!this.effects) return context\n\n      const clipTimeRange = this.timeRangeRelative(mashTime)\n      if (Is.undefined(clipTimeRange)) return\n      \n      this.effects.reverse().forEach(effect => \n        context = effect.drawMediaFilters(clipTimeRange, context, dimensions)\n      )\n      return context\n    }\n  },\n  \n  mergeContextAtTime: { \n    value: function(mashTime, context, ...rest) { \n      \n      if (!this.merger) return context\n      const effected = this.effectedContextAtTimeForDimensions(mashTime, context.canvas, ...rest)\n      \n      const clipTimeRange = this.timeRangeRelative(mashTime)\n      if (Is.undefined(clipTimeRange)) return\n      \n      return this.merger.drawMerger(clipTimeRange, effected, context)\n    }\n  },\n}","\n\nexport const urls = {\n  urlsVisibleInTimeRangeByType: { \n    value: function(mashTimeRange) { \n      const range = this.mediaTimeRange(mashTimeRange)\n      const urls = this.media.urlsVisibleInTimeRangeForClipByType(range, this) \n      if (this.merger) {\n        urls.concat(this.merger.urlsVisibleInTimeRangeByType(range))\n      }\n      if (this.scaler) {\n        urls.concat(this.scaler.urlsVisibleInTimeRangeByType(range))\n      }\n      if (this.effects) this.effects.forEach(effect => \n        urls.concat(effect.urlsVisibleInTimeRangeByType(range))\n      )\n      return urls\n    }\n  },\n}\n\n\n","export const idMutable = {\n  id: { \n    get: function() { return this.__id ||= this.object.id },\n    set: function(value) { \n      this.__id = value \n      this.__media = null\n    }\n  }\n}","export const drawMerger = {\n  drawMerger: { value: function(clipTimeRange, inputContext, outputContext) {\n    this.media.filters.forEach(filter => {\n      filter.drawFilters(this.evaluator(clipTimeRange, inputContext, outputContext.canvas), outputContext)\n    })\n    return outputContext\n  }}\n}","export const copy = {\n  copy: { get: function() { return new this.constructor(this.toJSON()) } }\n}\n","\n\nexport const urlsFromMedia = {\n  urlsVisibleInTimeRangeByType: { \n    value: function(timeRange) { \n      return this.media.urlsVisibleInTimeRangeForClipByType(timeRange, this) \n    }\n  },\n}\n\n\n","import { Errors } from \"../../Errors\"\nimport { MediaFactory } from \"../../Factory/MediaFactory\"\nimport { Module } from \"../../Module\"\n\nexport const media = { \n  media: { get: function() { \n    return this.__media ||= this.mediaInitialize } \n  },\n  mediaInitialize: { \n    get: function() {\n      if (this.object.media) return MediaFactory.create(this.object.media)\n\n      const module = Module.ofType(this.id, this.type)\n      if (! module) throw Errors.unknown[this.type] + this.type + ' ' + this.id\n      \n      return MediaFactory.create(module)\n    }\n  }\n}\n","import { Errors } from \"../../Errors\"\nimport { Is } from \"../../Is\"\nimport { Evaluator, Property } from \"../../Utilities\"\n\nexport const evaluator = {\n  evaluator: { \n    value: function(clipRange, context, dimensions){\n      const evaluator = new Evaluator(clipRange, context, dimensions)\n      if (this.media.properties) {\n        Object.keys(this.media.properties).forEach(key => {\n          let value = this[key]\n          if (Is.undefined(value)) {\n            console.log(\"this lacked property\", key, this)\n            const property = this.media.properties[key]\n            value = property.value\n            if (Is.undefined(value)) {\n              console.log(\"Transform.draw media lacked property value\", property)\n            \n              value = Property.propertyTypeDefault(property.type)\n\n              if (Is.undefined(value)) throw Errors.unknown.type + property.type\n            }\n          } \n          evaluator.set(key, value)\n        })\n      }\n      return evaluator\n    }\n  },\n}","import { Is } from \"../../Is\"\n\nexport const toJSONTransform = {\n  toJSON: { value: function() {\n    const object = { id: this.id, type: this.type  }\n    return { ...this.propertyValues, ...object } \n  } }\n}\n","\nimport { copy } from \"../../Base/with/copy\"\nimport { propertyValues } from \"../../Clip/with/propertyValues\"\nimport { urlsFromMedia } from \"../../Clip/with/urlsFromMedia\"\nimport { labelFromObjectOrMedia } from \"../../Clip/with/labelFromObjectOrMedia\"\nimport { media } from \"./media\"\nimport { evaluator } from \"../../Clip/with/evaluator\"\nimport { editable } from \"../../Base/with/editable\"\nimport { toJSONTransform } from \"./toJSONTransform\"\nimport { propertiesFromMedia } from \"../../Clip/with/propertiesFromMedia\"\n\nexport const sharedTransform = {\n  ...editable,\n  ...copy,\n  ...media,\n  ...labelFromObjectOrMedia,\n  ...propertyValues,\n  ...urlsFromMedia,\n  ...evaluator,\n  ...toJSONTransform,\n  ...propertiesFromMedia,\n}","import { sharedTransform } from \"./with/sharedTransform\"\n\nclass Transform {\n  constructor(object) {\n    this.object = object\n    this.media.initializeInstance(this, object)\n  }\n}\n\nObject.defineProperties(Transform.prototype, {\n  ...sharedTransform,\n})\n\nexport { Transform }","\nimport { idMutable } from \"../Base/with/idMutable\"\n\nimport { ModuleType } from \"../Types\"\nimport { drawMerger } from \"./with/drawMerger\"\nimport { Transform } from \"./Transform\"\n\nclass Merger extends Transform {}\n\nObject.defineProperties(Merger.prototype, {\n  type: { value: ModuleType.merger },\n  ...idMutable,\n  ...drawMerger,\n})\n\nexport { Merger }","\nexport const drawMediaFilters = { \n  drawMediaFilters: { value: function(clipTimeRange, context, dimensions) { \n    // clipTimeRange's frame is offset of draw time within clip = frames is duration\n    this.media.filters.forEach(filter => {\n      context = filter.drawFilters(this.evaluator(clipTimeRange, context, dimensions))\n    })\n    return context\n  }},\n  \n}\n\n\n\n","import { idMutable } from \"../Base/with/idMutable\"\nimport { ModuleType } from \"../Types\"\nimport { drawMediaFilters } from \"../Clip/with/drawMediaFilters\"\nimport { Transform } from \"./Transform\"\n\nclass Scaler extends Transform {}\n\nObject.defineProperties(Scaler.prototype, {\n  type: { value: ModuleType.scaler },\n  ...idMutable,\n  ...drawMediaFilters,\n})\n\nexport { Scaler }\n","import { id } from \"../Clip/with/id\"\n\nimport { ModuleType } from \"../Types\"\nimport { drawMediaFilters } from \"../Clip/with/drawMediaFilters\"\nimport { Transform } from \"./Transform\"\n\nclass Effect extends Transform {}\n\nObject.defineProperties(Effect.prototype, {\n  type: { value: ModuleType.effect },\n  ...id,\n  ...drawMediaFilters,\n})\n\nexport { Effect }","import { ModuleType } from \"../../Types\"\nimport { Merger, Scaler, Effect } from \"../../Transform\"\nimport { Module } from \"../../Module\"\nimport { Is } from \"../../Is\";\n\nexport const transform = {\n  effects: { \n    get: function() { return this.__effects ||= this.effectsInitialize }\n  }, \n  effectsInitialize: { \n    get: function() { \n      const array = this.object.effects || []\n      return array.map(object => new Effect(object))\n    }\n  },\n  merger: { \n    get: function() { return this.__merger ||= this.mergerInitialize },\n    set: function(value) { this.__merger = new Merger({ id: value })}\n  }, \n  mergerInitialize: { \n    get: function() { \n      const object = this.object.merger || Module.objectWithDefaultId(ModuleType.merger)\n      return new Merger(object)\n    }\n  },\n  scaler: { \n    get: function() { return this.__scaler ||= this.scalerInitialize },\n    set: function(value) { this.__scaler = new Scaler({ id: value })}\n  }, \n  scalerInitialize: { \n    get: function() { \n      const object = this.object.scaler || Module.objectWithDefaultId(ModuleType.scaler)\n      return new Scaler(object)\n    }\n  },\n  coreFilters: { \n    get: function() { \n      const filters = []\n      if (Is.defined(this.media.filters)) filters.push(...this.media.filters)\n      if (Is.defined(this.merger)) filters.push(...this.merger.media.filters)\n      if (Is.defined(this.scaler)) filters.push(...this.scaler.media.filters)\n      if (Is.defined(this.effects)) {\n        filters.push(...this.effects.flatMap(effect => effect.media.filters))\n      }\n      return filters\n    }\n  },\n}","import { TimeRangeFactory } from \"../../Factory/TimeRangeFactory\"\nimport { Errors } from \"../../Errors\"\nimport { Context } from \"../../Utilities\"\nimport { Cache } from \"../../Cache\"\nimport { Is } from \"../../Is\"\n\nexport const drawImage = {\n  contextAtTimeForDimensions: { \n    value: function(mashTime, dimensions) {\n      const range = TimeRangeFactory.createFromTime(mashTime)\n      const urls = this.media.urlsVisibleInTimeRangeForClipByType(range, this) \n      const url = urls.image[0]\n\n      const resource = Cache.get(url)\n      if (!Is.object(resource)) throw Errors.uncached + url + \" contextAtTimeForDimensions\"\n    \n      const { width, height } = resource\n      let context = Context.createDrawing(width, height)\n      context.drawImage(resource, 0, 0, width, height, 0, 0, width, height)\n      return context\n    }\n  },\n}","\nclass Clip {\n  constructor(object) { \n    this.object = object \n    this.media.initializeInstance(this, object)\n  }\n}\n\nexport { Clip }","export const mediaTime = {\n  mediaTime: { value: function(time) { return time } },\n  mediaTimeRange: { value: function(timeRange) { return timeRange } },\n}","import { ClipType } from \"../Types\"\nimport { sharedClip } from \"./with/sharedClip\"\nimport { inaudible } from \"./with/inaudible\"\nimport { visible } from \"./with/visible\"\nimport { urls } from \"./with/urls\"\nimport { transform } from \"./with/transform\"\nimport { drawImage } from \"./with/drawImage\"\nimport { Clip } from \"./Clip\"\nimport { mediaTime } from \"./with/mediaTime\"\n\nclass ImageClip extends Clip {}\n\nObject.defineProperties(ImageClip.prototype, {\n  type: { value: ClipType.image },\n  ...sharedClip,\n  ...visible,\n  ...inaudible,\n  ...urls,\n  ...transform,\n  ...drawImage,\n  ...mediaTime,\n})\n\nexport { ImageClip }\n","import { TrackType } from \"../../Types\";\nimport { UrlsByType } from \"../../Utilities\";\n\nexport const invisible = { \n  visible: { value: false },\n  trackType: { value: TrackType.audio },\n  urlsVisibleInTimeRangeByType: { \n    value: function() { return UrlsByType.none } \n  },\n}","import { TimeRangeFactory } from \"../../Factory/TimeRangeFactory\"\nimport { TimeFactory } from \"../../Factory/TimeFactory\"\n\nexport const audible = { \n  audible: { get: function() { \n    const audible = this.media.audible && !this.muted\n    if (!audible) console.log(this.constructor.name, \"audible false:\", this.media.audible, !this.muted)\n    return audible\n  } },\n  muted: { \n    get: function() {\n      switch(this.gain) {\n          case 0:\n          case '0':\n          case '0,0,1,0': return true\n      }\n      return false\n    }\n  },\n  urlsAudibleInTimeRangeByType: { \n    value: function(timeRange) { \n      const range = this.mediaTimeRange(timeRange)\n      return this.media.urlsAudibleInTimeRangeForClipByType(range) \n    }\n  },\n  mediaTime: { \n    value: function(time, add_one_frame = false) {\n      const end_time = TimeFactory.create(this.frame + this.frames, time.quantize)\n      const limited_time = time.min(end_time)\n      const start_time = TimeFactory.create(this.frame, time.quantize)\n      let media_time = limited_time.subtract(start_time)\n\n      if (add_one_frame) {\n        const frame_at_speed = this.speed ? Math.ceil(this.speed) : 1\n        media_time = media_time.add(TimeFactory.create(frame_at_speed, this.quantize))\n      }\n      if (this.trim) {\n        media_time = media_time.add(TimeFactory.create(this.trim, this.quantize))\n      }\n      if (this.speed) {\n        media_time = media_time.divide(this.speed, 'ceil')\n      }\n      return media_time\n    } \n  },\n  mediaTimeRange: { \n    value: function(timeRange) { \n      const add_one_frame = (timeRange.frames > 1)\n      return TimeRangeFactory.createFromTimes(\n        this.mediaTime(timeRange.startTime), \n        this.mediaTime(timeRange.endTime, add_one_frame)\n      )\n    } \n  },\n}\n","import { TimeRangeFactory } from \"../../Factory/TimeRangeFactory\"\nimport { TimeFactory } from \"../../Factory/TimeFactory\"\n\nexport const mediaTimeFromTrim = {\n  mediaTime: { \n    value: function(time, add_one_frame = false) {\n      const end_time = TimeFactory.create(this.frame + this.frames, time.quantize)\n      const limited_time = time.min(end_time)\n      const start_time = TimeFactory.create(this.frame, time.quantize)\n      let media_time = limited_time.subtract(start_time)\n\n      if (add_one_frame) {\n        const frame_at_speed = this.speed ? Math.ceil(this.speed) : 1\n        media_time = media_time.add(TimeFactory.create(frame_at_speed, this.quantize))\n      }\n      if (this.trim) {\n        media_time = media_time.add(TimeFactory.create(this.trim, this.quantize))\n      }\n      if (this.speed) {\n        media_time = media_time.divide(this.speed, 'ceil')\n      }\n      return media_time\n    } \n  },\n  mediaTimeRange: { \n    value: function(timeRange) { \n      const add_one_frame = (timeRange.frames > 1)\n      return TimeRangeFactory.createFromTimes(\n        this.mediaTime(timeRange.startTime), \n        this.mediaTime(timeRange.endTime, add_one_frame)\n      )\n    } \n  },\n}","import { ClipType } from \"../Types\"\nimport { sharedClip } from \"./with/sharedClip\"\nimport { invisible } from \"./with/invisible\"\nimport { audible } from \"./with/audible\"\nimport { Clip } from \"./Clip\"\nimport { mediaTimeFromTrim } from \"./with/mediaTimeFromTrim\"\n\nclass AudioClip extends Clip {}\n\nObject.defineProperties(AudioClip.prototype, {\n  type: { value: ClipType.audio },\n  ...sharedClip,\n  ...invisible,\n  ...audible,\n  ...mediaTimeFromTrim,\n})\n\nexport { AudioClip }\n","import { ClipType } from \"../Types\"\nimport { sharedClip } from \"./with/sharedClip\"\nimport { visible } from \"./with/visible\"\nimport { urls } from \"./with/urls\"\nimport { audible } from \"./with/audible\"\nimport { transform } from \"./with/transform\"\nimport { mediaTimeFromTrim } from \"./with/mediaTimeFromTrim\"\n\nfunction VideoClip(object) { this.object = object }\n\nObject.defineProperties(VideoClip.prototype, {\n  type: { value: ClipType.video },\n  ...sharedClip,\n  ...visible,\n  ...audible,\n  ...urls,\n  ...transform,\n  ...mediaTimeFromTrim,\n})\n\nexport { VideoClip }\n","export const speedOne = { \n  speed: {  get: function() { return 1.0 } }\n}\n","import { ClipType } from \"../Types\"\nimport { sharedClip } from \"./with/sharedClip\"\nimport { inaudible } from \"./with/inaudible\"\nimport { visible } from \"./with/visible\"\nimport { speedOne } from \"./with/speedOne\"\nimport { urls } from \"./with/urls\"\nimport { transform } from \"./with/transform\"\nimport { evaluator } from \"./with/evaluator\"\nimport { Context } from \"../Utilities\"\nimport { drawMediaFilters } from \"./with/drawMediaFilters\"\nimport { mediaTime } from \"./with/mediaTime\"\nimport { Clip } from \"./Clip\"\nimport { Is } from \"../Is\"\n\nclass ThemeClip extends Clip {}\n\nObject.defineProperties(ThemeClip.prototype, {\n  type: { value: ClipType.theme },\n  ...sharedClip,\n  ...inaudible,\n  ...visible,\n  ...speedOne,\n  ...urls,\n  ...inaudible,\n  ...transform,\n  ...evaluator,\n  ...drawMediaFilters,\n  ...mediaTime,\n  contextAtTimeForDimensions: {\n    value: function(mashTime, dimensions) {\n      const context = Context.createDrawing(dimensions.width, dimensions.height)\n      const clipTimeRange = this.timeRangeRelative(mashTime)\n      if (Is.undefined(clipTimeRange)) return\n      \n      return this.drawMediaFilters(clipTimeRange, context, dimensions)\n    }\n  },\n})\n\nexport { ThemeClip }","import { ClipType, TransformType, TransformTypes } from \"../Types\"\nimport { sharedClip } from \"./with/sharedClip\"\nimport { visible } from \"./with/visible\"\nimport { urlsFromMedia } from \"./with/urlsFromMedia\"\nimport { Utilities } from \"../Utilities\"\nimport { Merger, Scaler } from \"../Transform\"\nimport { Is } from \"../Is\"\nimport { Context } from \"../Utilities\"\nimport { ColorFilter } from \"../CoreFilter\"\n\nimport { Sort } from \"../Sort\";\nimport { mediaTime } from \"./with/mediaTime\"\nimport { Clip } from \"./Clip\"\nconst ChildTypes = [\"to\", \"from\"]\nconst ChildType = Object.fromEntries(ChildTypes.map(type => [type, type]))\n\nclass TransitionClip extends Clip {\n  constructor(object) {\n    super(object)\n    this.children = Object.fromEntries(ChildTypes.map(type => [type, {}]))\n  }\n}\n\n\nconst definition = {\n  type: { value: ClipType.transition },\n  ...sharedClip,\n  ...visible,\n  ...urlsFromMedia,\n  ...mediaTime,\n  contextAtTimeForDimensions: {\n    value: function(mashTime, dimensions, color, clips = []) {\n      const sorted = clips.sort(Sort.byFrame)\n\n      const context = Context.createDrawing(dimensions.width, dimensions.height)\n      ColorFilter.draw( { context }, { color } )\n\n      const [fromClip, toClip] = sorted\n      const defined = {\n        [ChildType.to]: Is.object(toClip) && toClip, \n        [ChildType.from]: Is.object(fromClip) && fromClip, \n      }\n      ChildTypes.forEach(childType => {\n        const clip = defined[childType]\n        if (!clip) return\n\n        const drawing = Context.createDrawing(dimensions.width, dimensions.height)\n        ColorFilter.draw( { drawing }, { color } )\n\n        clip.mergeContextAtTime(mashTime, drawing)\n\n\n        const merger = this.child(childType, TransformType.merger)\n        const scaler = this.child(childType, TransformType.scaler)\n\n    \n        const clipTimeRange = this.timeRangeRelative(mashTime)\n        if (Is.undefined(clipTimeRange)) return\n      \n        const scaled = scaler.drawMediaFilters(clipTimeRange, drawing, dimensions)\n        merger.drawMerger(clipTimeRange, scaled, context)\n      })\n\n      return context\n    }\n  },\n  // urlsVisibleInTimeRangeByType: { \n  //   value: function(timeRange) { \n  //     const urls = new UrlsByType\n\n  //     ChildTypes.forEach(type => {\n  //       urls.concat(this.child())\n  //     })\n      \n  //     return this.media.urlsVisibleInTimeRangeForClipByType(timeRange, this) \n  //   }\n  // },\n  initializeChild: {\n    value: function(childType, transformType) {\n      const klass = transformType === TransformType.merger ? Merger : Scaler\n      return new klass(this.object[childType])\n    }\n  },\n  child: { \n    value: function(childType, transformType) { \n      return this[`${childType}${Utilities.capitalize(transformType)}`]\n    }\n  },\n}\n\nChildTypes.forEach(childType => {\n  definition[childType] = {\n    get: function() { \n      if (Is.undefined(this.children[childType])) this.children[childType] = {}\n      return this.children[childType] \n    }\n  }\n\n  TransformTypes.forEach(transformType => {\n    definition[`${childType}${Utilities.capitalize(transformType)}`] = {\n      get: function() { \n        if (Is.undefined(this.children[childType][transformType])) {\n          const child = this.initializeChild(childType, transformType)\n          this.children[childType][transformType] = child\n        }\n        return this.children[childType][transformType] \n      }\n    }\n  })\n})\n\nObject.defineProperties(TransitionClip.prototype, definition)\n\nexport { TransitionClip }\n","import { ClipType } from \"../Types\"\nimport { sharedClip } from \"./with/sharedClip\"\nimport { visible } from \"./with/visible\"\nimport { urls } from \"./with/urls\"\nimport { mediaTime } from \"./with/mediaTime\"\n\nfunction FrameClip(object) { this.object = object }\n\nObject.defineProperties(FrameClip.prototype, {\n  type: { value: ClipType.frame },\n  ...sharedClip,\n  ...visible,\n  ...urls,\n  ...mediaTime,\n})\n\n\nexport { FrameClip }","\nimport { Factory } from \"./Factory\"\nimport { Errors } from \"../Errors\"\nimport { Is } from '../Is'\nimport { \n  AudioClip, \n  VideoClip, \n  ImageClip, \n  ThemeClip, \n  TransitionClip, \n  FrameClip \n} from \"../Clip\"\nimport { ClipType } from \"../Types\"\nimport { TimeFactory } from '../Factory/TimeFactory'\n\nclass ClipFactory extends Factory {\n  constructor() {\n    super()\n    this.classesByType[ClipType.audio] = AudioClip\n    this.classesByType[ClipType.frame] = FrameClip\n    this.classesByType[ClipType.image] = ImageClip\n    this.classesByType[ClipType.theme] = ThemeClip\n    this.classesByType[ClipType.transition] = TransitionClip\n    this.classesByType[ClipType.video] = VideoClip\n  }\n  create(object = {}, media = {}, mash = {}) {\n    if (!Is.object(object)) throw(Errors.object)\n    if (!Is.object(media)) throw(Errors.media)\n  \n    if (!Is.integer(object.frames)) {\n      object.frames = TimeFactory.createFromSeconds(media.duration, mash.quantize, 'floor').frame\n    }\n    object.media ||= media\n    const media_type = object.type || media.type\n    const klass = this.typeClass(media_type)\n    const instance = new klass(object)\n    return instance\n  }\n\n  createFromMedia(media, mash) {\n    const object = { id: media.id, type: media.type }\n    return this.create(object, media, mash)\n  }\n}\n\nconst ClipFactoryInstance = new ClipFactory\nexport { ClipFactoryInstance as ClipFactory }\n\n","import { Base } from \"../Base\";\nimport { TrackType } from \"../Types\";\nimport { ClipFactory } from \"../Factory/ClipFactory\";\nimport { Sort } from \"../Sort\";\nimport { Errors } from \"../Errors\";\n\nclass Track extends Base {\n    constructor(object, mash) {\n      super(object)\n      this.mash = mash\n      \n      this.object.index ||= 0\n      this.object.type ||= TrackType.video\n    }\n\n    get clips() { return this.__clips ||= this.initializeClips }\n    get initializeClips() { \n      const array = this.object.clips || []\n      return array.map(object => {\n        const media = this.mash.searchMedia(object.id)\n        const clip = ClipFactory.create({ track: this.index, ...object }, media)\n        \n        return clip\n      })\n    }\n\n    get frames() { \n      if (!this.clips.length) return 0\n\n      const clip = this.clips[this.clips.length - 1]\n      return clip.frame + clip.frames\n    }\n\n    get index() { return this.object.index }\n\n    get isMainVideo() { return !this.index && this.type == TrackType.video }\n\n    get type() { return this.object.type }\n    \n    addClips(clips, insertIndex = 0) {\n      insertIndex ||= 0\n      if (!this.isMainVideo) insertIndex = 0 // ordered by clip.frame values \n\n      const clipIndex = insertIndex // note original, since it may decrease...\n      const movingClips = [] // build array of clips already in this.clips\n      // build array of my clips excluding the clips we're inserting\n      const spliceClips = this.clips.filter((clip, index) => {\n        const moving = clips.includes(clip)\n        if (moving) movingClips.push(clip)\n        // insert index should be decreased when clip is moving and comes before\n        if (clipIndex && moving && index < clipIndex) insertIndex--\n        return !moving\n      })\n      // insert the clips we're adding at the correct index, then sort properly\n      spliceClips.splice(insertIndex, 0, ...clips)\n      this.sortClips(spliceClips)\n\n      // set the track of clips we aren't moving \n      const newClips = clips.filter(clip => !movingClips.includes(clip))\n      newClips.forEach(clip => clip.track = this.index)\n\n      // remove all my current clips and replace with new ones in one step\n      this.clips.splice(0, this.clips.length, ...spliceClips)\n    }\n\n    frameForClipsNearFrame(clips, frame = 0) {\n      // TODO: make range that includes all clips\n\n      // find next stretch after frame that fits range\n\n      const others = this.clips.filter(clip => !clips.includes(clip))\n\n      return frame\n    }\n\n    removeClips(clips) {\n      const spliceClips = this.clips.filter(clip => !clips.includes(clip))\n      if (spliceClips.length === this.clips.length) {\n        console.log(\"removeClips\", this.type, this.index, this.clips)\n        throw Errors.internal + JSON.stringify(clips)\n      }\n      clips.forEach(clip => clip.track = -1)\n      this.sortClips(spliceClips)\n      this.clips.splice(0, this.clips.length, ...spliceClips)\n    }\n\n    sortClips(clips) { \n      clips ||= this.clips\n      if (this.isMainVideo) {\n        let frame = 0\n        clips.forEach((clip, i) => {\n          const is_transition = clip.type === TrackType.transition\n          if (i && is_transition) frame -= clip.frames\n          clip.frame = frame\n          if (!is_transition) frame += clip.frames\n        })\n      }\n      clips.sort(Sort.byFrame) \n    }\n\n    toJSON() {\n      return { type: this.type, index: this.index, clips: this.clips }\n    }\n}\n\nexport { Track }","import { Factory } from \"./Factory\"\nimport { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\nimport { Track } from \"../Track\"\n\nclass TrackFactoryClass extends Factory {\n  create(object, mash) {\n    if (!Is.object(object)) throw(Errors.object)\n    if (object instanceof Track) return object\n\n    //if (!Is.instance(mash, Mash)) throw(Errors.mash)\n\n    return new Track(object, mash)\n  }\n}\n\nconst TrackFactory = new TrackFactoryClass\nexport { TrackFactory }\n","import { Module } from \"../Module\"\nimport { Is } from '../Is'\nimport { Base } from \"../Base\"\nimport { MediaFactory } from '../Factory/MediaFactory'\nimport { TimeRangeFactory } from \"../Factory/TimeRangeFactory\"\nimport { FilterFactory } from '../Factory/FilterFactory'\nimport { TrackFactory } from '../Factory/TrackFactory'\nimport { UrlsByType } from '../Utilities'\nimport { TimeFactory } from '../Factory/TimeFactory'\nimport { Default } from '../Default'\nimport { Clip } from \"../Clip\"\nimport { Sort } from \"../Sort\"\nimport { id } from '../Base/with/id'\nimport { \n  EventType, \n  MediaType, \n  TrackType, \n  TrackTypes \n} from \"../Types\"\n\nconst MashProperty = {\n  label: \"label\",\n  backcolor: \"backcolor\",\n}\n\nclass Mash extends Base {  \n  static get properties() { return Object.values(MashProperty) }\n\n  get audio() { return this.__audio ||= this.initializeAudio }\n\n  get backcolor() { \n    return this.__backcolor ||= this.object.backcolor || Default.mash.backcolor \n  }\n  set backcolor(value) { this.__backcolor = value }\n  \n  get clips() { return this.tracks.map(track => track.clips).flat() }\n  \n  get clipsAudible() { return this.clips.filter(clip => clip.audible) }\n  \n  get clipsAudio() { return this.audio.map(track => track.clips).flat() }\n  \n  get clipsVideo() { return this.video.flatMap(track => track.clips) }\n  \n  get events() { return this.__events ||= this.object.events }\n  set events(value) { this.__events = value }\n\n  /** mash duration in frames */\n  get frames() {\n    return Math.max(0, ...this.tracks.map(track => track.frames))\n  }\n\n  get initializeAudio() { \n    const array = this.object.audio || [{ type: TrackType.audio }]\n    return array.map(track => TrackFactory.create(track, this))\n  }\n\n  get initializeMedia() {\n    const array = this.object.media || []\n    return array.map(media => MediaFactory.create(media))\n  }\n\n  get initializeVideo() { \n    const array = this.object.video || [{ type: TrackType.video }]\n    return array.map(track => TrackFactory.create(track, this))\n  }\n\n  get initialMedia() { return this.__initialMedia ||= this.initializeMedia }\n\n  get label() { return this.__label ||= this.object.label || Default.mash.label }\n  set label(value) { this.__label = value }\n\n  get media() { \n    return [...new Set(this.clips.flatMap(clip => this.mediaForClip(clip)))] \n  }\n  \n  get propertyValues() { \n    return Object.fromEntries(Mash.properties.map(key => [key, this[key]]))\n  }\n  \n  get quantize() { return this.__quantize ||= this.object.quantize || Default.mash.quantize }\n  \n  /** combined audio and video tracks */\n  get tracks() { return TrackTypes.map(av => this[av]).flat() }\n\n  get type() { return \"mash\" }\n  \n  get video() { return this.__video ||= this.initializeVideo }\n\n  addClipsToTrack(clips, trackIndex = 0, insertIndex = 0) {\n    trackIndex ||= 0\n    insertIndex ||= 0\n    const [clip] = clips\n    // console.log(\"addClipsToTrack trackIndex\", trackIndex, \"insertIndex:\", insertIndex)\n    const newTrack = this.clipTrackAtIndex(clip, trackIndex)\n    const oldTrack = this.clipTrack(clip)\n    \n    this.emitIfFramesChange(() => {\n      if (oldTrack && oldTrack !== newTrack) {\n        // console.log(\"addClipsToTrack\", newTrack.index, oldTrack.index)\n        oldTrack.removeClips(clips)\n      }\n      newTrack.addClips(clips, insertIndex)\n    })\n  }\n\n  addTrack(trackType) {\n    const array = this[trackType]\n    const options = { type: trackType, index: array.length }\n    const track = TrackFactory.create(options, this)\n    array.push(track)\n    return track\n  }\n  \n  changeClipFrames(clip, value) {\n    let limited_value = Math.max(1, value) // frames value must be > 0\n\n    if (TrackTypes.includes(clip.type)) {\n      const max = Math.floor(clip.media.duration * this.quantize) - clip.trim \n      limited_value = Math.min(max, limited_value)\n    }\n    const track = this.clipTrack(clip)\n    this.emitIfFramesChange((changeClipFrames) => {\n      clip.frames = limited_value\n      track.sortClips()\n    })\n  }\n  \n  changeClipTrim(clip, value, frames) {\n    let limited_value = Math.max(0, value)\n\n    if (TrackTypes.includes(clip.type)) { // trim not remove last frame\n      const max = Math.floor(clip.media.duration * this.quantize) - 1 \n      limited_value = Math.min(max, limited_value)\n    }\n    const new_frames = frames - limited_value\n    const track = this.clipTrack(clip)\n    this.emitIfFramesChange(() => {\n      clip.trim = limited_value\n      clip.frames = new_frames\n      track.sortClips()\n    })\n  }\n\n  clipIntersects(clip, range) { \n    return clip.timeRange(this.quantize).intersects(range)\n  }\n\n  clipTrack(clip) {\n    return this.clipTrackAtIndex(clip, clip.track)\n  }\n\n  clipTrackAtIndex(clip, index = 0) { \n    return this.trackOfTypeAtIndex(clip.trackType, index)\n  }\n\n  clipsAudibleAtTime(time) { return this.clipsWithin(time, true, false) }\n\n  clipsAudibleInTimeRange(timeRange) {\n    const range = timeRange.scale(this.quantize)\n    return this.clips.filter(clip => \n      clip.audible && this.clipIntersects(clip, range)\n    )\n  }\n\n  clipsVisibleAtTime(time) { return this.clipsWithin(time, false) }\n\n  clipsVisibleInTimeRange(timeRange) {\n    const range = timeRange.scale(this.quantize)\n    return this.clipsVideo.filter(clip => this.clipIntersects(clip, range))\n  }\n\n  clipsWithin(time, includeAudible = true, includeVisible = true) {\n    const range = TimeRangeFactory.create(time)\n    if (!includeAudible) return this.clipsVisibleInTimeRange(range)\n    if (!includeVisible) return this.clipsAudibleInTimeRange(range)\n\n    return this.clips.filter(clip => this.clipIntersects(clip, range))\n  }\n\n  emitDuration() {\n    const info = { \n      value: TimeFactory.create(this.frames, this.quantize).seconds \n    }\n    // console.log(this.constructor.name, \"emitDuration\", info)\n    this.events.emit(EventType.duration, info)  \n  }\n\n  emitIfFramesChange(method) {\n    const frames = this.events ? this.frames : null\n    // console.log(this.constructor.name, \"emitIfFramesChange\", frames)\n    method()\n    if (this.events && frames !== this.frames) this.emitDuration()\n    // else console.log(this.constructor.name, \"emitIfFramesChange\", !!this.events, frames, this.frames)\n  }\n\n  findInitialMedia(mediaId) {\n    return this.initialMedia.find(media => media.id === mediaId)\n  }\n\n  findClipMedia(mediaId) {\n    return this.media.find(media => media.id === mediaId)\n  }\n\n  findMedia(mediaId) {\n    if (!(Is.string(mediaId) && mediaId.length)) return \n    const found = this.findInitialMedia(mediaId)\n    if (found) return found\n\n    return this.findClipMedia(mediaId)\n  }\n\n  filterClipSelection(value) {\n    const array = Is.array(value) ? value : [value]\n    const clips = array.filter(clip => Is.instance(clip, Clip))\n    const [firstClip] = clips\n    // console.log(\"filterClipSelection\", clips)\n    if (!firstClip) return []\n\n    const { trackType, track } = firstClip\n\n    // selected clips must all be on same track\n    const trackClips = clips.filter(clip => \n      clip.track === track && clip.trackType === trackType\n    ).sort(Sort.byFrame)\n\n    if (track || trackType === TrackType.audio) return trackClips\n\n    // selected clips on main track must be abutting each other\n    let abutting = true\n    return trackClips.filter((clip, index) => {\n      if (!abutting) return\n\n      if (index === trackClips.length - 1) return true\n\n      abutting = clip.frame + clip.frames === trackClips[index + 1].frame\n      if (!abutting) console.log(this.constructor.name, \"filterClipSelection\", clip.frame + clip.frames, \"!==\", trackClips[index + 1].frame)\n      return true\n    })\n  }\n  mediaForClip(clip) {\n    const medias = []\n    const media = clip.media\n    if (!Is.object(media)) throw \"CLIP HAS NO MEDIA \" + clip\n    medias.push(media)\n    if (clip.scaler) medias.push(clip.scaler.media)\n    if (clip.merger) medias.push(clip.merger.media)\n\n    if (media.modular) {\n      const properties_by_type = media.modularPropertiesByType\n      Object.keys(properties_by_type).forEach(type => {\n        const modular_properties = properties_by_type[type]\n        modular_properties.forEach(key => {\n          const found = this.searchMedia(clip[key], type)\n          if (found) medias.push(found) \n        })\n      })\n    }\n    switch(media.type){\n      case MediaType.transition: {\n        medias.push(...this.mediaForClipTransform(clip.to))\n        medias.push(...this.mediaForClipTransform(clip.from))\n        break\n      }\n      case MediaType.effect:\n      case MediaType.audio: break\n      default: {\n        medias.push(...this.mediaForClipTransform(clip))\n        const effects = clip.effects\n        if (!effects) break\n        effects.forEach(effect => {\n          medias.push(...this.mediaForClip(effect))\n        })\n      }\n    }\n    return medias\n  }\n\n  mediaForClipTransform(object){\n    const medias = []\n    if (Is.object(object)) {\n      [MediaType.merger, MediaType.scaler].forEach(key => {\n        const merger_or_scaler = object[key]\n        if (Is.object(merger_or_scaler)) {\n          const found = this.searchMedia(merger_or_scaler.id, key)\n          if (found) medias.push(found)\n        }\n      })\n    }\n    return medias\n  }\n\n  mediaReferences() {\n    const references = {}\n    this.clips.forEach(clip => {\n      this.mediaForClip(clip).forEach(media => {\n        references[media.id] ||= 0\n        references[media.id]++\n      })\n    })\n    return references\n  }\n\n  removeClipsFromTrack(clips) {\n    const [clip] = clips\n    const track = this.clipTrack(clip)\n    this.emitIfFramesChange(() => track.removeClips(clips))\n  }\n\n  removeTrack(trackType) {\n    const array = this[trackType]\n    this.emitIfFramesChange(() => array.pop())\n  }\n\n  searchMedia(mediaId, moduleType) {\n    const found = this.findInitialMedia(mediaId)\n    if (found) return found\n\n    switch (moduleType) {\n      case MediaType.filter:\n        return FilterFactory.created(mediaId) ? FilterFactory.create(mediaId) : Module.defaultOfType(moduleType)\n    }\n    const module = Module.defaultOfType(moduleType)\n    if (module) return module\n\n    return this.findClipMedia(mediaId)\n  }\n \n  toJSON() {\n    return {\n      label: this.label,\n      quantize: this.quantize,\n      backcolor: this.backcolor,\n      id: this.id,\n      media: this.media,\n      audio: this.audio,\n      video: this.video,\n    }\n  }\n\n  trackOfTypeAtIndex(trackType, index = 0) { \n    if (index < 0) return\n    \n    return this[trackType][index] \n  }\n\n  urlsAudibleInTimeRangeForClipsByType(timeRange, clips) {\n    const range = timeRange.scale(this.quantize)\n    const urls = new UrlsByType\n    clips.forEach(clip => urls.concat(clip.urlsAudibleInTimeRangeByType(range)))\n    return urls\n  }\n\n  urlsForClipsWithin(clips, time, includeAudible = true, includeVisible = true) {\n    const range = TimeRangeFactory.create(time)\n    const urls = new UrlsByType\n\n    if (!includeAudible) urls.concat(this.urlsVisibleInTimeRangeForClipsByType(range, clips))\n    if (!includeVisible) urls.concat(this.urlsAudibleInTimeRangeForClipsByType(range, clips))\n\n    return urls\n  }\n\n  urlsVisibleInTimeRangeForClipsByType(timeRange, clips) {\n    const range = timeRange.scale(this.quantize)\n    const urls = new UrlsByType\n    clips.forEach(clip => urls.concat(clip.urlsVisibleInTimeRangeByType(range)))\n    return urls\n  }\n\n  urlsWithin(time, includeAudible = true, includeVisible = true) {\n    const clips = this.clipsWithin(time, includeAudible, includeVisible)\n    return this.urlsForClipsWithin(clips, time, includeAudible, includeVisible)\n  }\n}\n\nObject.defineProperties(Mash.prototype, {\n  ...id,\n})\n\nexport { Mash }\n","import { Base } from \"../Base\"\nimport { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\n\nclass Events extends Base {\n  constructor(object) {\n    super(object)\n    this.methods = new Set\n  }\n\n  get target() { return this.object.target }\n  set target(value) { \n    if (this.object.target !== value) {\n      if (!Is.instance(value, EventTarget)) throw Errors.object\n\n      const methods = new Set(this.methods)\n\n      methods.forEach(this.removeListener, this)\n      this.object.target = value\n      methods.forEach(this.addListener, this)      \n    }\n  }\n\n  addListener(method) { \n    if (this.methods.add(method)) {\n      this.target && this.target.addEventListener(Events.type, method) \n    }\n  }\n\n  emit(type, info = {}) {\n    const detail = { type, ...info }\n    const event = { detail }\n    this.target && this.target.dispatchEvent(new CustomEvent(Events.type, event))\n  }\n\n  removeListener(method) { \n    if (this.methods.delete(method)) {\n      this.target && this.target.removeEventListener(Events.type, method) \n    }\n  }\n}\n\nObject.defineProperties(Events, { type: { value: \"masher\" } })\n\nexport { Events }","import { Factory } from \"./Factory\";\nimport { ActionType } from \"../Types\";\nimport { \n  AddTrackAction, \n  MoveClipsAction,\n  AddClipToTrackAction,\n  AddEffectAction,\n  ChangeAction,\n  ChangeFramesAction,\n  ChangeTrimAction,\n  SplitAction,\n  FreezeAction,\n  MoveEffectsAction,\n  RemoveClipsAction,\n} from \"../Action\"\nimport { Is } from \"../Is\";\n\nclass ActionFactory extends Factory {\n  constructor() {\n    super()\n    this.classesByType[ActionType.addTrack] = AddTrackAction\n    this.classesByType[ActionType.addClipsToTrack] = AddClipToTrackAction\n    this.classesByType[ActionType.moveClips] = MoveClipsAction\n    this.classesByType[ActionType.addEffect] = AddEffectAction\n    this.classesByType[ActionType.change] = ChangeAction\n    this.classesByType[ActionType.changeFrames] = ChangeFramesAction\n    this.classesByType[ActionType.changeTrim] = ChangeTrimAction\n    this.classesByType[ActionType.split] = SplitAction\n    this.classesByType[ActionType.freeze] = FreezeAction\n    this.classesByType[ActionType.moveEffects] = MoveEffectsAction\n    this.classesByType[ActionType.removeClips] = RemoveClipsAction\n  }\n  \n  create(object, masher) {\n    const defaults = {\n      mash: \"\",\n      undoSelectedClips: \"selectedClips\",\n      undoSelectedEffects: \"selectedEffects\",\n      redoSelectedClips: \"selectedClips\",\n      redoSelectedEffects: \"selectedEffects\",\n    }\n    Object.entries(defaults).forEach(entry => {\n      const [key, value] = entry\n      if (Is.defined(object[key])) return\n\n      if (Is.emptystring(value)) return object[key] = masher[key]\n      \n      object[key] = [...masher[value]]\n    }) \n    return super.create(object)\n  }\n}\nconst ActionFactoryInstance = new ActionFactory\nexport { ActionFactoryInstance as ActionFactory }\n","import { Errors } from \"../../Errors\"\nimport { Id } from \"../../Utilities/Id\"\n\nexport const deprecated = {\n  uuid: { value: function() { return Id() } },\n\n  did: { value: function(_removedCount) {\n    // angular-moviemasher overrides this to be alerted when we actions that\n    // could be undone are destroyed (because we undid then did something else)\n  }},\n  canvas_context: {\n    get: function() { \n      console.warn(Errors.deprecation.canvas_context.get)\n      return this.videoContext\n    },\n    set: function(value) { \n      console.warn(Errors.deprecation.canvas_context.set)\n      this.videoContext = value \n    }\n  },\n  buffertime: {\n    get: function() { return this.buffer },\n    set: function(value) { this.buffer = value }\n  },\n  minbuffertime: {\n    get: function() { return this.buffer },\n    set: function(value) { this.buffer = value }\n  },\n}\n","import { Context } from \"../../Utilities\"\n\nexport const contexts = {\n  videoContext: { \n    get: function() { \n      this.__videoContext ||= this.object.videoContext || Context.createVideo()\n      return this.__videoContext\n    },\n    set: function(value) { \n      this.__videoContext = value \n      if (this.composition) this.composition.videoContext = value\n    }\n  },\n  audioContext: { \n    get: function() { \n      this.__audioContext ||= this.object.audioContext || Context.createAudio()\n      return this.__audioContext\n    },\n    set: function(value) { \n      this.__audioContext = value \n      if (this.composition) this.composition.audioContext = value\n    }\n  },\n}\n","import { Base } from \"../Base\"\nimport { Cache } from \"../Cache\"\nimport { ClipType } from \"../Types\"\nimport { contexts } from \"../Base/with/contexts\"\nimport { Default } from \"../Default\"\nimport { Errors } from \"../Errors\"\nimport { Is } from \"../Is\"\nimport { Pixel } from \"../Utilities\"\nimport { Sort } from \"../Sort\"\nimport { Time } from \"../Time\"\nimport { TimeFactory } from \"../Factory/TimeFactory\"\nimport { TimeRangeFactory } from \"../Factory/TimeRangeFactory\"\n\nconst throwUnlessClipsDrawable = (clips) => {\n  clips.forEach(clip => {\n    if (!clip.frames) throw Errors.frames + JSON.stringify(clip)\n  })\n}\n\nclass Composition extends Base {\n  constructor(object) {\n    // console.log(\"Composition\", object)\n    super(object)\n    this.object.bufferSeconds ||= Default.bufferSeconds\n    this.paused = true\n    this.playing = false\n    this.sourcesByClip = new Map\n    this.__mashSeconds = 0\n    this.__contextSeconds = 0\n  }        \n\n  get audible() { return !this.paused && !!this.audioContext }\n   \n  get bufferedTime() { return this.urlsAtTime.loaded }\n\n  get bufferedTimeRange() {\n    return this.urlsInTimeRange.loaded\n  }\n\n  get bufferSeconds() { return this.object.bufferSeconds }\n  set bufferSeconds(value) { this.object.bufferSeconds = value }\n\n  get clipsAtTime() { \n    return this.mash.clipsWithin(this.time, this.audible, this.visible)\n  }\n\n  get clipsInTimeRange() { \n    return this.mash.clipsWithin(this.timeRange, this.audible, this.visible)\n  }\n  \n  get configured() { return this.time && this.mash && (this.videoContext || this.audioContext) }\n\n  get gain() { \n    if (Is.undefined(this.__gain)) this.__gain = this.__gainInitialize\n    return this.__gain\n  }\n  get __gainInitialize() { \n    return Is.defined(this.object.gain) ? this.object.gain : Default.volume\n  }\n  set gain(value) {\n    if (this.__gain !== value) {\n      this.__gain = value\n      if (!this.playing) return\n\n      this.clipsAtTime.forEach(this.adjustSourceGain)\n    }\n  }\n\n \n  get mash() { return this.object.mash }\n  set mash(value) { this.object.mash = value }\n\n  get quantize() { return this.mash ? this.mash.quantize : 1 }\n\n  get seconds() {\n    const ellapsed = this.audioContext.currentTime - this.__contextSeconds\n    return ellapsed + this.__mashSeconds\n  }\n\n  get time() { return this.__time }\n  set time(value) {\n    if (!Is.instance(value, Time)) throw(Errors.time)\n\n    this.__time = value\n  }\n  \n  get timeRange() { \n    const buffer_time = TimeFactory.createFromSeconds(this.bufferSeconds)\n    const end_time = this.time.add(buffer_time)\n    return TimeRangeFactory.createFromTimes(this.time, end_time)\n  }\n\n  get timeRangeAtTime() { return TimeRangeFactory.createFromTime(this.time) }\n  \n\n  get urlsAtTime() {\n    return this.urlsInTimeRangeByType(this.timeRangeAtTime)\n  }\n  \n  get urlsInTimeRange() {\n    return this.urlsInTimeRangeByType(this.timeRange)\n  }\n\n  get visible() { return !!this.videoContext }\n  \n  adjustSourceGain(clip) {\n    const source = this.sourcesByClip.get(clip)\n    if (Is.undefined(source)) return\n\n    const { gainNode } = source\n    if (this.gain === 0.0) return gainNode.gain.value = 0.0\n  \n    const { gain } = clip\n    if (!Is.array(gain)) return gainNode.gain.value = gain * this.gain\n    \n    // time/gain pairs...\n    const times = this.clipTiming(clip)\n    const { start, duration } = times\n    gainNode.cancelScheduledValues(0)\n    const gains = gain.split(',')\n    const z = gains.length / 2\n    for (let i = 0; i < z; i++) {\n      const position = gains[i * 2]\n      const value = this.gain * gains[i * 2 + 1]\n      const seconds = start + position * duration\n      gainNode.gain.linearRampToValueAtTime(value, seconds)\n    }\n  }\n\n  clipsToDraw(throwIfUncached) {\n    const clips = this.clipsAtTime\n    throwUnlessClipsDrawable(clips)\n    const urls = this.urlsInTimeRangeByType(this.timeRangeAtTime)\n    if (!urls.loaded) {\n      if (!throwIfUncached) return\n      \n      throw Errors.uncached + urls.urlsUnloaded[0]\n    }\n    return clips\n  }\n\n  clipTiming(clip) {\n    const result = { offset: 0 }\n    const range = clip.timeRange(this.quantize)\n    const zero_seconds = this.__contextSeconds - this.__mashSeconds\n    result.start = zero_seconds + range.seconds\n\n    result.duration = range.lengthSeconds\n    if (clip.trim) {\n      range.frame = clip.trim\n      result.offset = range.seconds\n    }\n    const now = this.audioContext.currentTime\n    if (now > result.start) {\n      const dif = now - result.start\n      result.start = now\n      result.offset += dif\n      result.duration -= dif\n    }\n    return result\n  }\n\n  createSources() {\n    const clips = this.clipsInTimeRange\n    const filtered_clips = clips.filter(clip => !this.sourcesByClip.has(clip))\n    filtered_clips.forEach(clip => {\n      const media = clip.media\n      const url = media.urlAudible\n      if (url && Cache.cached(url)) {\n        const times = this.clipTiming(clip)\n        const { start, duration, offset } = times\n        if (Is.positive(start) && Is.positive(duration) && duration > 0) {\n          const gainSource = this.audioContext.createBufferSource() \n          gainSource.buffer = Cache.get(url)\n\n          const gainNode = this.audioContext.createGain()\n          gainSource.connect(gainNode)\n          gainNode.connect(this.audioContext.destination)\n          gainSource.start(start, offset, duration)\n\n          this.sourcesByClip.set(clip, { gainSource, gainNode })\n\n          this.adjustSourceGain(clip)\n\n        } \n      } \n    })\n  }\n \n  destroySources(clipsToKeep = []) {\n    this.sourcesByClip.forEach((source, clip) => {\n      if (clipsToKeep.includes(clip)) return\n\n      const { gainSource, gainNode } = source\n      gainNode.disconnect(this.audioContext.destination)\n      gainSource.disconnect(gainNode)\n      this.sourcesByClip.delete(clip)\n    })\n  }\n\n  draw() {\n    if (!this.configured) return\n    \n    this.drawClips(this.time, this.clipsToDraw(true))\n  }\n\n  drawBackground(context) {\n    if (!Is.objectStrict(context)) throw Errors.internal\n\n    context.clearRect(0, 0, context.canvas.width, context.canvas.height)\n    context.fillStyle = Pixel.color(this.mash.backcolor) \n    context.fillRect(0, 0, context.canvas.width, context.canvas.height)\n  }\n\n  drawClips(time, clips) {\n    // console.log(this.constructor.name, \"drawClips\", time, clips)\n    const main = clips.filter(clip => clip.visible && clip.track === 0)\n    this.drawBackground(this.videoContext) // fill canvas with mash background color\n    if (main.length > 1) {\n      const transition = main.find(clip => clip.type === ClipType.transition)\n      if (!transition) throw Errors.mainTrackOverlap\n\n      const transitioned = main.filter(clip => clip.type !== ClipType.transition)\n      transition.mergeContextAtTime(time, this.videoContext, this.mash.backcolor, transitioned)\n    } else {\n      const [mainClip] = main\n      if (mainClip) mainClip.mergeContextAtTime(time, this.videoContext)\n    }\n    const tracked = clips.filter(clip => !main.includes(clip)).sort(Sort.byTrack)\n    tracked.forEach(clip => {\n      clip.mergeContextAtTime(time, this.videoContext)\n    })\n  }\n\n  drawFrame() {\n    if (!this.configured) return\n\n    const clips = this.clipsToDraw()\n    if (Is.undefined(clips)) {\n      this.loadTimeRange()\n      return\n    }\n\n    requestAnimationFrame(() => this.drawClips(this.time, clips))\n    return true\n  }\n\n  loadTimeRange() {\n    if (this.audible) {\n      this.createSources()\n      this.destroySources(this.clipsInTimeRange)\n    }\n    const urls = this.urlsInTimeRangeByType(this.timeRange)\n    return urls.load(this.audioContext)\n  }\n\n  urlsInTimeRangeByType(timeRange) {\n    return this.mash.urlsWithin(timeRange, this.audible, this.visible)\n  }\n\n  loadTime() { \n    const urls = this.urlsInTimeRangeByType(this.time)\n    return urls.load(this.audioContext)\n  }\n\n  startPlaying() {\n    console.log(this.constructor.name, \"startPlaying\")\n    if (this.__bufferSource) throw Errors.internal\n    if (this.playing) throw Errors.internal\n    this.playing = true\n\n    this.__bufferSource = this.audioContext.createBufferSource()\n    this.__bufferSource.loop = true\n    this.__bufferSource.buffer = this.audioContext.createBuffer(2, 44100, 44100)\n    this.__bufferSource.connect(this.audioContext.destination)\n\n    this.__mashSeconds = this.time.seconds\n    this.__contextSeconds = this.audioContext.currentTime\n\n    console.log(\"__mashSeconds\", this.__mashSeconds)\n    console.log(\"__contextSeconds\", this.__contextSeconds)\n\n    this.createSources()\n\n    this.__bufferSource.start(0)\n  }\n\n  stopPlaying() {\n    console.log(this.constructor.name, \"stopPlaying\")\n    \n    if (!this.playing) return\n\n    this.playing = false\n    if (this.__bufferSource) this.__bufferSource.stop()\n\n    this.destroySources()\n    this.__mashSeconds = 0\n    this.__contextSeconds = 0\n    \n    if (!this.__bufferSource) return\n\n    this.__bufferSource.disconnect(this.audioContext.destination)\n    this.__bufferSource = null\n  }\n\n}\n\nObject.defineProperties(Composition.prototype, {\n  ...contexts,\n})\n\nexport { Composition }\n","import { Base } from \"../Base\"\nimport { Errors } from '../Errors'\nimport { Is } from '../Is'\nimport { ChangeAction } from \"../Action\"\nimport { Actions } from \"../Actions\"\nimport { Mash } from \"../Mash\"\nimport { ClipFactory } from \"../Factory/ClipFactory\"\nimport { MediaFactory } from \"../Factory/MediaFactory\"\nimport { TimeFactory } from \"../Factory/TimeFactory\"\nimport { TimeRangeFactory } from \"../Factory/TimeRangeFactory\"\nimport { Context } from \"../Utilities\"\nimport { Events } from \"../Events\"\nimport { ActionFactory } from \"../Factory/ActionFactory\"\nimport { Effect } from \"../Transform\"\nimport { deprecated } from \"./with/deprecated\"\nimport { contexts } from \"../Base/with/contexts\"\nimport { Default } from \"../Default\"\nimport { Composition } from \"../Composition\"\n\nimport { \n  DoType, \n  ActionType, \n  TrackType, \n  MediaType, \n  EventType, \n  TransformTypes, \n  MoveType, \n  TrackTypes \n} from \"../Types\"\n\nconst MasherProperty = {\n  autoplay: \"autoplay\",\n  precision: \"precision\",\n  loop: \"loop\",\n  fps: \"fps\",\n  volume: \"volume\",\n  buffer: \"buffer\",\n}\n\nconst Mashers = new Set\n\nconst clipCanBeSplit = (clip, time, quantize) => {\n  if (!Is.object(clip)) return \n\n  // true if now intersects clip time, but is not start or end frame\n  let range = TimeRangeFactory.createFromTime(time)\n  const clip_range = clip.timeRange(quantize) \n\n  // ranges must intersect\n  if (!clip_range.intersects(range)) return\n\n  const scaled = range.scale(clip_range.fps)\n  if (scaled.frame === clip_range.frame) return\n  if (scaled.end === clip_range.end) return\n\n  return true\n}\n\nclass Masher extends Base {\n  static get instances() { return Mashers }\n\n  static get properties() { return Object.values(MasherProperty) }\n\n  constructor(object = {}) {\n    super(object)\n    Mashers.add(this)\n   \n    this.object.canvas ||= Context.createCanvas()\n    \n    this.events = new Events({ target: this.canvas })\n    this.events.addListener(this.handleMasher.bind(this))\n\n    // console.log(\"events:\", this.events)\n    this.__load_timer = false\n    this.__moving = false\n    this.__muted = false\n    this.__paused = true\n    this.__mashFrames = 0\n    this.__time = TimeFactory.create(0, this.fps)\n    this.__drawnTime = TimeFactory.create(0, this.fps)\n\n    const mash = this.object.mash || {}\n    this.object.mash = false\n    this.mash = mash\n  }\n\n  get action_index() { return this.__actions.index }\n\n\n  get autoplay() { \n    if (Is.undefined(this.__autoplay)) {\n      this.__autoplay = this.initializeProperty(MasherProperty.autoplay)\n    }\n    return this.__autoplay\n  }\n  set autoplay(value) { this.__autoplay = value }\n\n  get composition() {\n    if (!this.__composition) {\n      const options = {\n        bufferSeconds: this.buffer,\n        gain: this.gain,\n        mash: this.mash,\n        audioContext: this.audioContext,\n        videoContext: this.videoContext,\n      }\n      this.__composition = new Composition(options)\n      this.__composition.time = this.time\n    }\n    return this.__composition\n  }\n\n  get buffer() { \n    if (Is.undefined(this.__buffer)) {\n      // deprecated buffer properties\n      const properties = [MasherProperty.buffer, 'buffertime', 'minbuffertime']\n      this.__buffer = this.initializeProperty(...properties)\n    }\n    return this.__buffer\n  }\n  set buffer(value) { \n    if (this.__buffer !== value) {\n      this.__buffer = value\n      this.composition.bufferSeconds = value\n    } \n  }\n\n  get bufferedTimeRange() { return this.composition.bufferedTimeRange }\n\n  get canvas() { return this.videoContext.canvas }\n  set canvas(value) {\n    this.videoContext = Context.createVideo(value)\n    this.events.target = value   \n  }\n  \n  get configured() { \n    return this.mash && this.canvas\n  }\n\n  // time, but in seconds\n  get currentTime() { return this.time.seconds }\n  set currentTime(seconds) { this.time = TimeFactory.createFromSeconds(seconds, this.fps) }\n\n  get duration() { return TimeFactory.create(this.__mashFrames, this.mash.quantize).seconds }\n\n  get endTime() { return this.mashEndTime.scale(this.fps, 'floor') }\n\n  get fps() { \n    if (Is.undefined(this.__fps)) {\n      this.__fps = this.initializeProperty(MasherProperty.fps)\n    }\n    return this.__fps\n  }\n  set fps(value = 0) {\n    if (!Is.integer(value) || value < 1) throw(Errors.fps)\n\n    if (this.__fps !== value) {\n      this.__fps = value\n      this.__time = this.__time.scale(value)\n      this.__drawnTime = this.__drawnTime.scale(value)\n    }\n  }\n\n  get frame() { return this.time.frame }\n  set frame(value) {\n    // called from ruler to change position\n    //console.log('frame=', value, this.fps)\n\n    this.time = TimeFactory.create(value, this.fps)\n    //console.log(\"time\", this.time)\n  }\n  // Math.round(Number(this.__mashFrames) / Number(this.mash.quantize) * Number(this.fps));}\n  get frames() { return this.mashEndTime.scale(this.fps).frame }\n\n  get gain() { return this.muted ? 0.0 : this.volume }\n\n  get loop() { \n    if (Is.undefined(this.__loop)) {\n      this.__loop = this.initializeProperty(MasherProperty.loop)\n    }\n    return this.__loop\n  }\n  set loop(value) { this.__loop = value }\n\n  get mash() { return this.__mash ||= this.object.mash }\n  set mash(object) {\n    // console.log(\"set mash\", object)\n   \n    if (this.__mash === object) return \n\n    this.paused = true\n   \n    this.__selectedEffects = []\n\n   \n    this.__mash = new Mash(object)\n    this.__mash.events = this.events\n\n    this.__actions = new Actions({ mash: this.__mash, masher: this })\n\n    // console.log(\"set mash setting selectedClips\")\n    this.selectedClips = [] // so mash gets copied into __pristine\n\n    this.handleChangeMashFrames()\n    \n    this.composition.mash = this.mash\n    this.time = TimeFactory.createFromSeconds(0, this.fps)\n\n    this.rebuffer()\n    this.redraw()\n    if (this.autoplay) this.paused = false\n  }\n\n  get mashEndTime() { return TimeFactory.create(this.__mashFrames, this.mash.quantize) }\n\n  get muted() { return this.__muted }\n  set muted(value = false) {\n    this.__muted = value\n    this.handleGainChange()\n  }\n\n  get paused() { return this.__paused }\n  set paused(value) {\n    if (!this.__mashFrames) value = true\n    if (this.__paused !== value) {\n      this.__paused = value\n      this.composition.paused = value\n      if (this.__paused) {\n        this.__set_moving(false)\n        if (this.__buffer_timer) {\n          clearInterval(this.__buffer_timer)\n          this.__buffer_timer = 0\n        }\n      } else {\n        if (! this.__buffer_timer) {\n          this.__buffer_timer = setInterval(this.rebuffer, 2000)\n        }\n        this.rebuffer()\n        this.redraw()\n      }\n    }\n  }\n\n  get position() {\n    let per = 0\n    if (this.__time.frame) {\n      per = this.__time.seconds / this.duration\n      if (per !== 1) per = parseFloat(per.toFixed(this.precision))\n    }\n    return per\n  }\n  set position(value = 0) { this.time = TimeFactory.createFromSeconds(this.duration * value, this.fps) }\n\n  get position_step() {\n    const zeros = \"0\".repeat(this.precision - 1)\n    return parseFloat(`0.${zeros}1`)\n  }\n  \n  get precision() { \n    if (Is.undefined(this.__precision)) {\n      this.__precision = this.initializeProperty(MasherProperty.precision)\n    }\n    return this.__precision\n    \n  }\n  set precision(value) { this.__precision = value }\n\n  get selectedClip() {\n    if (this.__selectedClips.length === 1) return this.__selectedClips[0] \n  }\n  set selectedClip(value) { this.selectedClips = value }\n\n  get selectedClipOrMash() { return this.selectedClip || this.__mash }\n\n  get selectedClips() { return this.__selectedClips }\n\n  set selectedClips(value) {\n    this.__selectedClips = this.mash.filterClipSelection(value)\n    this.__pristine = this.selectedClipOrMash.propertyValues \n    this.selectedEffects = []\n  }\n\n  get selectedEffect() {\n    if (this.__selectedEffects.length === 1) return this.__selectedEffects[0] \n  }\n  set selectedEffect(value){\n    this.selectedEffects = Is.object(value)  && !Is.empty(value) ? [value] : []\n  }\n\n  get selectedEffects() { return this.__selectedEffects }\n  set selectedEffects(value) {\n    const effects = this.selectedClipOrMash.effects\n    if (!effects) { // mash or multiple clips selected, or no effects\n      this.__selectedEffects = []\n      this.__pristineEffect = {}\n      return\n    }\n\n    const array = Is.array(value) ? value : []\n    this.__selectedEffects = array.filter(effect => effects.includes(effect))\n    this.__pristineEffect = (this.selectedEffect && this.selectedEffect.propertyValues) || {}\n  }\n\n  get silenced() { return this.__paused || this.muted || !this.gain }\n\n  get stalling() { return !this.__moving && !this.paused }\n\n  get time() { return this.__time }\n  set time(value) {\n    const limited_time = this.__limit_time(value)\n    const equal = this.__time.equalsTime(limited_time)\n    this.__time = limited_time\n    this.composition.time = this.__time\n      \n    if (!equal) this.handleChangeMash()\n  }\n\n  get urlsInUse() { return this.composition.urlsInTimeRange.urls }\n\n  get volume() {\n    if (Is.undefined(this.__volume)) {\n      this.__volume = this.initializeProperty(MasherProperty.volume)\n    }\n    return this.__volume\n  }\n  set volume(value) {\n    if (! Is.number(value)) throw(Errors.argument)\n\n    this.__volume = value\n    this.handleGainChange()\n  }\n\n  /**\n   * type - String audio|video|effect\n   */\n  add(object, addType, frameOrIndex, trackIndex) {\n    // console.log(\"add\", object, addType)\n    if (!Is.object(object)) throw Errors.argument + object\n    \n    if (addType === MoveType.effect) return this.addEffect(object, frameOrIndex)\n    \n    return this.addClip(object, frameOrIndex, trackIndex)\n  }\n\n  addClip(object, frameOrIndex, trackIndex) {\n    // console.log(\"addClip frameOrIndex\", frameOrIndex)\n    const media = MediaFactory.create(object)\n    const { trackType } = media\n    const clip = ClipFactory.createFromMedia(media, this.mash)\n    const clips = [clip]\n    const options = { \n      clip,\n      type: ActionType.addClipsToTrack,\n      redoSelectedClips: clips,\n      trackType,\n    }\n    const track = this.mash.trackOfTypeAtIndex(trackType, trackIndex)\n    const trackCount = this.mash[trackType].length\n    if (trackIndex || media.trackType === TrackType.audio) {\n      options.trackIndex = trackIndex\n      clip.frame = track.frameForClipsNearFrame(clips, frameOrIndex)\n      options.createTracks = Math.max(0, trackIndex + 1 - trackCount)\n    } else {\n      options.insertIndex = frameOrIndex\n      options.createTracks = Math.min(1, Math.max(0, 1 - trackCount))\n    }\n    this.actionCreate(options)\n    return this.loadVisual().then(() => Promise.resolve(clip)) \n  }\n\n  addEffect(object, index) {\n    // console.log(this.constructor.name, \"addEffect\", object, index)\n    if (!Is.object(object)) throw Errors.argument + object\n\n    const effects = this.selectedClip.effects\n    if (!Is.array(effects)) throw Errors.selection\n\n    const effect = new Effect(object)\n    const insertIndex = Is.integer(index) && index > 0 ? index : 0\n    const undoEffects = [...effects]\n    const redoEffects = [...effects]\n    redoEffects.splice(insertIndex, 0, effect)\n    const options = { \n      effects, undoEffects, redoEffects, \n      type: ActionType.moveEffects \n    }\n    this.actionCreate(options)\n    return this.loadVisual().then(() => Promise.resolve(effect)) \n  }\n  /**\n   * \n   * @param {String} type audio or video\n   */\n  addTrack(trackType = TrackType.video) {\n    if (!TrackTypes.includes(trackType)) throw Errors.type + trackType\n\n    return this.actionCreate({ trackType, type: ActionType.addTrack })\n  }\n  \n  can(method){\n    var should_be_enabled = false;\n    var z = this.__selectedClips.length;\n    switch(method){\n      case 'undo':{\n        should_be_enabled = this.__actions.canUndo\n        break;\n      }\n      case 'redo':{\n        should_be_enabled = this.__actions.canRedo\n        break;\n      }\n      case 'adjust':{\n        should_be_enabled = (z > 0);\n        if (should_be_enabled) should_be_enabled = (this.__selectedClips[0].track > 0);\n        break;\n      }\n      case 'copy':{\n        should_be_enabled = (z > 0);\n        break;\n      }\n      case 'cut':\n      case 'remove':{\n        should_be_enabled = (this.__selectedClips.length);\n        if (should_be_enabled) {\n          // TODO: test that removing won't create transition problem\n        }\n        break;\n      }\n      case 'split':{\n        should_be_enabled = clipCanBeSplit(this.selectedClip, this.time, this.mash.quantize)\n        break\n      }\n      case 'freeze':{\n        should_be_enabled = (z === 1)\n        should_be_enabled &&= MediaType.video === this.selectedClip.type\n        should_be_enabled &&= clipCanBeSplit(this.selectedClip, this.time, this.mash.quantize)\n        break;\n      }\n    }\n    return should_be_enabled;\n  }\n\n  currentActionReusable(target, property) {\n    if (!this.__actions.currentActionLast) return \n\n    const action = this.__actions.currentAction\n    if (!Is.instance(action, ChangeAction)) return\n\n    if (!(action.target === target && action.property === property)) return\n\n    return action\n  }\n\n  change(property) {\n    if (!this.selectedClip) return this.changeMash(property)\n    \n    return this.changeClip(property)\n  }\n\n  changeClip(property) {\n    if (!Is.string(property) || Is.empty(property)) throw Errors.property + property\n\n    const options = { property, target: this.selectedClip }\n    const [transform, transformProperty] = property.split(\".\")\n    \n    if (transformProperty) { \n      // make sure first component is merger or scaler\n      if (!TransformTypes.includes(transform)) throw Errors.property + transform\n\n      if (transformProperty === 'id') {\n        options.property = transform\n        options.redoValue = options.target[options.property].id\n      }\n      else {\n        // we'll call merger/scaler set property\n        options.target = options.target[transform]\n        options.property = transformProperty\n        options.redoValue = options.target[options.property]\n      }\n      console.log(this.constructor.name, \"changeClip\", transform, transformProperty, this.__pristine)\n      \n      options.undoValue = this.__pristine[transform][transformProperty]\n    } else {\n      options.undoValue = this.__pristine[property] \n      options.redoValue = options.target[options.property]\n    }\n   \n    const action = this.currentActionReusable(options.target, options.property)\n    if (action) return action.updateAction(options.redoValue)\n    \n    switch(options.property) {\n      case 'frames': {\n        options.type = ActionType.changeFrames\n        break\n      }\n      case 'trim': {\n        options.type = ActionType.changeTrim\n        break\n      }\n      default: options.type = ActionType.change\n    }\n    return this.actionCreate(options)\n  }\n\n  changeEffect(property) { \n    if (!Is.string(property) || Is.empty(property)) throw Errors.property\n\n    const target = this.selectedEffect\n    if (Is.undefined(target)) throw Errors.selection\n\n    const redoValue = target[property]\n    const action = this.currentActionReusable(target, property)\n    if (action) return action.updateAction(redoValue)\n  \n    const undoValue = this.__pristineEffect[property]\n    const options = { \n      type: ActionType.change, \n      target, property, redoValue, undoValue \n    }\n    return this.actionCreate(options)\n  }\n\n  changeMash(property) {\n    if (!Mash.properties.includes(property)) throw Errors.unknownMash + property\n\n    const target = this.mash\n    const redoValue = this.mash[property]\n    const action = this.currentActionReusable(target, property)\n    if (action) return action.updateAction(redoValue)\n  \n    const options = {\n      target,\n      property,\n      redoValue,\n      undoValue: this.__pristine[property],\n      type: ActionType.change,\n    }\n    // console.log(\"changeMash\", options)\n\n    return this.actionCreate(options)\n  }\n\n  delayedDraw() {\n    // console.log(\"Masher.delayedDraw\")\n    // called when assets are cached\n    if (! this.delayed_timer) {\n      this.delayed_timer = setTimeout(() => {\n        // console.log(\"Masher.delayedDraw.timeout\")\n        this.delayed_timer = null\n        this.redraw()\n      }, 50)\n    }\n  }\n\n  destroy() {\n    Mashers.delete(this)\n    this.mash = null;\n    this.canvas_context = null\n  } // call when player removed from DOM\n\n\n  handleAction(type, action) {\n    this.events.emit(type, { action: action })\n  }\n\n  handleGainChange() { this.composition.gain = this.gain }\n\n  handleChangeMash(){\n    this.paused = true // make sure we are not playing\n    this.rebuffer()\n    this.redraw()\n  }\n\n  handleChangeMashFrames(){\n    // console.log(\"handleChangeMashFrames\")\n    const mash_frames = this.mash.frames\n    if (this.__mashFrames !== mash_frames) {\n      this.__mashFrames = mash_frames\n      // move back if we were positioned at a time later than new duration\n      const max_frame = Math.max(0, this.endTime.frame - 1)\n      if (max_frame < this.time.frame) this.frame = max_frame\n      else this.delayedDraw()\n    } \n  }\n\n  handleMasher(event) {\n    if (event.type !== Events.type) return console.warn(\"handleMasher\", event)\n    // console.log(\"handleMasher\", event.detail)\n\n    switch(event.detail.type) {\n      case EventType.duration: {\n        this.handleChangeMashFrames()\n        break\n      }\n      case EventType.action: {\n        const action = event.detail.action\n        \n        this.selectedClips = action.selectedClips\n        this.selectedEffects = action.selectedEffects\n        switch (action.type) {\n          case ActionType.changeAction: {\n            if (action.property === \"gain\"){\n              if (this.__moving && !this.silenced) {\n                this.composition.adjustSourceGain(action.target)\n              } \n            }\n            break\n          }\n          default: this.delayedDraw()\n        }\n        break\n      }\n      default: {\n        this.delayedDraw()\n      }\n    }\n  }\n    \n  handleRemoveActions(removedActions = []) {\n    const type = removedActions.length ? EventType.truncate : EventType.add\n    this.handleAction(type, this.__actions.currentAction)\n    this.handleChangeMash()\n    // TODO: deprecated - stop calling and remove did method\n    if (removedActions.length) this.did(removedActions.length)\n  }\n\n  initializeProperty(...properties) { \n    for (let property of properties) {\n      if (Is.defined(this.object[property])) return this.object[property] \n    }\n    return Default[properties[0]] \n  }\n\n  loadVisual() {\n    return this.composition.loadTime()\n  }\n  media(clip) { return clip.media }\n\n  move(objectOrArray, moveType, frameOrIndex, trackIndex) {\n    if (!Is.object(objectOrArray)) throw Errors.argument + objectOrArray\n \n    if (moveType === MoveType.effect) {\n      return this.moveEffects(objectOrArray, frameOrIndex)\n    }\n    \n    return this.moveClips(objectOrArray, frameOrIndex, trackIndex)\n  }\n  \n  moveEffects(effectOrArray, index = 0) {\n    // console.log(this.constructor.name, \"moveEffects\", effectOrArray, index)\n    if (!Is.positive(index)) throw Errors.argument + index\n  \n    // Coerce.instanceArray? \n\n    const array = Is.array(effectOrArray) ? effectOrArray : [effectOrArray]\n    const moveEffects = array.filter(effect => Is.instance(effect, Effect))\n    if (Is.emptyarray(moveEffects)) throw Errors.argument + effectOrArray\n\n    const effects = this.selectedClip.effects\n    const undoEffects = [...effects]\n   \n    const redoEffects = []\n    undoEffects.forEach((effect, i) => {\n      if (i === index) redoEffects.push(...moveEffects) \n      if (moveEffects.includes(effect)) return\n\n      redoEffects.push(effect)\n    })\n    \n    const options = { \n      effects, undoEffects, redoEffects, \n      type: ActionType.moveEffects \n    }\n    // console.log(this.constructor.name, \"moveEffects\", options)\n    return this.actionCreate(options)\n  }\n\n  moveClips(clipOrArray, frameOrIndex = 0, trackIndex = 0) {\n    // console.log(\"moveClips\", \"frameOrIndex\", frameOrIndex, \"trackIndex\", trackIndex)\n    if (!Is.positive(frameOrIndex)) throw Errors.argument + frameOrIndex\n    if (!Is.positive(trackIndex)) throw Errors.argument + trackIndex\n  \n    const clips = this.mash.filterClipSelection(clipOrArray)\n    if (Is.emptyarray(clips)) throw Errors.argument + clipOrArray\n\n    const [firstClip] = clips\n    const { trackType, track: undoTrackIndex } = firstClip\n    const options = {\n      clips, trackType, trackIndex, undoTrackIndex, \n      type: ActionType.moveClips\n    }\n    \n    const redoTrack = this.mash.trackOfTypeAtIndex(trackType, trackIndex)\n    const undoTrack = this.mash.trackOfTypeAtIndex(trackType, undoTrackIndex)\n    const currentIndex = redoTrack.clips.indexOf(firstClip)\n\n    if (redoTrack.isMainVideo) options.insertIndex = frameOrIndex\n    if (undoTrack.isMainVideo) {\n      options.undoInsertIndex = currentIndex\n      if (frameOrIndex < currentIndex) options.undoInsertIndex += clips.length\n    }\n\n    if (!(redoTrack.isMainVideo && undoTrack.isMainVideo)) {\n      const frames = clips.map(clip => clip.frame)\n      const insertFrame =  redoTrack.frameForClipsNearFrame(clips, frameOrIndex)\n      const offset = insertFrame - firstClip.frame\n      if (!offset) return // because there would be no change\n\n      options.undoFrames = frames\n      options.redoFrames = frames.map(frame => frame + offset)\n    }\n    return this.actionCreate(options)\n  }\n\n  pause() {\n    this.paused = true;\n  }\n\n  play() {\n    this.paused = false;\n  }\n\n  rebuffer() {\n    if (this.paused) return this.composition.loadTime()\n\n    return this.composition.loadTimeRange()\n  }\n\n  redo(){\n    if (this.__actions.canRedo) {\n      const action = this.__actions.redo()\n      this.handleAction(DoType.redo, action)\n      this.handleChangeMash()\n    }\n  }\n\n  redraw() {\n    if (! this.configured) return \n\n    const video_buffered = this.composition.drawFrame()\n    const no_audio = !this.__moving || this.silenced \n    const audio_buffered = no_audio || this.composition.bufferedTime\n    // console.log(this.constructor.name, \"redraw audio_buffered:\", audio_buffered)\n    const all_buffered = video_buffered && audio_buffered\n    \n    if (this.__moving !== all_buffered) {\n      if (this.__moving) this.__set_moving(false)\n      else if (!this.__paused && this.bufferedTimeRange) this.__set_moving(true)\n    }\n  }\n\n  draw() { return this.composition.draw() }\n\n  remove(objectOrArray, moveType) {\n    if (!Is.object(objectOrArray)) throw Errors.argument + objectOrArray\n\n    if (moveType === MoveType.effect) return this.removeEffects(objectOrArray)\n\n    return this.removeClips(objectOrArray)\n  }\n\n  removeClips(clipOrArray) {\n    const clips = this.mash.filterClipSelection(clipOrArray)\n    if (Is.emptyarray(clips)) throw Errors.argument + clipOrArray\n\n    const [firstClip] = clips\n    const track = this.mash.clipTrack(firstClip)\n    const options = {\n      clips, track, index: track.clips.indexOf(firstClip),\n      type: ActionType.removeClips\n    }\n    return this.actionCreate(options)\n  }\n\n  removeEffects(effectOrArray) {\n    const array = Is.array(effectOrArray) ? effectOrArray : [effectOrArray]\n    const removeEffects = array.filter(effect => Is.instance(effect, Effect))\n    if (Is.emptyarray(removeEffects)) throw Errors.argument + effectOrArray\n\n    const effects = this.selectedClip.effects\n    const undoEffects = [...effects]\n    const redoEffects = effects.filter(effect => !removeEffects.includes(effect))\n\n    const options = { \n      redoSelectedEffects: [],\n      effects, undoEffects, redoEffects, \n      type: ActionType.moveEffects \n    }\n    return this.actionCreate(options)\n  }\n \n  select(object, toggle_selected) {\n    if (!object) {\n      // console.log(\"Masher.select FALSE\", object, toggle_selected)\n      this.selectedClip = false\n      return \n    }\n    // console.log('Masher.select TRUE', object, toggle_selected);\n    var media, i, array = [], key_array = '__selectedClips', key_prop = 'selectedClips';\n    media = this.mash.findMedia(object.id)\n    if (media){\n      if (MediaType.effect === media.type){\n        key_array = '__selectedEffects';\n        key_prop = 'selectedEffects';\n      }\n      if (toggle_selected) {\n        i = this[key_array].indexOf(object);\n        switch(this[key_array].length){\n          case 0: {\n            array.push(object);\n            break;\n          }\n          case 1: {\n            if (i > -1) break;\n          } // potential intentional fall through to default\n          default: {\n            if (i < 0) {\n              array.push(object);\n              array = array.concat(this[key_array]);\n            } else {\n              if (i) array = array.concat(this[key_array].slice(0, i));\n              if (i < (this[key_array].length - 1)) array = array.concat(this[key_array].slice(i + 1));\n            }\n          }\n\n        }\n      }\n      else {\n        if (-1 < this[key_array].indexOf(object)) return;\n        array.push(object);\n      }\n    }\n    // console.log('select', key_prop, array);\n    this[key_prop] = array;\n  }\n\n  selected(object) {\n    if (Is.instance(object, Effect)) return this.selectedEffects.includes(object)\n    \n    return this.selectedClips.includes(object)\n  }\n\n  selectEffect(effect, toggle_selected){\n    if (Is.object(effect)) return this.select(effect, toggle_selected);\n    else if (! toggle_selected) this.selectedEffect = effect;\n  }\n\n  split() {\n    const splitClip = this.selectedClip\n    if (!clipCanBeSplit(splitClip, this.time, this.mash.quantize)) return\n\n    const scaled = this.time.scale(this.mash.quantize)\n    const undoFrames = splitClip.frames\n    const redoFrames = scaled.frame - splitClip.frame\n    const insertClip = splitClip.copy\n    insertClip.frames = undoFrames - redoFrames\n    insertClip.frame = scaled.frame\n    if (splitClip.properties.includes(\"trim\")) insertClip.trim += redoFrames\n    \n    const trackClips = this.mash.clipTrack(splitClip).clips\n    const options = { \n      type: ActionType.split, \n      splitClip, \n      insertClip,\n      trackClips,\n      redoFrames,\n      undoFrames, \n      index: 1 + trackClips.indexOf(splitClip),\n      redoSelectedClips: [insertClip],\n      undoSelectedClips: [splitClip],\n    }\n    return this.actionCreate(options)\n  }\n\n  freeze() {\n    const freezeClip = this.selectedClip\n    if (!clipCanBeSplit(freezeClip, this.time, this.mash.quantize)) return\n    if (MediaType.video !== freezeClip.type) return\n\n    const scaled = this.time.scale(this.mash.quantize)\n    const trackClips = this.mash.clipTrack(freezeClip).clips\n    const insertClip = freezeClip.copy\n    const frozenClip = freezeClip.copy\n    \n    const options = {\n      frames: freezeClip.frames - (scaled.frame - freezeClip.frame),\n      freezeClip, frozenClip, insertClip, trackClips, \n      redoSelectedClips: [frozenClip],\n      index: 1 + trackClips.indexOf(freezeClip),\n      type: ActionType.freeze,\n    }\n\n    frozenClip.frame = scaled.frame \n    frozenClip.frames = 1\n    frozenClip.trim = freezeClip.trim + (scaled.frame - freezeClip.frame)\n    insertClip.frame = scaled.frame + 1\n    insertClip.frames = options.frames - 1\n    insertClip.trim = frozenClip.trim + 1\n    \n    return this.actionCreate(options)\n  }\n\n  undo() {\n    if (this.__actions.canUndo) {\n      const action = this.__actions.undo()\n      this.handleAction(DoType.undo, action)\n      this.handleChangeMash()\n    }\n  }\n\n  \n  __limit_time(time) {\n    const scaled = time.scale(this.fps)\n    const end_time = this.mashEndTime.scale(this.fps)\n    if (scaled.frame > end_time.frame) return end_time\n\n    return scaled\n    // console.log(\"__limit_time\", time)\n    // var start_time = time.copy;\n    // var limit_time = this.mashEndTime\n    // limit_time.frame = Math.max(0, limit_time.frame - 1);\n    // start_time = start_time.min(limit_time);\n    // start_time = start_time.scale(this.fps, 'floor');\n    // return start_time;\n  }\n\n  __load_timed(){\n    // console.log(this.constructor.name, \"__load_timed moving: \", this.__moving)\n    if (this.__moving){\n      // hopefully runs twice a frame\n      var now = TimeFactory.createFromSeconds(this.composition.seconds, this.fps, 'ceil');\n      if (now.frame !== this.__limit_time(now).frame) {\n        // loop back to start or pause\n        if (! this.loop) {\n          this.paused = true;\n        } else {\n          this.frame = 0;\n          this.paused = false;\n        }\n      } else {\n        if (! now.equalsTime(this.__drawnTime)) {\n          this.__time = now.scale(this.fps)\n          this.redraw();\n        }\n      }\n    }\n  }\n\n  __set_moving(tf) {\n    // console.log(\"__set_moving\", tf)\n    if (this.__moving !== tf) {\n      this.__moving = tf;\n      if (this.__moving) {\n        var $this = this;\n        this.__load_timer = setInterval(() => {$this.__load_timed();}, 500 / this.fps);\n        // start up the sound buffer with our current time, rather than displayed\n        this.composition.startPlaying() \n        this.rebuffer() // get sounds buffering now, rather than next timer execution\n      } else {\n        this.composition.stopPlaying()\n        clearInterval(this.__load_timer)\n        this.__load_timer = false\n      }\n    }\n  }\n\n  actionCreate(object) {\n    const action = ActionFactory.create(object, this) \n    const removed = this.__actions.do(action)\n    this.handleRemoveActions(removed)\n  }\n}\n\nObject.defineProperties(Masher.prototype, {\n  ...contexts,\n  ...deprecated,\n})\n\nexport { Masher }\n","import { Masher } from \"../Masher\"\nimport { Cache } from \"./Cache\"\n\nconst INTERVAL_TICS = 10 * 1000\n\nclass CacheCleaner {\n  constructor() {\n    this.interval = setInterval(this.handleInterval.bind(this), INTERVAL_TICS)\n  }\n  handleInterval() {\n    const urls_in_use = new Set\n    \n    Masher.instances.forEach(masher => {\n      const urls = masher.urlsInUse\n      // console.log(\"CacheCleaner.handleInterval urls:\", urls)\n      urls.forEach(url => urls_in_use.add(url))\n    })\n    const urls_in_cache = [...new Set(Cache.urls())]\n    const remove_urls = urls_in_cache.filter(url => !urls_in_use.has(url))\n    remove_urls.forEach(url => Cache.remove(url))\n    // const count = remove_urls.length\n    // if (count) console.log(`CacheCleaner.handleInterval urls removed: ${count}`)\n  }\n}\n\nconst CacheCleanerInstance = new CacheCleaner\nexport { CacheCleanerInstance as CacheCleaner }","\nimport { Is } from '../Is'\nimport { CacheCleaner } from \"../Cache/CacheCleaner\"\nimport { Module } from \"../Module\"\nimport { Default } from \"../Default\"\nimport { Errors } from \"../Errors\"\nimport { Masher } from '../Masher/Masher'\nimport { Property } from '../Utilities'\nconst MovieMasher = function(...args) {\n  this.instance_arguments = args\n  this.cacheCleaner = CacheCleaner // cache is shared between mashers\n  this.initialize()\n}\nMovieMasher.register = (type, objects) => { \n  return Module.addModulesOfType(objects, type) \n}\nMovieMasher.configure = (object) => {\n  if (Is.object(object)) console.warn(Errors.deprecation.configure.set)\n  else console.warn(Errors.deprecation.configure.get)\n  return Default\n}\nMovieMasher.player = (object_or_index) => {\n  const argument = Is.defined(object_or_index) ? object_or_index : {}\n  if (Is.object(argument)) return new Masher(argument)\n    \n  return Masher.instances[argument]\n}\nMovieMasher.supported = true\nMovieMasher.registered = Module\nMovieMasher.defaults = Default\nMovieMasher.Constant = Property\nMovieMasher.CoreFilter = Property\n\nObject.defineProperties(MovieMasher, {\n  initialize: { value: function() { console.log(\"MovieMasher.initialize\") } },\n  MovieMasher: { get: function() { return MovieMasher } },\n})\nObject.defineProperties(MovieMasher.prototype, {\n   MovieMasher: { get: function() { return MovieMasher } },\n})\n\n// deprecated as of 4.0.26\n//   supported,\n//   register,\n//   registered,\n//   player, \n\n//MovieMasher.MovieMasher = MovieMasher\nexport { MovieMasher }\n\n"],"names":["array","value","defined","Array","isArray","instance","method","object","string","undefined","number","boolean","integer","Number","isInteger","length","nil","not","empty","emptyarray","emptystring","emptyobject","Object","keys","nonobject","constructor","name","klass","Is","objectStrict","float","nan","isNaN","positive","invalid","unknown","expected","invalid_argument","invalid_property","deprecated","internal","Errors","throwUnlessInstance","wrongClass","mash","action","actions","argument","type","selection","merger","effect","filter","font","scaler","uncached","media","id","frame","frames","fps","seconds","url","time","timeRange","mainTrackOverlap","unknownMash","property","deprecation","property_types","addModulesOfType","configure","get","set","canvas_context","Base","toJSON","toString","add","audio","duration","image","load","module","redo","theme","transition","truncate","undo","video","ActionTypes","ActionType","fromEntries","map","ClipTypes","ClipType","CompositionType","values","DoType","DoTypes","EventType","FilterTypes","FilterType","MediaType","ModuleType","ModuleTypes","LoadType","LoadTypes","TrackType","TrackTypes","MoveType","TransformType","TransformTypes","Action","entries","key","defineProperties","events","selectedClips","done","redoSelectedClips","undoSelectedClips","selectedEffects","redoSelectedEffects","undoSelectedEffects","redoAction","emit","undoAction","AddTrackAction","addTrack","trackType","removeTrack","ChangeAction","redoValue","__redoValue","target","undoValue","updateAction","FreezeAction","trackClips","splice","index","insertClip","frozenClip","freezeClip","ChangeFramesAction","changeClipFrames","ChangeTrimAction","changeClipTrim","findBy","find","item","deleteFromArray","is_array","include","includes","indexOf","keyShouldBeCopied","substr","deepCopy","ob1","ob2","value1","capitalize","String","toUpperCase","Utilities","greatestCommonDenominator","a","b","t","lowestCommonMultiplier","Time","zero","scaleTimes","time1","time2","rounding","gcf","scale","addFrames","copy","description","divide","Math","equalsTime","min","subtract","subtracted","subtractFrames","withFrame","Factory","classesByType","typeClass","baseClass","create","createFromObject","install","TimeFactoryClass","createFromSeconds","TimeFactory","TimeRange","end","endTime","lengthSeconds","position","startTime","max","intersects","range1","range2","minEndTime","range","withFrames","KEYS_SIZED","KEYS_GETTERS","KEYS","THIS","Evaluator","context","dimensions","Map","conditionalExpression","conditional","condition","is","elements","in","split","strings","element","expression","join","replaceOperators","replaceAll","prototype","canvas","ceil","replaceKeys","expressions","RegExp","forEach","reg_exp","conditionalValue","conditionals","test_bool","evaluateExpression","evaluate","expressionOrConditions","script","Function","exception","floor","has","bind","console","log","Set","mm_cmp","x","y","mm_dimensions","mm_width","mm_height","mm_duration","mm_fps","height","mm_horz","size","proud","sized","mm_max","mm_min","mm_t","mm_vert","width","vertical","parseFloat","scaled","other","abs","Cache","__cached_urls","__urls_by_md5","cached","remove","urls","CacheInstance","Loader","promises","loadedUrl","loadedUrls","every","loadUrl","Promise","resolve","promise","requestUrl","then","processed","loadUrls","all","AudioProcessor","audioContext","process","buffer","reject","decodeAudioData","audioData","error","FontProcessor","family","font_face","FontFace","document","fonts","ImageProcessor","ModuleProcessor","ProcessorFactory","ProcessorFactoryInstance","AudioLoader","fetch","response","arrayBuffer","loaded","options","processor","FontLoader","ImageLoader","Image","onload","event","onerror","crossOrigin","src","ModuleLoader","LoaderFactory","LoaderFactoryInstance","UrlsByType","none","UrlsByTypeNone","loaders","flatMap","urlsUnloaded","concat","definition","fromPoint","pt","toPoint","toIndex","pixel","rgbAtIndex","pixels","r","g","rgb","data","safePixel","x_dif","y_dif","safePixels","half_size","push","rgbs","color","slice","Pixel","Property","modularPropertyTypeIds","__modularPropertyTypeIds","ids","propertyTypes","modular","orDefault","propertyTypeDefault","warn","propertyType","property_type","rgba","fontsize","direction4","identifier","label","direction8","mode","composite","text","PropertyInstance","Colors","yuv2rgb","yuv","k","parseInt","v","u","rgb2hex","yuv_blend","yuvs","yuv2","similarity","blend","du","dv","diff","i","z","sqrt","rgb2yuv","Context","createDrawing","createVideo","createDrawingLike","drawing","createAudio","window","AudioContext","webkitAudioContext","createCanvas","createElement","getContext","ContextFactoryInstance","AddEffectAction","effects","AddClipToTrackAction","clips","track","trackIndex","createTracks","addClipsToTrack","clip","insertIndex","removeClipsFromTrack","MoveClipsAction","addClips","redoFrames","undoFrames","undoTrackIndex","undoInsertIndex","__track","RemoveClipsAction","SplitAction","splitClip","MoveEffectsAction","redoEffects","undoEffects","Actions","canRedo","canUndo","currentAction","currentActionLast","masher","do","removed","byFrame","byTrack","byLabel","Sort","Module","defaults","fontDefaultJson","mergerDefaultJson","scalerDefaultJson","themeColorJson","themeTextJson","effectBlurJson","effectChromaKeyJson","effectEmbossJson","effectGrayscaleJson","effectSepiaJson","effectSharpenJson","effectTextJson","mergerBlendJson","mergerCenterJson","mergerConstrainedJson","mergerOverlayJson","scalerPanJson","scalerScaleJson","objects","changed","is_default","existing","sort","fontById","ofType","scalerById","mergerById","effectById","themeById","defaultOfType","objectWithDefaultId","ModuleInstance","Id","replace","c","Uint8Array","crypto","getRandomValues","__id","initializeId","toJSONFromObject","sharedMedia","properties","__properties","propertiesInitialize","propertyNames","propertiesTiming","assign","propertiesAudible","propertiesModular","source","initializeInstance","names","Reflect","inaudible","audible","urlsAudibleInTimeRangeForClipByType","visible","__propertiesModular","modularPropertiesByType","__modularPropertiesByType","initializeModularPropertiesByType","parameters","CoreFilter","scopeSet","draw","evaluator","array_key","id_key","BlendFilter","evaluated","outputContext","all_mode","globalCompositeOperation","drawImage","BlendFilterInstance","ChromaKeyFilter","accurate","components","colors","f","getImageData","yuvsFromPixelsAccurate","yuvsFromPixels","offset","matrix","putImageData","ChromaKeyFilterInstance","ColorFilter","fillStyle","fillRect","ColorFilterInstance","ColorChannelMixerFilter","rgbas","first","second","j","red","green","blue","alpha","image_data","rr","rg","rb","ra","gr","gg","gb","ga","br","bg","bb","ba","ar","ag","ab","aa","ColorChannelMixerFilterInstance","RBGA","parse","result","bias","rdiv","channel","matrix3","inputData","outputDdata","area","sum","ConvolutionFilter","input","output","createImageData","ConvolutionFilterInstance","CropFilter","in_width","in_height","w","out_w","h","out_h","CropFilterInstance","DrawBoxFilter","DrawBoxFilterInstance","mm_fontfile","font_id","mm_textfile","mm_fontfamily","DrawTextFilter","fontcolor","textfile","shadowcolor","shadowColor","shadowx","shadowy","shadowOffsetX","shadowOffsetY","fillText","DrawTextFilterInstance","FadeFilter","globalAlpha","FadeFilterInstance","OverlayFilter","OverlayFilterInstance","ScaleFilter","ScaleFilterInstance","SetSarFilter","SetSarFilterInstance","FilterFactory","chromakey","colorchannelmixer","convolution","crop","drawbox","drawtext","fade","overlay","setsar","FilterFactoryInstance","drawFilters","coreFilter","evaluateScope","FilterMedia","__coreFilter","parameter","filters","__filters","filtersInitialize","html","inspector","urlsFromFilters","urlsVisibleInTimeRangeForClipByType","properties_by_type","modular_properties","transform","EffectMedia","ScalerMedia","MergerMedia","modularFalse","invisible","Default","loop","volume","precision","autoplay","quantize","backcolor","__duration","urlAudible","gain","trim","urlsAudible","AudioMedia","FontMedia","urlAudibleMute","urlsVisibleFrames","__fps","framesMax","begin","__begin","pattern","__pattern","increment","__increment","zeropadding","__zeropadding","zeropaddingInitialize","last_frame","__url","limitedTimeRange","max_frames","media_time","s","padStart","VideoMedia","urlVisible","urlsVisible","urlsVisibleInTimeRange","ImageMedia","ThemeMedia","urlsNone","TransitionMedia","MediaFactory","MediaFactoryInstance","createFromArgs","start","createFromTime","createFromTimes","TimeRangeFactory","propertyValues","labelFromObjectOrMedia","__label","labelInitialize","__media","valueOrTransform","propertiesFromMedia","mashTimeRange","urlsVisibleInTimeRangeByType","editable","propertiesTransform","sharedClip","timeRangeRelative","mashTime","urlsAudibleInTimeRangeByType","scaledContextAtTimeForDimensions","rest","contextAtTimeForDimensions","clipTimeRange","drawMediaFilters","effectedContextAtTimeForDimensions","reverse","mergeContextAtTime","effected","drawMerger","mediaTimeRange","idMutable","inputContext","urlsFromMedia","mediaInitialize","clipRange","toJSONTransform","sharedTransform","Transform","Merger","Scaler","Effect","__effects","effectsInitialize","__merger","mergerInitialize","__scaler","scalerInitialize","coreFilters","resource","Clip","mediaTime","ImageClip","muted","add_one_frame","end_time","limited_time","start_time","frame_at_speed","speed","mediaTimeFromTrim","AudioClip","VideoClip","speedOne","ThemeClip","ChildTypes","ChildType","TransitionClip","children","sorted","fromClip","toClip","to","from","childType","child","initializeChild","transformType","FrameClip","ClipFactory","media_type","createFromMedia","ClipFactoryInstance","Track","__clips","initializeClips","searchMedia","isMainVideo","clipIndex","movingClips","spliceClips","moving","sortClips","newClips","frameForClipsNearFrame","removeClips","JSON","stringify","is_transition","TrackFactoryClass","TrackFactory","MashProperty","Mash","__audio","initializeAudio","__backcolor","tracks","flat","clipsAudible","clipsAudio","clipsVideo","__events","initializeMedia","initializeVideo","initialMedia","__initialMedia","mediaForClip","__quantize","av","__video","newTrack","clipTrackAtIndex","oldTrack","clipTrack","emitIfFramesChange","limited_value","new_frames","clipIntersects","trackOfTypeAtIndex","clipsAudibleAtTime","clipsWithin","clipsAudibleInTimeRange","clipsVisibleAtTime","clipsVisibleInTimeRange","includeAudible","includeVisible","emitDuration","info","findInitialMedia","mediaId","findClipMedia","findMedia","found","filterClipSelection","firstClip","abutting","medias","mediaForClipTransform","merger_or_scaler","mediaReferences","references","pop","moduleType","created","urlsAudibleInTimeRangeForClipsByType","urlsForClipsWithin","urlsVisibleInTimeRangeForClipsByType","urlsWithin","Events","methods","EventTarget","removeListener","addListener","addEventListener","detail","dispatchEvent","CustomEvent","delete","removeEventListener","ActionFactory","moveClips","addEffect","change","changeFrames","changeTrim","freeze","moveEffects","entry","ActionFactoryInstance","uuid","did","_removedCount","videoContext","buffertime","minbuffertime","contexts","__videoContext","composition","__audioContext","throwUnlessClipsDrawable","Composition","bufferSeconds","paused","playing","sourcesByClip","__mashSeconds","__contextSeconds","bufferedTime","urlsAtTime","bufferedTimeRange","urlsInTimeRange","clipsAtTime","clipsInTimeRange","configured","__gain","__gainInitialize","adjustSourceGain","ellapsed","currentTime","__time","buffer_time","timeRangeAtTime","urlsInTimeRangeByType","gainNode","times","clipTiming","cancelScheduledValues","gains","linearRampToValueAtTime","clipsToDraw","throwIfUncached","zero_seconds","now","dif","createSources","filtered_clips","gainSource","createBufferSource","createGain","connect","destination","destroySources","clipsToKeep","disconnect","drawClips","drawBackground","clearRect","main","transitioned","mainClip","tracked","drawFrame","loadTimeRange","requestAnimationFrame","loadTime","startPlaying","__bufferSource","createBuffer","stopPlaying","stop","MasherProperty","Mashers","clipCanBeSplit","clip_range","Masher","instances","handleMasher","__load_timer","__moving","__muted","__paused","__mashFrames","__drawnTime","action_index","__actions","__autoplay","initializeProperty","__composition","__buffer","mashEndTime","__loop","__mash","__selectedEffects","handleChangeMashFrames","rebuffer","redraw","handleGainChange","__set_moving","__buffer_timer","clearInterval","setInterval","per","toFixed","position_step","zeros","repeat","__precision","selectedClip","__selectedClips","selectedClipOrMash","__pristine","selectedEffect","__pristineEffect","silenced","stalling","__limit_time","equal","handleChangeMash","urlsInUse","__volume","addType","frameOrIndex","addClip","trackCount","actionCreate","loadVisual","can","should_be_enabled","currentActionReusable","changeMash","changeClip","transformProperty","changeEffect","delayedDraw","delayed_timer","setTimeout","destroy","handleAction","mash_frames","max_frame","changeAction","handleRemoveActions","removedActions","move","objectOrArray","moveType","effectOrArray","clipOrArray","redoTrack","undoTrack","currentIndex","insertFrame","pause","play","video_buffered","no_audio","audio_buffered","all_buffered","removeEffects","select","toggle_selected","key_array","key_prop","selected","selectEffect","__load_timed","tf","$this","INTERVAL_TICS","CacheCleaner","interval","handleInterval","urls_in_use","urls_in_cache","remove_urls","CacheCleanerInstance","MovieMasher","args","instance_arguments","cacheCleaner","initialize","register","player","object_or_index","supported","registered","Constant"],"mappings":"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"}